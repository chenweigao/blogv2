/* ============================================
   Navbar Glassmorphism Styles
   Apple/Linear Design Language
   ============================================ */

/* 
 * Requirements Coverage:
 * - 1.1: Frosted glass background with backdrop blur (16-24px)
 * - 1.2: Subtle border with rgba white for light reflection
 * - 1.3: Floating layout with 16px margin from edges
 * - 1.4: Maintain glassmorphism effect during scroll
 * - 1.5: Multi-layered soft shadows for depth
 * - 1.6: Smooth color transitions (150-250ms) on nav items
 * - 1.7: Minimum 4.5:1 contrast ratio for text
 * - 1.8: Dark mode adjustments
 */

@layer components {
  /* ========================================
     Main Navbar Container - Glassmorphism
     ======================================== */
  
  .VPNav {
    /* Glassmorphism background - Req 1.1 */
    background: var(--vp-navbar-bg, var(--vp-c-bg-glass-navbar));
    backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    -webkit-backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    
    /* Subtle border for light reflection - Req 1.2 */
    border: 1px solid var(--vp-navbar-border, var(--vp-c-border-navbar));
    border-top: none;
    
    /* Multi-layered soft shadows - Req 1.5 */
    box-shadow: var(--vp-navbar-shadow, var(--vp-shadow-navbar));
    
    /* Floating layout - Req 1.3 */
    position: fixed;
    top: var(--vp-navbar-margin, var(--vp-nav-margin));
    left: var(--vp-navbar-margin, var(--vp-nav-margin));
    right: var(--vp-navbar-margin, var(--vp-nav-margin));
    width: auto;
    max-width: calc(100% - var(--vp-navbar-margin, var(--vp-nav-margin)) * 2);
    
    /* Rounded corners for floating appearance */
    border-radius: var(--vp-navbar-radius, var(--vp-border-radius-navbar));
    
    /* Z-index for proper layering */
    z-index: var(--vp-z-index-nav);
    
    /* Smooth transitions - Req 1.6 */
    transition: 
      background-color var(--vp-animation-duration-normal) var(--vp-animation-easing-out),
      box-shadow var(--vp-animation-duration-normal) var(--vp-animation-easing-out),
      border-color var(--vp-animation-duration-normal) var(--vp-animation-easing-out),
      backdrop-filter var(--vp-animation-duration-normal) var(--vp-animation-easing-out);
  }
  
  /* Ensure glassmorphism persists during scroll - Req 1.4 */
  .VPNav.has-scrolled,
  .VPNav[data-scrolled="true"] {
    background: var(--vp-navbar-bg, var(--vp-c-bg-glass-navbar));
    backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    -webkit-backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    box-shadow: var(--vp-navbar-shadow, var(--vp-shadow-navbar));
  }
  
  /* Inner navbar wrapper adjustments */
  .VPNav .VPNavBar {
    background: transparent;
    border: none;
    box-shadow: none;
  }
  
  .VPNav .VPNavBar .wrapper {
    background: transparent;
  }
  
  .VPNav .VPNavBar .container {
    background: transparent;
  }

  /* ========================================
     Navbar Content Layout
     ======================================== */
  
  .VPNav .content {
    background: transparent;
  }
  
  .VPNav .content-body {
    background: transparent;
  }

  /* ========================================
     Adjust page content for floating navbar
     ======================================== */
  
  /* Account for floating navbar height + margin */
  :root {
    --vp-nav-height-with-margin: calc(var(--vp-nav-height) + var(--vp-nav-margin) * 2);
  }
  
  /* Ensure content doesn't hide behind floating navbar */
  .VPContent {
    padding-top: var(--vp-nav-height-with-margin);
  }
  
  .VPSidebar {
    padding-top: var(--vp-nav-height-with-margin);
    top: 0;
  }

  /* ========================================
     Hover Enhancement for Navbar
     ======================================== */
  
  @media (hover: hover) {
    .VPNav:hover {
      box-shadow: var(--vp-shadow-hover);
    }
  }
}

/* ============================================
   Dark Mode Styles - Req 1.8
   ============================================ */

@layer components {
  .dark .VPNav {
    /* Adjusted glass opacity for dark mode */
    background: var(--vp-navbar-bg, var(--vp-c-bg-glass-navbar));
    
    /* Updated border colors for visibility in dark mode */
    border-color: var(--vp-navbar-border, var(--vp-c-border-navbar));
    
    /* Consistent shadow intensity ratios for dark mode */
    box-shadow: var(--vp-navbar-shadow, var(--vp-shadow-navbar));
  }
  
  .dark .VPNav.has-scrolled,
  .dark .VPNav[data-scrolled="true"] {
    background: var(--vp-navbar-bg, var(--vp-c-bg-glass-navbar));
    box-shadow: var(--vp-navbar-shadow, var(--vp-shadow-navbar));
  }
}

/* ============================================
   Glassmorphism Fallback - Req 7.8
   ============================================ */

@supports not (backdrop-filter: blur(1px)) {
  .VPNav {
    background: var(--vp-c-bg);
    opacity: 0.98;
  }
  
  .dark .VPNav {
    background: var(--vp-c-bg);
    opacity: 0.98;
  }
}

/* ============================================
   Reduced Motion Support
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .VPNav {
    transition: none;
  }
}

/* ============================================
   Responsive Adjustments
   ============================================ */

@media (max-width: 768px) {
  .VPNav {
    /* Reduce margin on mobile for more content space */
    top: var(--vp-space-8);
    left: var(--vp-space-8);
    right: var(--vp-space-8);
    max-width: calc(100% - var(--vp-space-8) * 2);
    
    /* Slightly smaller border radius on mobile */
    border-radius: var(--vp-border-radius-large);
  }
  
  :root {
    --vp-nav-height-with-margin: calc(var(--vp-nav-height) + var(--vp-space-8) * 2);
  }
}

@media (max-width: 480px) {
  .VPNav {
    /* Minimal margin on small screens */
    top: var(--vp-space-4);
    left: var(--vp-space-4);
    right: var(--vp-space-4);
    max-width: calc(100% - var(--vp-space-4) * 2);
    
    /* Smaller border radius */
    border-radius: var(--vp-border-radius-medium);
  }
  
  :root {
    --vp-nav-height-with-margin: calc(var(--vp-nav-height) + var(--vp-space-4) * 2);
  }
}


/* ============================================
   Navbar Hover and Transition Effects
   Requirement 1.6: Smooth color transitions (150-250ms)
   ============================================ */

@layer components {
  /* ========================================
     Navigation Menu Items - Hover Effects
     ======================================== */
  
  .VPNav .VPNavBarMenu .VPNavBarMenuLink {
    /* Smooth transitions with ease-out timing - Req 1.6 */
    transition: 
      color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      background-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      opacity var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
    
    /* Base styling */
    border-radius: var(--vp-border-radius-small);
    padding: var(--vp-space-8) var(--vp-space-12);
  }
  
  @media (hover: hover) {
    .VPNav .VPNavBarMenu .VPNavBarMenuLink:hover {
      /* Hover state feedback with color/opacity changes */
      color: var(--vp-c-brand-1);
      background-color: var(--vp-c-brand-soft);
    }
  }
  
  /* Active state */
  .VPNav .VPNavBarMenu .VPNavBarMenuLink.active {
    color: var(--vp-c-brand-1);
    background-color: var(--vp-c-brand-soft);
    font-weight: 600;
  }

  /* ========================================
     Navigation Group Buttons - Hover Effects
     ======================================== */
  
  .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupButton {
    /* Smooth transitions - Req 1.6 */
    transition: 
      color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      background-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      opacity var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
    border-radius: var(--vp-border-radius-small);
    padding: var(--vp-space-8) var(--vp-space-12);
  }
  
  @media (hover: hover) {
    .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupButton:hover {
      color: var(--vp-c-brand-1);
      background-color: var(--vp-c-brand-soft);
    }
  }
  
  /* Dropdown arrow rotation */
  .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupButton .icon {
    transition: transform var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
  }
  
  .VPNav .VPNavBarMenuGroup.open .VPNavBarMenuGroupButton .icon {
    transform: rotate(180deg);
  }

  /* ========================================
     Dropdown Menu Items - Hover Effects
     ======================================== */
  
  .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem {
    transition: 
      background-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      transform var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
    border-radius: var(--vp-border-radius-small);
  }
  
  @media (hover: hover) {
    .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem:hover {
      background-color: var(--vp-c-brand-soft);
    }
    
    .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem:hover .VPNavBarMenuGroupItemLink {
      color: var(--vp-c-brand-1);
    }
  }
  
  .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem .VPNavBarMenuGroupItemLink {
    transition: color var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
  }

  /* ========================================
     Site Title - Hover Effects
     ======================================== */
  
  .VPNav .VPNavBarTitle {
    transition: 
      color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      opacity var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
  }
  
  .VPNav .VPNavBarTitle .title {
    transition: color var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
  }
  
  .VPNav .VPNavBarTitle .logo {
    transition: 
      transform var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      opacity var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
  }
  
  @media (hover: hover) {
    .VPNav .VPNavBarTitle:hover {
      color: var(--vp-c-brand-1);
    }
    
    .VPNav .VPNavBarTitle:hover .logo {
      transform: scale(1.05);
    }
  }

  /* ========================================
     Search Button - Hover Effects
     ======================================== */
  
  .VPNav .VPNavBarSearch .DocSearch-Button {
    transition: 
      background-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      border-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      box-shadow var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
    border-radius: var(--vp-border-radius-medium);
    background-color: var(--vp-c-bg-soft);
    border: 1px solid var(--vp-c-border);
  }
  
  @media (hover: hover) {
    .VPNav .VPNavBarSearch .DocSearch-Button:hover {
      background-color: var(--vp-c-brand-soft);
      border-color: var(--vp-c-brand-1);
      box-shadow: var(--vp-shadow-1);
    }
  }

  /* ========================================
     Social Links - Hover Effects
     ======================================== */
  
  .VPNav .VPSocialLinks .VPSocialLink {
    transition: 
      color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      opacity var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      transform var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
  }
  
  @media (hover: hover) {
    .VPNav .VPSocialLinks .VPSocialLink:hover {
      color: var(--vp-c-brand-1);
      transform: translateY(-1px);
    }
  }

  /* ========================================
     Theme Toggle - Hover Effects
     ======================================== */
  
  .VPNav .VPNavBarAppearance .VPSwitch {
    transition: 
      background-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      border-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
  }
  
  @media (hover: hover) {
    .VPNav .VPNavBarAppearance .VPSwitch:hover {
      border-color: var(--vp-c-brand-1);
    }
  }

  /* ========================================
     Hamburger Menu - Hover Effects
     ======================================== */
  
  .VPNav .VPNavBarHamburger {
    transition: 
      background-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      opacity var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
    border-radius: var(--vp-border-radius-small);
  }
  
  @media (hover: hover) {
    .VPNav .VPNavBarHamburger:hover {
      background-color: var(--vp-c-brand-soft);
    }
  }
  
  .VPNav .VPNavBarHamburger .hamburger span {
    transition: 
      transform var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      opacity var(--vp-animation-duration-fast) var(--vp-animation-easing-out),
      background-color var(--vp-animation-duration-fast) var(--vp-animation-easing-out);
  }
}

/* ============================================
   Reduced Motion - Disable Transitions
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .VPNav .VPNavBarMenu .VPNavBarMenuLink,
  .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupButton,
  .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupButton .icon,
  .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem,
  .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem .VPNavBarMenuGroupItemLink,
  .VPNav .VPNavBarTitle,
  .VPNav .VPNavBarTitle .title,
  .VPNav .VPNavBarTitle .logo,
  .VPNav .VPNavBarSearch .DocSearch-Button,
  .VPNav .VPSocialLinks .VPSocialLink,
  .VPNav .VPNavBarAppearance .VPSwitch,
  .VPNav .VPNavBarHamburger,
  .VPNav .VPNavBarHamburger .hamburger span {
    transition: none !important;
  }
}


/* ============================================
   Dark Mode Navbar Styles
   Requirement 1.8: Dark mode adjustments
   ============================================ */

@layer components {
  /* ========================================
     Dark Mode - Glass Background Adjustments
     ======================================== */
  
  .dark .VPNav {
    /* Adjusted glass opacity for dark mode - darker base colors */
    background: var(--vp-c-bg-glass-navbar);
    
    /* Updated border colors for visibility in dark mode */
    border-color: var(--vp-c-border-navbar);
    
    /* Consistent shadow intensity ratios for dark mode */
    box-shadow: var(--vp-shadow-navbar);
    
    /* Maintain backdrop blur */
    backdrop-filter: blur(var(--vp-blur-navbar));
    -webkit-backdrop-filter: blur(var(--vp-blur-navbar));
  }

  /* ========================================
     Dark Mode - Navigation Items
     ======================================== */
  
  .dark .VPNav .VPNavBarMenu .VPNavBarMenuLink {
    color: var(--vp-c-text-1);
  }
  
  @media (hover: hover) {
    .dark .VPNav .VPNavBarMenu .VPNavBarMenuLink:hover {
      color: var(--vp-c-brand-1);
      background-color: var(--vp-c-brand-soft);
    }
  }
  
  .dark .VPNav .VPNavBarMenu .VPNavBarMenuLink.active {
    color: var(--vp-c-brand-1);
    background-color: var(--vp-c-brand-soft);
  }

  /* ========================================
     Dark Mode - Group Buttons
     ======================================== */
  
  .dark .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupButton {
    color: var(--vp-c-text-1);
  }
  
  @media (hover: hover) {
    .dark .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupButton:hover {
      color: var(--vp-c-brand-1);
      background-color: var(--vp-c-brand-soft);
    }
  }

  /* ========================================
     Dark Mode - Dropdown Menu
     ======================================== */
  
  .dark .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItems {
    background: var(--vp-c-bg-glass-navbar);
    backdrop-filter: blur(var(--vp-blur-navbar));
    -webkit-backdrop-filter: blur(var(--vp-blur-navbar));
    border: 1px solid var(--vp-c-border-navbar);
    box-shadow: var(--vp-shadow-navbar);
  }
  
  .dark .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem .VPNavBarMenuGroupItemLink {
    color: var(--vp-c-text-1);
  }
  
  @media (hover: hover) {
    .dark .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem:hover {
      background-color: var(--vp-c-brand-soft);
    }
    
    .dark .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItem:hover .VPNavBarMenuGroupItemLink {
      color: var(--vp-c-brand-1);
    }
  }

  /* ========================================
     Dark Mode - Site Title
     ======================================== */
  
  .dark .VPNav .VPNavBarTitle .title {
    color: var(--vp-c-text-1);
  }
  
  @media (hover: hover) {
    .dark .VPNav .VPNavBarTitle:hover .title {
      color: var(--vp-c-brand-1);
    }
  }

  /* ========================================
     Dark Mode - Search Button
     ======================================== */
  
  .dark .VPNav .VPNavBarSearch .DocSearch-Button {
    background-color: var(--vp-c-bg-soft);
    border-color: var(--vp-c-border);
    color: var(--vp-c-text-2);
  }
  
  @media (hover: hover) {
    .dark .VPNav .VPNavBarSearch .DocSearch-Button:hover {
      background-color: var(--vp-c-brand-soft);
      border-color: var(--vp-c-brand-1);
    }
  }

  /* ========================================
     Dark Mode - Social Links
     ======================================== */
  
  .dark .VPNav .VPSocialLinks .VPSocialLink {
    color: var(--vp-c-text-2);
  }
  
  @media (hover: hover) {
    .dark .VPNav .VPSocialLinks .VPSocialLink:hover {
      color: var(--vp-c-brand-1);
    }
  }

  /* ========================================
     Dark Mode - Theme Toggle
     ======================================== */
  
  .dark .VPNav .VPNavBarAppearance .VPSwitch {
    border-color: var(--vp-c-border);
  }
  
  @media (hover: hover) {
    .dark .VPNav .VPNavBarAppearance .VPSwitch:hover {
      border-color: var(--vp-c-brand-1);
    }
  }

  /* ========================================
     Dark Mode - Hamburger Menu
     ======================================== */
  
  .dark .VPNav .VPNavBarHamburger .hamburger span {
    background-color: var(--vp-c-text-1);
  }
  
  @media (hover: hover) {
    .dark .VPNav .VPNavBarHamburger:hover {
      background-color: var(--vp-c-brand-soft);
    }
  }

  /* ========================================
     Dark Mode - Scrolled State
     ======================================== */
  
  .dark .VPNav.has-scrolled,
  .dark .VPNav[data-scrolled="true"] {
    background: var(--vp-c-bg-glass-navbar);
    backdrop-filter: blur(var(--vp-blur-navbar));
    -webkit-backdrop-filter: blur(var(--vp-blur-navbar));
    box-shadow: var(--vp-shadow-navbar);
    border-color: var(--vp-c-border-navbar);
  }
}

/* ============================================
   Dark Mode - Glassmorphism Fallback
   ============================================ */

@supports not (backdrop-filter: blur(1px)) {
  .dark .VPNav {
    background: var(--vp-c-bg);
    opacity: 0.98;
  }
  
  .dark .VPNav .VPNavBarMenuGroup .VPNavBarMenuGroupItems {
    background: var(--vp-c-bg);
    opacity: 0.98;
  }
}


/* ============================================
   Navbar Scroll Behavior
   Requirement 1.4: Maintain glassmorphism during scroll
   ============================================ */

@layer components {
  /* ========================================
     Scrolled State - Maintain Glassmorphism
     ======================================== */
  
  /* 
   * The navbar should maintain its glassmorphism effect
   * with consistent opacity regardless of scroll position.
   * The .scrolled class is added by NavbarEnhancer.vue
   */
  
  .VPNav.scrolled {
    /* Maintain glassmorphism background */
    background: var(--vp-navbar-bg, var(--vp-c-bg-glass-navbar));
    
    /* Maintain backdrop blur */
    backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    -webkit-backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    
    /* Slightly enhanced shadow when scrolled for depth */
    box-shadow: 
      var(--vp-shadow-navbar),
      0 1px 0 0 var(--vp-c-border);
    
    /* Maintain border */
    border-color: var(--vp-navbar-border, var(--vp-c-border-navbar));
  }
  
  /* Dark mode scrolled state */
  .dark .VPNav.scrolled {
    background: var(--vp-navbar-bg, var(--vp-c-bg-glass-navbar));
    backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    -webkit-backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    box-shadow: 
      var(--vp-shadow-navbar),
      0 1px 0 0 var(--vp-c-border);
    border-color: var(--vp-navbar-border, var(--vp-c-border-navbar));
  }

  /* ========================================
     Scroll Transition Smoothness
     ======================================== */
  
  /* Ensure smooth transition when scrolling */
  .VPNav {
    /* Will-change hint for better scroll performance */
    will-change: box-shadow;
  }
  
  /* Remove will-change after scroll settles (handled by JS) */
  .VPNav:not(.scrolled) {
    will-change: auto;
  }

  /* ========================================
     Alternative: Data Attribute Based Scroll
     ======================================== */
  
  /* Support for data-scrolled attribute if used */
  .VPNav[data-scrolled="true"] {
    background: var(--vp-navbar-bg, var(--vp-c-bg-glass-navbar));
    backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    -webkit-backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    box-shadow: 
      var(--vp-shadow-navbar),
      0 1px 0 0 var(--vp-c-border);
    border-color: var(--vp-navbar-border, var(--vp-c-border-navbar));
  }
  
  .dark .VPNav[data-scrolled="true"] {
    background: var(--vp-navbar-bg, var(--vp-c-bg-glass-navbar));
    backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    -webkit-backdrop-filter: blur(var(--vp-navbar-blur, var(--vp-blur-navbar)));
    box-shadow: 
      var(--vp-shadow-navbar),
      0 1px 0 0 var(--vp-c-border);
    border-color: var(--vp-navbar-border, var(--vp-c-border-navbar));
  }
}

/* ============================================
   Scroll Performance Optimizations
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .VPNav.scrolled,
  .VPNav[data-scrolled="true"] {
    /* Disable transition for reduced motion */
    transition: none;
  }
}

/* GPU acceleration for smooth scrolling */
@supports (transform: translateZ(0)) {
  .VPNav {
    transform: translateZ(0);
  }
}
