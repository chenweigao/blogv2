/* ============================================
   页面过渡动画 - Apple/Linear 风格
   Animation Refinements - Requirements 9.1, 9.2, 9.3
   ============================================ */

/* ============================================
   Apple-Style Easing Functions (Requirement 9.1)
   ============================================ */

:root {
  /* Apple-style easing functions - exponential curves for smooth deceleration */
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-in-expo: cubic-bezier(0.7, 0, 0.84, 0);
  --ease-in-out-expo: cubic-bezier(0.87, 0, 0.13, 1);
  
  /* Spring curves - natural bounce feel */
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-spring-soft: cubic-bezier(0.22, 1.2, 0.36, 1);
  --ease-spring-gentle: cubic-bezier(0.25, 1.1, 0.5, 1);
  
  /* Standard easing - for general use */
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Apple-specific curves for different interaction types */
  --ease-enter: var(--ease-out-expo);      /* Elements entering - ease-out */
  --ease-exit: var(--ease-in-expo);        /* Elements exiting - ease-in */
  --ease-move: var(--ease-in-out-expo);    /* Elements moving - ease-in-out */
  --ease-bounce: var(--ease-spring-soft);  /* Interactive feedback */
  
  /* Transition duration bounds (Requirement 9.2: 150-350ms) */
  --duration-instant: 50ms;
  --duration-fast: 150ms;      /* Minimum for UI interactions */
  --duration-normal: 250ms;    /* Standard interactions */
  --duration-slow: 350ms;      /* Maximum for UI interactions */
  --duration-slower: 500ms;    /* Only for special cases like page transitions */
  
  /* Composite transition presets */
  --transition-fast-enter: var(--duration-fast) var(--ease-enter);
  --transition-normal-enter: var(--duration-normal) var(--ease-enter);
  --transition-slow-enter: var(--duration-slow) var(--ease-enter);
  
  --transition-fast-exit: var(--duration-fast) var(--ease-exit);
  --transition-normal-exit: var(--duration-normal) var(--ease-exit);
  --transition-slow-exit: var(--duration-slow) var(--ease-exit);
  
  --transition-spring: var(--duration-normal) var(--ease-spring);
  --transition-spring-soft: var(--duration-normal) var(--ease-spring-soft);
  
  /* Property-specific transitions for GPU acceleration */
  --transition-transform: transform var(--duration-normal) var(--ease-enter);
  --transition-opacity: opacity var(--duration-normal) var(--ease-enter);
  --transition-colors: color var(--duration-fast) var(--ease-enter),
                       background-color var(--duration-fast) var(--ease-enter),
                       border-color var(--duration-fast) var(--ease-enter);
  --transition-shadow: box-shadow var(--duration-normal) var(--ease-enter);
}

/* ============================================
   基础动画关键帧 - 更流畅的 Apple 风格
   ============================================ */

/* 页面加载动画 - 更柔和的入场 */
@keyframes pageLoad {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 淡入上移 - Apple 风格 */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 淡入下移 */
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 左侧滑入 - 更精致 */
@keyframes slideInFromLeft {
  from {
    opacity: 0;
    transform: translateX(-40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* 右侧滑入 - 更精致 */
@keyframes slideInFromRight {
  from {
    opacity: 0;
    transform: translateX(40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* 缩放入场 - Apple 弹性效果 */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.92);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* 弹性缩放 - 更有活力 */
@keyframes scaleInSpring {
  0% {
    opacity: 0;
    transform: scale(0.85);
  }
  60% {
    opacity: 1;
    transform: scale(1.02);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* 淡入 */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* 淡出 */
@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* 脉冲效果 - 更柔和 */
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.03);
    opacity: 0.9;
  }
}

/* 柔和脉冲 */
@keyframes pulseSoft {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* 闪烁加载效果 */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* 骨架屏闪烁 */
@keyframes skeleton {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* 发光效果 - 品牌色 */
@keyframes glow {
  0%, 100% {
    box-shadow: 0 0 8px rgba(var(--vp-c-brand-rgb), 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(var(--vp-c-brand-rgb), 0.5), 
                0 0 30px rgba(var(--vp-c-brand-rgb), 0.3);
  }
}

/* 柔和发光 */
@keyframes glowSoft {
  0%, 100% {
    box-shadow: var(--vp-shadow-brand-sm);
  }
  50% {
    box-shadow: var(--vp-shadow-brand-lg);
  }
}

/* 下滑展开 */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-12px);
    max-height: 0;
  }
  to {
    opacity: 1;
    transform: translateY(0);
    max-height: 500px;
  }
}

/* 上滑收起 */
@keyframes slideUp {
  from {
    opacity: 1;
    transform: translateY(0);
    max-height: 500px;
  }
  to {
    opacity: 0;
    transform: translateY(-12px);
    max-height: 0;
  }
}

/* 浮动效果 */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

/* 轻微摇摆 */
@keyframes wiggle {
  0%, 100% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(-2deg);
  }
  75% {
    transform: rotate(2deg);
  }
}

/* 弹跳效果 */
@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-6px);
  }
}

/* 旋转加载 */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* 模糊入场 */
@keyframes blurIn {
  from {
    opacity: 0;
    filter: blur(8px);
  }
  to {
    opacity: 1;
    filter: blur(0);
  }
}

/* 模糊出场 */
@keyframes blurOut {
  from {
    opacity: 1;
    filter: blur(0);
  }
  to {
    opacity: 0;
    filter: blur(8px);
  }
}

/* ============================================
   页面切换指示器 - 更精致
   ============================================ */
.page-transition-indicator {
  position: fixed;
  top: 0;
  inset-inline-start: 0;
  width: 100%;
  height: 2px;
  background: var(--vp-c-brand-gradient);
  z-index: var(--vp-z-index-toast);
  animation: pageTransitionProgress 1s var(--vp-animation-easing-expo-out);
  transform-origin: left center;
  box-shadow: 0 0 10px rgba(var(--vp-c-brand-rgb), 0.5);
}

@keyframes pageTransitionProgress {
  0% {
    transform: scaleX(0);
    opacity: 1;
  }
  80% {
    transform: scaleX(0.9);
    opacity: 1;
  }
  100% {
    transform: scaleX(1);
    opacity: 0;
  }
}

/* ============================================
   动画工具类 - Apple-style timing (Requirement 9.2, 9.3)
   ============================================ */

/* 入场动画 - Using ease-out for entering elements (Requirement 9.3) */
.animate-fade-in {
  animation: fadeIn var(--duration-normal) var(--ease-enter) forwards;
}

.animate-fade-in-up {
  animation: fadeInUp var(--duration-normal) var(--ease-enter) forwards;
}

.animate-fade-in-down {
  animation: fadeInDown var(--duration-normal) var(--ease-enter) forwards;
}

.animate-slide-in-left {
  animation: slideInFromLeft var(--duration-normal) var(--ease-enter) forwards;
}

.animate-slide-in-right {
  animation: slideInFromRight var(--duration-normal) var(--ease-enter) forwards;
}

.animate-scale-in {
  animation: scaleIn var(--duration-normal) var(--ease-enter) forwards;
}

.animate-scale-in-spring {
  animation: scaleInSpring var(--duration-slow) var(--ease-spring) forwards;
}

.animate-blur-in {
  animation: blurIn var(--duration-normal) var(--ease-enter) forwards;
}

/* 出场动画 - Using ease-in for exiting elements (Requirement 9.3) */
.animate-fade-out {
  animation: fadeOut var(--duration-normal) var(--ease-exit) forwards;
}

.animate-blur-out {
  animation: blurOut var(--duration-normal) var(--ease-exit) forwards;
}

/* 循环动画 */
.animate-pulse {
  animation: pulse 2s var(--ease-in-out) infinite;
}

.animate-pulse-soft {
  animation: pulseSoft 2s var(--ease-in-out) infinite;
}

.animate-float {
  animation: float 3s var(--ease-in-out) infinite;
}

.animate-bounce {
  animation: bounce 1s var(--ease-spring) infinite;
}

.animate-spin {
  animation: spin 1s linear infinite;
}

.animate-glow {
  animation: glow 2s var(--ease-in-out) infinite;
}

.animate-glow-soft {
  animation: glowSoft 2s var(--ease-in-out) infinite;
}

/* 骨架屏效果 */
.animate-skeleton {
  background: linear-gradient(
    90deg,
    var(--vp-c-bg-soft) 25%,
    var(--vp-c-bg-mute) 50%,
    var(--vp-c-bg-soft) 75%
  );
  background-size: 200% 100%;
  animation: skeleton 1.5s var(--ease-in-out) infinite;
}

/* 延迟动画 - Staggered delays for sequential animations */
.animate-delay-100 { animation-delay: 100ms; }
.animate-delay-150 { animation-delay: 150ms; }
.animate-delay-200 { animation-delay: 200ms; }
.animate-delay-250 { animation-delay: 250ms; }
.animate-delay-300 { animation-delay: 300ms; }
.animate-delay-350 { animation-delay: 350ms; }
.animate-delay-400 { animation-delay: 400ms; }
.animate-delay-500 { animation-delay: 500ms; }

/* 动画时长 - Within 150-350ms bounds (Requirement 9.2) */
.animate-duration-fast { animation-duration: var(--duration-fast); }     /* 150ms */
.animate-duration-normal { animation-duration: var(--duration-normal); } /* 250ms */
.animate-duration-slow { animation-duration: var(--duration-slow); }     /* 350ms */

/* 动画缓动 - Apple-style easing classes */
.animate-ease-enter { animation-timing-function: var(--ease-enter); }
.animate-ease-exit { animation-timing-function: var(--ease-exit); }
.animate-ease-spring { animation-timing-function: var(--ease-spring); }
.animate-ease-spring-soft { animation-timing-function: var(--ease-spring-soft); }

/* ============================================
   悬停动画效果 - Apple-style transitions (Requirement 9.1, 9.2)
   ============================================ */

/* Hover lift effect - using transform and opacity only for GPU acceleration */
.hover-lift {
  transition: var(--transition-transform), var(--transition-shadow);
}

.hover-lift:hover {
  transform: translateY(-4px);
  box-shadow: var(--vp-shadow-hover);
}

/* Hover scale effect - subtle scale with spring easing */
.hover-scale {
  transition: transform var(--duration-fast) var(--ease-spring);
}

.hover-scale:hover {
  transform: scale(1.02);
}

/* Hover glow effect - brand color glow */
.hover-glow {
  transition: box-shadow var(--duration-normal) var(--ease-enter);
}

.hover-glow:hover {
  box-shadow: var(--vp-glow-brand);
}

/* Combined hover effect - lift + glow */
.hover-lift-glow {
  transition: transform var(--duration-normal) var(--ease-enter),
              box-shadow var(--duration-normal) var(--ease-enter);
}

.hover-lift-glow:hover {
  transform: translateY(-4px);
  box-shadow: var(--vp-shadow-hover), var(--vp-glow-brand);
}

/* Hover color transition - for text and backgrounds */
.hover-color {
  transition: var(--transition-colors);
}

/* Interactive element base - combines common hover properties */
.interactive {
  transition: transform var(--duration-fast) var(--ease-enter),
              opacity var(--duration-fast) var(--ease-enter),
              box-shadow var(--duration-normal) var(--ease-enter);
  cursor: pointer;
}

.interactive:hover {
  transform: translateY(-2px);
}

.interactive:active {
  transform: translateY(0) scale(0.98);
  transition-duration: var(--duration-fast);
}

/* ============================================
   GPU-Accelerated Animations (Requirement 9.5, 9.6)
   Only animate transform and opacity for best performance
   Avoid: width, height, top, left, margin, padding
   ============================================ */

/* GPU acceleration hints - use sparingly */
.gpu-accelerated {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Remove will-change after animation completes to free resources */
.gpu-accelerated-temp {
  will-change: transform, opacity;
}

.gpu-accelerated-temp.animation-complete {
  will-change: auto;
}

/* Performance-optimized transition classes */
.transition-gpu {
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.transition-gpu-fast {
  transition: transform var(--duration-fast) var(--ease-enter),
              opacity var(--duration-fast) var(--ease-enter);
}

.transition-gpu-slow {
  transition: transform var(--duration-slow) var(--ease-enter),
              opacity var(--duration-slow) var(--ease-enter);
}

/* GPU-optimized transform utilities */
.translate-y-0 { transform: translateY(0); }
.translate-y-1 { transform: translateY(4px); }
.translate-y-2 { transform: translateY(8px); }
.translate-y-3 { transform: translateY(12px); }
.translate-y-4 { transform: translateY(16px); }
.-translate-y-1 { transform: translateY(-4px); }
.-translate-y-2 { transform: translateY(-8px); }
.-translate-y-3 { transform: translateY(-12px); }
.-translate-y-4 { transform: translateY(-16px); }

.translate-x-0 { transform: translateX(0); }
.translate-x-1 { transform: translateX(4px); }
.translate-x-2 { transform: translateX(8px); }
.-translate-x-1 { transform: translateX(-4px); }
.-translate-x-2 { transform: translateX(-8px); }

.scale-100 { transform: scale(1); }
.scale-102 { transform: scale(1.02); }
.scale-105 { transform: scale(1.05); }
.scale-98 { transform: scale(0.98); }
.scale-95 { transform: scale(0.95); }

/* GPU-optimized opacity utilities */
.opacity-0 { opacity: 0; }
.opacity-50 { opacity: 0.5; }
.opacity-70 { opacity: 0.7; }
.opacity-80 { opacity: 0.8; }
.opacity-90 { opacity: 0.9; }
.opacity-100 { opacity: 1; }

/* Combined GPU-optimized transforms */
.lift-sm {
  transform: translateY(-2px);
}

.lift-md {
  transform: translateY(-4px);
}

.lift-lg {
  transform: translateY(-8px);
}

/* GPU-optimized card hover pattern - no layout shift */
.card-hover-gpu {
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter),
              box-shadow var(--duration-normal) var(--ease-enter);
}

.card-hover-gpu:hover {
  transform: translateY(-4px);
  box-shadow: var(--vp-shadow-hover);
}

/* GPU-optimized button press pattern */
.button-press-gpu {
  transition: transform var(--duration-fast) var(--ease-spring);
}

.button-press-gpu:active {
  transform: scale(0.98);
}

/* GPU-optimized fade transitions */
.fade-enter-gpu {
  opacity: 0;
  transform: translateY(8px);
}

.fade-enter-active-gpu {
  opacity: 1;
  transform: translateY(0);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.fade-exit-gpu {
  opacity: 1;
  transform: translateY(0);
}

.fade-exit-active-gpu {
  opacity: 0;
  transform: translateY(-8px);
  transition: transform var(--duration-normal) var(--ease-exit),
              opacity var(--duration-normal) var(--ease-exit);
}

/* Containment for isolated animations - improves performance */
.animation-contained {
  contain: layout style paint;
}

/* Layer promotion for complex animations */
.animation-layer {
  isolation: isolate;
  transform: translateZ(0);
}

/* ============================================
   Viewport Entrance Animations (Requirement 9.7, 9.8)
   Subtle fade-in effects for elements entering viewport
   Consistent timing across similar interaction types
   ============================================ */

/* Base state for viewport-triggered animations - hidden initially */
.viewport-animate {
  opacity: 0;
  transform: translateY(16px);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

/* Visible state - triggered when element enters viewport */
.viewport-animate.is-visible,
.viewport-animate[data-visible="true"] {
  opacity: 1;
  transform: translateY(0);
}

/* Viewport animation variants */
.viewport-fade {
  opacity: 0;
  transition: opacity var(--duration-normal) var(--ease-enter);
}

.viewport-fade.is-visible {
  opacity: 1;
}

.viewport-fade-up {
  opacity: 0;
  transform: translateY(24px);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-fade-up.is-visible {
  opacity: 1;
  transform: translateY(0);
}

.viewport-fade-down {
  opacity: 0;
  transform: translateY(-24px);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-fade-down.is-visible {
  opacity: 1;
  transform: translateY(0);
}

.viewport-fade-left {
  opacity: 0;
  transform: translateX(-24px);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-fade-left.is-visible {
  opacity: 1;
  transform: translateX(0);
}

.viewport-fade-right {
  opacity: 0;
  transform: translateX(24px);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-fade-right.is-visible {
  opacity: 1;
  transform: translateX(0);
}

.viewport-scale {
  opacity: 0;
  transform: scale(0.95);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-scale.is-visible {
  opacity: 1;
  transform: scale(1);
}

.viewport-scale-spring {
  opacity: 0;
  transform: scale(0.9);
  transition: transform var(--duration-slow) var(--ease-spring),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-scale-spring.is-visible {
  opacity: 1;
  transform: scale(1);
}

/* Staggered viewport animations - consistent timing (Requirement 9.8) */
.viewport-stagger > * {
  opacity: 0;
  transform: translateY(16px);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-stagger.is-visible > *:nth-child(1) { transition-delay: 0ms; opacity: 1; transform: translateY(0); }
.viewport-stagger.is-visible > *:nth-child(2) { transition-delay: 50ms; opacity: 1; transform: translateY(0); }
.viewport-stagger.is-visible > *:nth-child(3) { transition-delay: 100ms; opacity: 1; transform: translateY(0); }
.viewport-stagger.is-visible > *:nth-child(4) { transition-delay: 150ms; opacity: 1; transform: translateY(0); }
.viewport-stagger.is-visible > *:nth-child(5) { transition-delay: 200ms; opacity: 1; transform: translateY(0); }
.viewport-stagger.is-visible > *:nth-child(6) { transition-delay: 250ms; opacity: 1; transform: translateY(0); }
.viewport-stagger.is-visible > *:nth-child(7) { transition-delay: 300ms; opacity: 1; transform: translateY(0); }
.viewport-stagger.is-visible > *:nth-child(8) { transition-delay: 350ms; opacity: 1; transform: translateY(0); }

/* Card grid stagger animation */
.viewport-stagger-cards {
  display: grid;
}

.viewport-stagger-cards > * {
  opacity: 0;
  transform: translateY(20px);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-stagger-cards.is-visible > *:nth-child(1) { transition-delay: 0ms; opacity: 1; transform: translateY(0); }
.viewport-stagger-cards.is-visible > *:nth-child(2) { transition-delay: 75ms; opacity: 1; transform: translateY(0); }
.viewport-stagger-cards.is-visible > *:nth-child(3) { transition-delay: 150ms; opacity: 1; transform: translateY(0); }
.viewport-stagger-cards.is-visible > *:nth-child(4) { transition-delay: 225ms; opacity: 1; transform: translateY(0); }
.viewport-stagger-cards.is-visible > *:nth-child(5) { transition-delay: 300ms; opacity: 1; transform: translateY(0); }
.viewport-stagger-cards.is-visible > *:nth-child(6) { transition-delay: 375ms; opacity: 1; transform: translateY(0); }

/* List item stagger animation */
.viewport-stagger-list > * {
  opacity: 0;
  transform: translateX(-12px);
  transition: transform var(--duration-fast) var(--ease-enter),
              opacity var(--duration-fast) var(--ease-enter);
}

.viewport-stagger-list.is-visible > *:nth-child(1) { transition-delay: 0ms; opacity: 1; transform: translateX(0); }
.viewport-stagger-list.is-visible > *:nth-child(2) { transition-delay: 30ms; opacity: 1; transform: translateX(0); }
.viewport-stagger-list.is-visible > *:nth-child(3) { transition-delay: 60ms; opacity: 1; transform: translateX(0); }
.viewport-stagger-list.is-visible > *:nth-child(4) { transition-delay: 90ms; opacity: 1; transform: translateX(0); }
.viewport-stagger-list.is-visible > *:nth-child(5) { transition-delay: 120ms; opacity: 1; transform: translateX(0); }
.viewport-stagger-list.is-visible > *:nth-child(6) { transition-delay: 150ms; opacity: 1; transform: translateX(0); }
.viewport-stagger-list.is-visible > *:nth-child(7) { transition-delay: 180ms; opacity: 1; transform: translateX(0); }
.viewport-stagger-list.is-visible > *:nth-child(8) { transition-delay: 210ms; opacity: 1; transform: translateX(0); }

/* Hero section entrance animation */
.viewport-hero {
  opacity: 0;
  transform: translateY(32px);
  transition: transform var(--duration-slow) var(--ease-enter),
              opacity var(--duration-slow) var(--ease-enter);
}

.viewport-hero.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Section entrance animation */
.viewport-section {
  opacity: 0;
  transform: translateY(24px);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-section.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Subtle entrance for content blocks */
.viewport-content {
  opacity: 0;
  transform: translateY(12px);
  transition: transform var(--duration-fast) var(--ease-enter),
              opacity var(--duration-fast) var(--ease-enter);
}

.viewport-content.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Image reveal animation */
.viewport-image {
  opacity: 0;
  transform: scale(0.98);
  transition: transform var(--duration-normal) var(--ease-enter),
              opacity var(--duration-normal) var(--ease-enter);
}

.viewport-image.is-visible {
  opacity: 1;
  transform: scale(1);
}

/* Code block entrance */
.viewport-code {
  opacity: 0;
  transform: translateY(8px);
  transition: transform var(--duration-fast) var(--ease-enter),
              opacity var(--duration-fast) var(--ease-enter);
}

.viewport-code.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Reduced motion: disable viewport animations */
@media (prefers-reduced-motion: reduce) {
  .viewport-animate,
  .viewport-fade,
  .viewport-fade-up,
  .viewport-fade-down,
  .viewport-fade-left,
  .viewport-fade-right,
  .viewport-scale,
  .viewport-scale-spring,
  .viewport-hero,
  .viewport-section,
  .viewport-content,
  .viewport-image,
  .viewport-code,
  .viewport-stagger > *,
  .viewport-stagger-cards > *,
  .viewport-stagger-list > * {
    opacity: 1;
    transform: none;
    transition: none;
  }
}

/* ============================================
   减少动画偏好支持 (Requirement 9.4)
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  /* Disable all animations and transitions globally */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  /* Reset entrance animations to visible state */
  .animate-fade-in,
  .animate-fade-in-up,
  .animate-fade-in-down,
  .animate-slide-in-left,
  .animate-slide-in-right,
  .animate-scale-in,
  .animate-scale-in-spring,
  .animate-blur-in,
  .animate-fade-out,
  .animate-blur-out {
    animation: none;
    opacity: 1;
    transform: none;
    filter: none;
  }
  
  /* Disable hover transforms but keep visual feedback */
  .hover-lift:hover,
  .hover-scale:hover,
  .hover-lift-glow:hover,
  .interactive:hover,
  .card-hover-gpu:hover,
  .button-press-gpu:active {
    transform: none;
  }
  
  /* Keep color changes for hover feedback */
  .hover-color {
    transition: color 0.01ms, background-color 0.01ms, border-color 0.01ms;
  }
  
  /* Disable continuous animations */
  .animate-pulse,
  .animate-pulse-soft,
  .animate-float,
  .animate-bounce,
  .animate-glow,
  .animate-glow-soft,
  .animate-skeleton {
    animation: none;
  }
  
  /* Keep spinner for loading states but make it instant */
  .animate-spin {
    animation: spin 0.01ms linear infinite;
  }
  
  /* Disable GPU-accelerated transitions */
  .transition-gpu,
  .transition-gpu-fast,
  .transition-gpu-slow,
  .gpu-accelerated,
  .gpu-accelerated-temp {
    transition: none;
    will-change: auto;
  }
  
  /* Disable fade transitions */
  .fade-enter-gpu,
  .fade-enter-active-gpu,
  .fade-exit-gpu,
  .fade-exit-active-gpu {
    transition: none;
    opacity: 1;
    transform: none;
  }
}