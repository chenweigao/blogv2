:root {
  --motion-duration-short: 150ms;
  --motion-duration-medium: 250ms;
  --motion-duration-long: 400ms;
  --motion-ease-standard: cubic-bezier(0.2, 0, 0, 1);
  --motion-ease-emphasized: cubic-bezier(0.32, 0, 0.67, 0);
  --motion-duration-xshort: 100ms;
  --motion-ease-decelerate: cubic-bezier(0.05, 0.7, 0.1, 1);
  --motion-ease-accelerate: cubic-bezier(0.3, 0, 0.8, 0.15);
  --motion-shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.12);
  --motion-shadow-medium: 0 6px 20px rgba(0, 0, 0, 0.14);
  --motion-lift-1: 3px;
  --motion-lift-2: 4px;
  --motion-scale-hover: 1.02;
  --title-rise-distance: 14px;
  --title-scale-start: 0.988;
  --title-underline-thickness: 4px;
  --title-underline-delay: 140ms;
  --title-motion-duration: var(--motion-duration-medium);
  --motion-shadow-strong: 0 10px 32px rgba(0, 0, 0, 0.20);
  --motion-ease-spring: cubic-bezier(0.2, 0.7, 0, 1); /* 轻微弹性 */
  --motion-ease-spring-strong: cubic-bezier(0.25, 0.8, 0, 1); /* 更明显弹性 */
  --tilt-3d-perspective: 800px;
  --tilt-3d-rotate: 0.6deg;
  --tilt-3d-translate-z: 4px;
}

/* Utility for GPU compositing on common animated properties */
.will-change-opacity-transform {
  will-change: opacity, transform;
}

/* Global reduced motion support */
@media (prefers-reduced-motion: reduce) {
  /* Disable animations and minimize transition durations globally */
  * {
    animation: none !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// 通用过渡工具类
.motion-transition-standard {
  transition: opacity var(--motion-duration-medium) var(--motion-ease-standard),
              transform var(--motion-duration-medium) var(--motion-ease-standard);
  will-change: opacity, transform;
}

// 悬浮微动与柔和阴影
.effect-elevate {
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate);
  will-change: transform, box-shadow;
}
.effect-elevate:hover {
  transform: translateY(-2px);
  box-shadow: var(--motion-shadow-soft);
}

// 悬浮强抬升与阴影（使用 --motion-shadow-strong）
.effect-elevate-strong {
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate);
}
.effect-elevate-strong:hover {
  transform: translateY(-2px);
  box-shadow: var(--motion-shadow-strong);
  will-change: transform, box-shadow;
}
@media (prefers-reduced-motion: reduce) {
  .effect-elevate-strong,
  .effect-elevate-strong:hover {
    transition-duration: 0.01ms !important;
    transform: none !important;
    box-shadow: none !important;
  }
}

// 渐入动效
@keyframes fadeInScale {
  0%   { opacity: 0; transform: scale(0.98); }
  60%  { opacity: 0.85; transform: scale(1.005); }
  100% { opacity: 1; transform: scale(1); }
}
.effect-fade-in {
  animation: fadeInScale var(--motion-duration-medium) var(--motion-ease-spring) both;
}

// 上移渐入
@keyframes riseInPlus {
  0%   { opacity: 0; transform: translateY(8px); }
  60%  { opacity: 0.95; transform: translateY(-1px); }
  100% { opacity: 1; transform: translateY(0); }
}
.effect-rise-in {
  animation: riseInPlus var(--motion-duration-medium) var(--motion-ease-spring) both;
}

// reduced motion 优雅降级
@media (prefers-reduced-motion: reduce) {
  .effect-elevate:hover {
    transform: none;
    box-shadow: none;
  }
}

// 导航：灵动微动与滑动下划线
.navbar a,
.navbar .navbar-item {
  transition: color var(--motion-duration-short) var(--motion-ease-standard),
              transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate);
  position: relative;
}

.navbar a:hover,
.navbar .navbar-item:hover {
  transform: translateY(-1px);
  box-shadow: var(--motion-shadow-soft);
  will-change: transform, box-shadow;
}

.navbar a::after,
.navbar .navbar-item::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 100%;
  height: 2px;
  background: var(--interactive-accent, #409EFF);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform var(--motion-duration-short) var(--motion-ease-accelerate);
}

.navbar a:hover::after,
.navbar .navbar-item:hover::after,
.navbar a[aria-current="page"]::after {
  transform: scaleX(1);
}

.navbar a:focus-visible,
.navbar .navbar-item:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
  box-shadow: none;
}

@media (prefers-reduced-motion: reduce) {
  .navbar a:hover,
  .navbar .navbar-item:hover {
    transform: none;
    box-shadow: none;
  }
}

// 侧边栏：链接与标题的灵动与降级
.sidebar a,
.sidebar-link {
  transition: background-color var(--motion-duration-short) var(--motion-ease-standard),
              color var(--motion-duration-short) var(--motion-ease-standard),
              transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate);
}

.sidebar a:hover,
.sidebar-link:hover {
  transform: translateY(-1px);
  box-shadow: var(--motion-shadow-soft);
  will-change: transform, box-shadow;
}

.sidebar .sidebar-heading,
.sidebar-heading,
.sidebar-title {
  transition: color var(--motion-duration-short) var(--motion-ease-standard),
              letter-spacing var(--motion-duration-xshort) var(--motion-ease-decelerate);
}

.sidebar .sidebar-heading:hover,
.sidebar-heading:hover,
.sidebar-title:hover {
  color: var(--interactive-accent, #409EFF);
  letter-spacing: 0.2px;
}

.sidebar a:focus-visible,
.sidebar-link:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
  box-shadow: none;
}

@media (prefers-reduced-motion: reduce) {
  .sidebar a:hover,
  .sidebar-link:hover,
  .sidebar .sidebar-heading:hover,
  .sidebar-heading:hover,
  .sidebar-title:hover {
    transform: none;
    box-shadow: none;
    letter-spacing: normal;
  }
}

// 标题：轻柔入场与可访问性
.theme-container h1,
.theme-container h2,
.theme-container h3 {
  animation: riseInTitle var(--motion-duration-medium) var(--motion-ease-emphasized) both;
  view-transition-name: page-title;
}
.theme-container h2 { animation-delay: 40ms; }
.theme-container h3 { animation-delay: 60ms; }

// 标题动效强度变量（可调）
:root {
  --title-rise-distance: 14px;
  --title-scale-start: 0.988;
  --title-underline-thickness: 4px;
  --title-underline-delay: 140ms;
  --title-motion-duration: var(--motion-duration-medium);
}

// 更“灵动”的主标题入场与滑动下划线
@keyframes underlineIn {
  from { transform: scaleX(0); }
  to   { transform: scaleX(1); }
}
.theme-container h1 {
  position: relative;
  animation: riseInTitle var(--title-motion-duration) var(--motion-ease-emphasized) both;
  will-change: transform, opacity;
}
.theme-container h1::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -4px;
  width: 100%;
  height: var(--title-underline-thickness);
  background: var(--interactive-accent, #409EFF);
  transform: scaleX(0);
  transform-origin: left;
  animation: underlineIn var(--motion-duration-short) var(--motion-ease-accelerate) both;
  animation-delay: var(--title-underline-delay);
}

// 使用变量增强 riseInTitle
@keyframes riseInTitle {
  0%   { opacity: 0; transform: translateY(var(--title-rise-distance)) scale(var(--title-scale-start)); }
  70%  { opacity: 1; transform: translateY(calc(var(--title-rise-distance) * -0.08)) scale(1.005); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

// 章节标题滚动入场（通过 .inview 类触发）
@keyframes riseInHeading {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
.theme-container .content__default h2.inview,
.theme-container .content__default h3.inview {
  animation: riseInHeading var(--motion-duration-medium) var(--motion-ease-emphasized) both;
  will-change: transform, opacity;
}

// reduced-motion：禁用新增标题动效
@media (prefers-reduced-motion: reduce) {
  .theme-container h1 {
    animation: none !important;
  }
  .theme-container h1::after {
    animation: none !important;
    transform: none !important;
  }
  .theme-container .content__default h2.inview,
  .theme-container .content__default h3.inview {
    animation: none !important;
  }
}

// 更“灵动”的强度覆盖（变量后置覆盖）
:root {
  --motion-lift-1: 3px;
  --motion-lift-2: 4px;
  --motion-scale-hover: 1.02;
}

// 深化页面级过渡：为封面与章节标题定义命名视图过渡
@supports (view-transition-name: none) {
  // 文章封面（hero）视图过渡
  ::view-transition-old(hero),
  ::view-transition-new(hero) {
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-decelerate);
  }
  // 章节标题视图过渡
  ::view-transition-old(section-title),
  ::view-transition-new(section-title) {
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-emphasized);
  }
}
// 给可能的封面元素指定视图过渡名称（多选择器兼容不同主题）
.theme-container .hero,
.theme-container .page .hero,
.theme-container .hero img {
  view-transition-name: hero;
}
// 为章节标题指定视图过渡名称
.theme-container h2,
.theme-container h3 {
  view-transition-name: section-title;
}

// 更“灵动”的标题入场覆盖（最后优先）
@keyframes riseInTitle {
  from { opacity: 0; transform: translateY(8px) scale(0.995); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
.theme-container h1 {
  animation: riseInTitle var(--motion-duration-medium) var(--motion-ease-emphasized) both;
  view-transition-name: page-title;
}
.theme-container h2 {
  animation: riseInTitle var(--motion-duration-medium) var(--motion-ease-emphasized) both;
  animation-delay: 40ms;
}
.theme-container h3 {
  animation: riseInTitle var(--motion-duration-medium) var(--motion-ease-emphasized) both;
  animation-delay: 60ms;
}

// 内容模块交错入场（首屏层次增强）
@keyframes riseInSection {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
.theme-container .content__default > * {
  animation: riseInSection var(--motion-duration-medium) var(--motion-ease-emphasized) both;
}
.theme-container .content__default > *:nth-child(1) { animation-delay: 40ms; }
.theme-container .content__default > *:nth-child(2) { animation-delay: 80ms; }
.theme-container .content__default > *:nth-child(3) { animation-delay: 120ms; }
.theme-container .content__default > *:nth-child(4) { animation-delay: 160ms; }
.theme-container .content__default > *:nth-child(5) { animation-delay: 200ms; }
.theme-container .content__default > *:nth-child(6) { animation-delay: 240ms; }

// Reduced Motion 降级（统一禁用新增动画）
@media (prefers-reduced-motion: reduce) {
  .theme-container .hero,
  .theme-container .page .hero,
  .theme-container .hero img {
    /* 视图过渡在 JS 层已降级，此处无需额外处理 */
  }
  .theme-container h1,
  .theme-container h2,
  .theme-container h3 {
    animation: none !important;
  }
  .theme-container .content__default > * {
    animation: none !important;
  }
}

// View Transitions：明确动画名与关键帧
@supports (view-transition-name: none) {
  // 根页面切换使用柔和淡入淡出
  @keyframes vtFadeOut {
    from { opacity: 1; }
    to   { opacity: 0; }
  }
  @keyframes vtFadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }
  ::view-transition-old(root) {
    animation-name: vtFadeOut;
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-decelerate);
  }
  ::view-transition-new(root) {
    animation-name: vtFadeIn;
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-decelerate);
  }

  // 标题切换使用轻微上移与缩放
  @keyframes vtTitleOut {
    from { opacity: 1; transform: translateY(0) scale(1); }
    to   { opacity: 0; transform: translateY(-6px) scale(0.995); }
  }
  @keyframes vtTitleIn {
    from { opacity: 0; transform: translateY(6px) scale(0.995); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }
  ::view-transition-old(page-title) {
    animation-name: vtTitleOut;
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-emphasized);
  }
  ::view-transition-new(page-title) {
    animation-name: vtTitleIn;
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-emphasized);
  }

  // 标题锚点跳转高亮（无 JS）
  .theme-container .content__default h2,
  .theme-container .content__default h3 {
    position: relative;
  }
  .theme-container .content__default h2::after,
  .theme-container .content__default h3::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -3px;
    width: 100%;
    height: 3px;
    background: var(--interactive-accent, #409EFF);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform var(--motion-duration-short) var(--motion-ease-accelerate);
  }
  .theme-container .content__default h2:target::after,
  .theme-container .content__default h3:target::after {
    transform: scaleX(1);
  }

  @media (prefers-reduced-motion: reduce) {
    .theme-container .content__default h2::after,
    .theme-container .content__default h3::after {
      transition: none;
    }
  }

  // 内容模块：figure 的微动与可访问性
  .theme-container .content__default figure {
    transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
                box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate);
  }
  .theme-container .content__default figure:hover {
    transform: translateY(calc(-1 * var(--motion-lift-1)));
    box-shadow: var(--motion-shadow-soft);
    will-change: transform, box-shadow;
  }
  .theme-container .content__default figure:focus-visible {
    outline: 2px solid var(--interactive-accent, #409EFF);
    outline-offset: 2px;
    transform: none;
    box-shadow: none;
  }

  @media (prefers-reduced-motion: reduce) {
    .theme-container .content__default figure {
      transition-duration: 0.01ms !important;
    }
    .theme-container .content__default figure:hover {
      transform: none;
      box-shadow: none;
    }
  }

  // View Transitions：为 hero 指定动画名与关键帧
  @keyframes vtHeroOut {
    from { opacity: 1; transform: scale(1); }
    to   { opacity: 0; transform: scale(0.995); }
  }
  @keyframes vtHeroIn {
    from { opacity: 0; transform: scale(0.995); }
    to   { opacity: 1; transform: scale(1); }
  }
  ::view-transition-old(hero) {
    animation-name: vtHeroOut;
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-decelerate);
  }
  ::view-transition-new(hero) {
    animation-name: vtHeroIn;
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-decelerate);
  }

  // View Transitions：为 title-text 指定动画名与关键帧
  @keyframes vtTitleTextOut {
    from { opacity: 1; transform: translateY(0) scale(1); }
    to   { opacity: 0; transform: translateY(-6px) scale(0.99); }
  }
  @keyframes vtTitleTextIn {
    from { opacity: 0; transform: translateY(6px) scale(0.99); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }
  ::view-transition-old(title-text) {
    animation-name: vtTitleTextOut;
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-emphasized);
  }
  ::view-transition-new(title-text) {
    animation-name: vtTitleTextIn;
    animation-duration: var(--motion-duration-long);
    animation-timing-function: var(--motion-ease-emphasized);
  }
}

// 页面切换：响应式距离与时长变量
:root {
  --pt-slide-distance: clamp(12px, 2.2vw, 24px);
}
@media (max-width: 640px) {
  :root { --pt-slide-distance: clamp(10px, 3vw, 18px); }
}
@media (min-width: 1280px) {
  :root { --pt-slide-distance: clamp(16px, 1.8vw, 32px); }
}

// View Transitions 根过渡（基于 [data-pt] 与 [data-nav]）
@keyframes vtFadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes vtFadeOut { from { opacity: 1; } to { opacity: 0; } }
@keyframes vtSlideInLeft  { from { opacity: 0; transform: translateX(calc(-1 * var(--pt-slide-distance))); } to { opacity: 1; transform: translateX(0); } }
@keyframes vtSlideOutLeft { from { opacity: 1; transform: translateX(0); } to { opacity: 0; transform: translateX(calc(-1 * var(--pt-slide-distance))); } }
@keyframes vtSlideInRight { from { opacity: 0; transform: translateX(var(--pt-slide-distance)); } to { opacity: 1; transform: translateX(0); } }
@keyframes vtSlideOutRight{ from { opacity: 1; transform: translateX(0); } to { opacity: 0; transform: translateX(var(--pt-slide-distance)); } }
@keyframes vtZoomIn  { from { opacity: 0; transform: scale(0.985); } 50% { opacity: 0.9; transform: scale(1.01); } to { opacity: 1; transform: scale(1); } }
@keyframes vtZoomOut { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.985); } }

/* fade 类型 */
:root[data-pt="fade"]::view-transition-new(root) { animation: vtFadeIn var(--motion-duration-medium) var(--motion-ease-spring) both; }
:root[data-pt="fade"]::view-transition-old(root) { animation: vtFadeOut var(--motion-duration-medium) var(--motion-ease-decelerate) both; }

/* slide 类型：依据导航方向决定左右 */
:root[data-pt="slide"][data-nav="forward"]::view-transition-new(root) { animation: vtSlideInRight var(--motion-duration-medium) var(--motion-ease-spring) both; }
:root[data-pt="slide"][data-nav="forward"]::view-transition-old(root) { animation: vtSlideOutLeft var(--motion-duration-medium) var(--motion-ease-decelerate) both; }
:root[data-pt="slide"][data-nav="backward"]::view-transition-new(root) { animation: vtSlideInLeft var(--motion-duration-medium) var(--motion-ease-spring) both; }
:root[data-pt="slide"][data-nav="backward"]::view-transition-old(root) { animation: vtSlideOutRight var(--motion-duration-medium) var(--motion-ease-decelerate) both; }

/* zoom 类型 */
:root[data-pt="zoom"]::view-transition-new(root) { animation: vtZoomIn var(--motion-duration-medium) var(--motion-ease-spring) both; }
:root[data-pt="zoom"]::view-transition-old(root) { animation: vtZoomOut var(--motion-duration-medium) var(--motion-ease-decelerate) both; }

/* 共享元素示例：页面标题的命名过渡（可选，按需应用到具体元素） */
.page-title { view-transition-name: page-title; }
@keyframes vtTitleIn { from { opacity: 0; transform: translateY(8px) scale(0.99); } 60% { opacity: 0.95; transform: translateY(-1px) scale(1.005); } to { opacity: 1; transform: translateY(0) scale(1); } }
@keyframes vtTitleOut{ from { opacity: 1; transform: translateY(0) scale(1); } to { opacity: 0; transform: translateY(6px) scale(0.99); } }
:root::view-transition-new(page-title) { animation: vtTitleIn var(--motion-duration-medium) var(--motion-ease-spring) both; }
:root::view-transition-old(page-title) { animation: vtTitleOut var(--motion-duration-medium) var(--motion-ease-decelerate) both; }

/* Reduced Motion：禁用根过渡动画 */
@media (prefers-reduced-motion: reduce) {
  :root::view-transition-new(root),
  :root::view-transition-old(root),
  :root::view-transition-new(page-title),
  :root::view-transition-old(page-title) {
    animation: none !important;
  }
}

/* 无视图过渡支持时的 CSS 后备：.theme-container 的入/离场类 */
.theme-container.page-leave,
.theme-container.page-enter {
  transition: transform var(--motion-duration-medium) var(--motion-ease-decelerate),
              opacity var(--motion-duration-medium) var(--motion-ease-decelerate);
}

/* slide 后备：方向根据 [data-nav] */
.theme-container.page-leave[data-pt="slide"][data-nav="forward"] {
  transform: translateX(calc(-1 * var(--pt-slide-distance)));
  opacity: 0;
  will-change: transform, opacity;
}
.theme-container.page-enter[data-pt="slide"][data-nav="forward"] {
  transform: translateX(0);
  opacity: 1;
}

.theme-container.page-leave[data-pt="slide"][data-nav="backward"] {
  transform: translateX(var(--pt-slide-distance));
  opacity: 0;
  will-change: transform, opacity;
}
.theme-container.page-enter[data-pt="slide"][data-nav="backward"] {
  transform: translateX(0);
  opacity: 1;
}

/* fade 后备 */
.theme-container.page-leave[data-pt="fade"] { opacity: 0; will-change: opacity; }
.theme-container.page-enter[data-pt="fade"] { opacity: 1; }

/* zoom 后备 */
.theme-container.page-leave[data-pt="zoom"] {
  transform: scale(0.985);
  opacity: 0;
  will-change: transform, opacity;
}
.theme-container.page-enter[data-pt="zoom"] {
  transform: scale(1);
  opacity: 1;
}

/* Reduced Motion：禁用后备动画 */
@media (prefers-reduced-motion: reduce) {
  .theme-container.page-leave,
  .theme-container.page-enter {
    transition: none !important;
    transform: none !important;
    opacity: 1 !important;
  }
}

// 标题锚点：悬浮淡入与轻微上移、可访问性
.theme-container .content__default .header-anchor {
  opacity: 0;
  transition: opacity var(--motion-duration-short) var(--motion-ease-standard),
              transform var(--motion-duration-xshort) var(--motion-ease-decelerate);
}
.theme-container .content__default h1:hover .header-anchor,
.theme-container .content__default h2:hover .header-anchor,
.theme-container .content__default h3:hover .header-anchor,
.theme-container .content__default h4:hover .header-anchor,
.theme-container .content__default h5:hover .header-anchor,
.theme-container .content__default h6:hover .header-anchor {
  opacity: 1;
  transform: translateY(-1px);
  will-change: transform, opacity;
}
.theme-container .content__default .header-anchor:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  opacity: 1;
  transform: none;
}

// 代码块高亮行：柔和背景与阴影过渡
.theme-container pre .highlighted,
.theme-container pre .line-highlight,
pre .highlighted,
pre .line-highlight {
  transition: background-color var(--motion-duration-short) var(--motion-ease-standard),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate);
  background-color: color-mix(in srgb, currentColor 10%, transparent);
}
.theme-container pre .highlighted:hover,
.theme-container pre .line-highlight:hover,
pre .highlighted:hover,
pre .line-highlight:hover {
  box-shadow: var(--motion-shadow-soft);
}

// Reduced Motion：禁用新增 transform 与缩短过渡
@media (prefers-reduced-motion: reduce) {
  .theme-container .content__default .header-anchor {
    transition-duration: 0.01ms !important;
  }
  .theme-container .content__default h1:hover .header-anchor,
  .theme-container .content__default h2:hover .header-anchor,
  .theme-container .content__default h3:hover .header-anchor,
  .theme-container .content__default h4:hover .header-anchor,
  .theme-container .content__default h5:hover .header-anchor,
  .theme-container .content__default h6:hover .header-anchor {
    transform: none !important;
  }
  .theme-container pre .highlighted,
  .theme-container pre .line-highlight,
  pre .highlighted,
  pre .line-highlight {
    transition-duration: 0.01ms !important;
    box-shadow: none !important;
  }
}

// 标签与分类（chips）
.theme-container .tags a,
.theme-container .tag,
.theme-container .category a {
  display: inline-block;
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate),
              background-color var(--motion-duration-short) var(--motion-ease-standard),
              color var(--motion-duration-short) var(--motion-ease-standard);
}
.theme-container .tags a:hover,
.theme-container .tag:hover,
.theme-container .category a:hover {
  transform: translateY(calc(-1 * var(--motion-lift-1)));
  box-shadow: var(--motion-shadow-soft);
  will-change: transform, box-shadow;
}
.theme-container .tags a:focus-visible,
.theme-container .tag:focus-visible,
.theme-container .category a:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
  box-shadow: none;
}

// 分页（普适选择器，覆盖不同主题）
.theme-container .pagination,
.pagination {
  --_pg-ease: var(--motion-ease-decelerate);
}
.theme-container .pagination a,
.theme-container .pagination .page-number,
.theme-container .pagination .pager,
.pagination a,
.pagination .page-number,
.pagination .pager {
  transition: background-color var(--motion-duration-short) var(--motion-ease-standard),
              color var(--motion-duration-short) var(--motion-ease-standard),
              transform var(--motion-duration-xshort) var(_pg-ease),
              box-shadow var(--motion-duration-medium) var(_pg-ease);
}
.theme-container .pagination a:hover,
.theme-container .pagination .page-number:hover,
.theme-container .pagination .pager:hover,
.pagination a:hover,
.pagination .page-number:hover,
.pagination .pager:hover {
  transform: translateY(calc(-1 * var(--motion-lift-1)));
  box-shadow: var(--motion-shadow-soft);
  will-change: transform, box-shadow;
}
.theme-container .pagination a:focus-visible,
.theme-container .pagination .page-number:focus-visible,
.theme-container .pagination .pager:focus-visible,
.pagination a:focus-visible,
.pagination .page-number:focus-visible,
.pagination .pager:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
  box-shadow: none;
}

// 返回顶部按钮
.back-to-top {
  transition: opacity var(--motion-duration-short) var(--motion-ease-standard),
              transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate);
  transform: translateY(4px);
  opacity: 0;
}
.back-to-top.is-visible {
  transform: translateY(0);
  opacity: 1;
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              opacity var(--motion-duration-short) var(--motion-ease-standard);
  will-change: transform, opacity;
}
.back-to-top:hover {
  transform: translateY(calc(-1 * var(--motion-lift-2)));
  box-shadow: var(--motion-shadow-soft);
  opacity: 1;
  will-change: transform, box-shadow, opacity;
}
.back-to-top:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
  box-shadow: none;
}

// 代码复制按钮（兼容多种常见命名）
pre .copy,
pre .copy-code,
pre .code-copy,
.copy-code-button,
[class*="copy"] .copy-button {
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate),
              background-color var(--motion-duration-short) var(--motion-ease-standard);
}
pre .copy:hover,
pre .copy-code:hover,
pre .code-copy:hover,
.copy-code-button:hover,
[class*="copy"] .copy-button:hover {
  transform: translateY(-1px);
  box-shadow: var(--motion-shadow-soft);
  will-change: transform, box-shadow;
}
pre .copy:focus-visible,
pre .copy-code:focus-visible,
pre .code-copy:focus-visible,
.copy-code-button:focus-visible,
[class*="copy"] .copy-button:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
  box-shadow: none;
}

// 表格行 hover 高亮与过渡
.theme-container .content__default table tr {
  transition: background-color var(--motion-duration-short) var(--motion-ease-standard);
}
.theme-container .content__default table tr:hover {
  background-color: var(--background-modifier-hover, rgba(0,0,0,0.04));
}

// 表单控件：输入/选择/文本域的聚焦动效
.theme-container input,
.theme-container select,
.theme-container textarea {
  transition: border-color var(--motion-duration-short) var(--motion-ease-standard),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate),
              background-color var(--motion-duration-short) var(--motion-ease-standard);
}
.theme-container input:focus,
.theme-container select:focus,
.theme-container textarea:focus {
  border-color: var(--interactive-accent, #409EFF);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--interactive-accent, #409EFF) 24%, transparent);
}

// Reduced Motion 降级：统一禁用新增的 transform/box-shadow 动效
@media (prefers-reduced-motion: reduce) {
  .theme-container .header-anchor,
  .theme-container .tags a,
  .theme-container .tag,
  .theme-container .category a,
  .theme-container .pagination a,
  .theme-container .pagination .page-number,
  .theme-container .pagination .pager,
  .pagination a,
  .pagination .page-number,
  .pagination .pager,
  .back-to-top,
  pre .copy,
  pre .copy-code,
  pre .code-copy,
  .copy-code-button,
  [class*="copy"] .copy-button {
    transition-duration: 0.01ms !important;
  }
  .theme-container .tags a:hover,
  .theme-container .tag:hover,
  .theme-container .category a:hover,
  .theme-container .pagination a:hover,
  .theme-container .pagination .page-number:hover,
  .theme-container .pagination .pager:hover,
  .pagination a:hover,
  .pagination .page-number:hover,
  .pagination .pager:hover,
  .back-to-top:hover,
  pre .copy:hover,
  pre .copy-code:hover,
  pre .code-copy:hover,
  .copy-code-button:hover,
  [class*="copy"] .copy-button:hover {
    transform: none;
    box-shadow: none;
  }
}

// 按钮：悬浮微动与阴影（覆盖通用与常见类名）
.theme-container button,
.theme-container .button,
.theme-container .btn,
.vp-button {
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate),
              background-color var(--motion-duration-short) var(--motion-ease-standard),
              color var(--motion-duration-short) var(--motion-ease-standard),
              border-color var(--motion-duration-short) var(--motion-ease-standard);
}
.theme-container button:hover,
.theme-container .button:hover,
.theme-container .btn:hover,
.vp-button:hover {
  transform: translateY(calc(-1 * var(--motion-lift-1)));
  box-shadow: var(--motion-shadow-soft);
  will-change: transform, box-shadow;
}
.theme-container button:focus-visible,
.theme-container .button:focus-visible,
.theme-container .btn:focus-visible,
.vp-button:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
  box-shadow: none;
}

// 卡片：悬浮微动与阴影（覆盖常见卡片类）
.theme-container .card,
.theme-container .article-card,
.theme-container .post-card {
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate),
              background-color var(--motion-duration-short) var(--motion-ease-standard);
}
.theme-container .card:hover,
.theme-container .article-card:hover,
.theme-container .post-card:hover {
  transform: translateY(calc(-1 * var(--motion-lift-1)));
  box-shadow: var(--motion-shadow-soft);
  will-change: transform, box-shadow;
}
.theme-container .card:focus-visible,
.theme-container .article-card:focus-visible,
.theme-container .post-card:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
  box-shadow: none;
}

// 社交图标：悬浮微动与透明度提升
.theme-container .social-icons a,
.footer .social a {
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              opacity var(--motion-duration-short) var(--motion-ease-standard);
  opacity: 0.9;
}
.theme-container .social-icons a:hover,
.footer .social a:hover {
  transform: translateY(-1px);
  opacity: 1;
  will-change: transform, opacity;
}
.theme-container .social-icons a:focus-visible,
.footer .social a:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
  transform: none;
}

// 导航下拉项：轻微上移与阴影（兼容不同主题结构）
.navbar .dropdown a,
.navbar .dropdown-menu a,
.navbar .dropdown-item a {
  transition: transform var(--motion-duration-xshort) var(--motion-ease-decelerate),
              box-shadow var(--motion-duration-medium) var(--motion-ease-decelerate),
              background-color var(--motion-duration-short) var(--motion-ease-standard),
              color var(--motion-duration-short) var(--motion-ease-standard);
}
.navbar .dropdown a:hover,
.navbar .dropdown-menu a:hover,
.navbar .dropdown-item a:hover {
  transform: translateY(-1px);
  box-shadow: var(--motion-shadow-soft);
  will-change: transform, box-shadow;
}
.navbar .dropdown a:focus-visible,
.navbar .dropdown-menu a:focus-visible,
.navbar .dropdown-item a:focus-visible {
  outline: 2px solid var(--interactive-accent, #409EFF);
  outline-offset: 2px;
}

// Reduced Motion：统一为新增元素禁用 transform/box-shadow 动效
@media (prefers-reduced-motion: reduce) {
  .theme-container button,
  .theme-container .button,
  .theme-container .btn,
  .vp-button,
  .theme-container .card,
  .theme-container .article-card,
  .theme-container .post-card,
  .theme-container .social-icons a,
  .footer .social a,
  .navbar .dropdown a,
  .navbar .dropdown-menu a,
  .navbar .dropdown-item a {
    transition-duration: 0.01ms !important;
  }
  .theme-container button:hover,
  .theme-container .button:hover,
  .theme-container .btn:hover,
  .vp-button:hover,
  .theme-container .card:hover,
  .theme-container .article-card:hover,
  .theme-container .post-card:hover,
  .theme-container .social-icons a:hover,
  .footer .social a:hover,
  .navbar .dropdown a:hover,
  .navbar .dropdown-menu a:hover,
  .navbar .dropdown-item a:hover {
    transform: none;
    box-shadow: none;
  }
}

// 列表项/文章卡片：悬浮微动与阴影、与可访问性
.theme-container .