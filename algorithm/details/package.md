---
title:  Knapsack
Date: 2021-05-22
tag:
 - algorithm
 - dp
category:
 - Algorithm

---

## æ¦‚è§ˆ

èƒŒåŒ…é—®é¢˜å¯ä»¥å¤§è‡´åˆ†ä¸ºä¸‰ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼š

1. èƒŒåŒ…ç»„åˆé—®é¢˜
2. True/False é—®é¢˜
3. æœ€å¤§æœ€å°é—®é¢˜

å…¶åŸºç¡€çš„èƒŒåŒ…é—®é¢˜ä¸€èˆ¬ç”±ä¸¤ä¸ªæ¨¡å‹æ¼”å˜è€Œæ¥ï¼š

1. 0-1 èƒŒåŒ…é—®é¢˜
2. å®Œå…¨èƒŒåŒ…é—®é¢˜

æœ¬æ–‡å…ˆç ”ç©¶ 0-1 èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…ï¼Œè€Œåå¯¹å…¶ä»–é—®é¢˜è¿›è¡Œç ”ç©¶ã€‚

## ä¾‹é¢˜ç´¢å¼•

### 0-1 èƒŒåŒ…

| é—®é¢˜                                | ç±»å‹                   | é€’æ¨å…¬å¼                                  | å¤‡æ³¨     |
| ----------------------------------- | ---------------------- | ----------------------------------------- | -------- |
| ä¾‹é¢˜ LC474ï¼š1å’Œ0                    | 0-1 èƒŒåŒ…æœ€å¤§æœ€å°å€¼é—®é¢˜ | `dp[i] = max(dp[i], dp[i-num] + 1)`       | ä¸¤ä¸ªèƒŒåŒ… |
| ä¾‹é¢˜ LC416ï¼šåˆ†å‰²ç­‰å’Œå­é›†            | 0-1 èƒŒåŒ…True/Falseé—®é¢˜ | `dp[i] = dp[i] or dp[i - num]`            |          |
| ä¾‹é¢˜ LC494ï¼šç›®æ ‡å’Œ                  | 0-1 èƒŒåŒ…ç»„åˆé—®é¢˜       | `dp[i] += dp[i - num]`                    |          |
| ä¾‹é¢˜ LC1049ï¼šæœ€åä¸€å—çŸ³å¤´çš„é‡é‡ III | 0-1 èƒŒåŒ…æœ€å¤§æœ€å°å€¼é—®é¢˜ | `dp[i] = max(dp[i], dp[i-stone] + stone)` |          |

### å®Œå…¨èƒŒåŒ…

| é—®é¢˜                    | ç±»å‹                    | é€’æ¨å…¬å¼                               | å¤‡æ³¨                          |
| ----------------------- | ----------------------- | -------------------------------------- | ----------------------------- |
| ä¾‹é¢˜ LC322ï¼šé›¶é’±å…‘æ¢    | å®Œå…¨èƒŒåŒ…æœ€å¤§æœ€å°å€¼é—®é¢˜  | `dp[i] = min(dp[i], dp[i - coin] + 1)` |                               |
| ä¾‹é¢˜ LC279ï¼šå®Œå…¨å¹³æ–¹æ•°  | å®Œå…¨èƒŒåŒ…æœ€å¤§æœ€å°å€¼é—®é¢˜  | `dp[i] = min(dp[i], dp[i - num] + 1)`  |                               |
| ä¾‹é¢˜ LC518ï¼šé›¶é’±å…‘æ¢2   | å®Œå…¨èƒŒåŒ…ç»„åˆé—®é¢˜        | `dp[i] += dp[i - coin]`                |                               |
| ä¾‹é¢˜ LC377ï¼šç»„åˆæ€»æ•° IV | å®Œå…¨èƒŒåŒ…ç»„åˆé—®é¢˜        | `dp[i] += dp[i - num]`                 | è€ƒè™‘é¡ºåºï¼Œ`target` æ”¾åœ¨å¤–å¾ªç¯ |
| ä¾‹é¢˜ LC139ï¼šå•è¯æ‹†åˆ†    | å®Œå…¨èƒŒåŒ… True/Falseé—®é¢˜ | `dp[i] = dp[i] or dp[i - len(word)]`   | è€ƒè™‘é¡ºåº                      |



## 0-1 èƒŒåŒ…

0-1 èƒŒåŒ…é—®é¢˜æ¯”è¾ƒç®€å•ï¼Œå…¶ç‰¹ç‚¹æ˜¯æ¯ç§ç‰©å“ä»…æœ‰ä¸€ä»¶ï¼Œå¯ä»¥é€‰æ‹©æ”¾æˆ–è€…ä¸æ”¾ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

### é€’æ¨å…¬å¼

$F(i, v)$ æ˜¯å‰ $i$ ä»¶ç‰©å“æ°æ”¾å…¥ä¸€ä¸ªå®¹é‡ä¸º $v$ çš„èƒŒåŒ…å¯ä»¥è·å¾—çš„æœ€å¤§ä»·å€¼ï¼Œå…¶çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š

$F[i,v] = max(f[i-1, v], f[i-1, v-C_i] + W_i)$



è¿™ä¸ªé€’æ¨å…¬å¼è¡¨ç¤ºåœ¨åªè€ƒè™‘ **å°†ç¬¬ $i$ ä»¶ç‰©å“æ”¾å…¥å®¹é‡ä¸º $v$ çš„èƒŒåŒ…ä¸­** è¿™ä¸ªå­é—®é¢˜ï¼Œå¯ä»¥åŒ…å«ä¸¤ç§æƒ…å†µï¼š

1. ä¸æ”¾ç¬¬ $i$ ä»¶ç‰©å“ï¼Œé—®é¢˜ç­‰ä»·äº **å‰ $i-1$ ä»¶ç‰©å“æ”¾å…¥å®¹é‡ä¸º $v$ çš„èƒŒåŒ…ä¸­**ï¼›
   1. æ”¾ç¬¬ $i$ ä»¶ç‰©å“ï¼Œé—®é¢˜ç­‰ä»·äº **å‰ $i-1$ ä»¶ç‰©å“æ”¾å…¥å‰©ä¸‹å®¹é‡ä¸º $v - C_i$ çš„èƒŒåŒ…ä¸­ï¼Œå†åŠ ä¸Šæ”¾ç¬¬ $i$ ä»¶ç‰©å“çš„é‡é‡ $W_i$**

### ä¾‹é¢˜ ç»å…¸èƒŒåŒ…é—®é¢˜

æˆ‘ä»¬é¦–å…ˆè¦ä¼šæ±‚è§£ç»å…¸èƒŒåŒ…é—®é¢˜ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š

èƒŒåŒ…å®¹é‡ï¼šsize = 90

æ¯ä¸ªç‰©å“çš„é‡é‡ï¼šcosts = [71, 69, 1]

æ¯ä¸ªç‰©å“çš„ä»·å€¼ï¼švalues = [100, 1, 2]

æˆ‘ä»¬è¦æ±‚è§£åœ¨è£…æ›´å¯èƒ½å¤šçš„ç‰©å“çš„æ¡ä»¶ä¸‹ï¼Œä½¿å¾—èƒŒåŒ…å†…ç‰©å“ä»·å€¼çš„æ€»å€¼æœ€å¤§ã€‚



æˆ‘ä»¬ä½¿ç”¨äºŒç»´ dp å¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š

```python
class Solution:
    def solution(self, weights, values, size):
        if not size:
            return 0

        n = len(weights)
        # æˆ‘ä»¬å®šä¹‰ dp æ•°ç»„ dp[i][w], å¯¹äºå‰ i ä¸ªç‰©å“ï¼Œå½“å‰èƒŒåŒ…å®¹é‡ä¸º wï¼Œå¯ä»¥è£…çš„æœ€å¤§ä»·å€¼æ˜¯ dp[i][w]
        dp = [[0] * (size + 1) for _ in range(n)]
        # å¾ªç¯ä¸­éå†ç‰©å“
        for i in range(1, n):
            # å†…å±‚å¾ªç¯éå†èƒŒåŒ…å®¹é‡
            # for j in range(size + 1) ç­‰åŒ
            for j in range(size, weights[i] - 1, -1):
                # å½“å‰èƒŒåŒ…è£…ä¸ä¸‹
                if weights[i] > j:
                    dp[i][j] = dp[i - 1][j]
                else:
                    dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - weights[i]] + values[i])
        return dp[n - 1][size]
```



åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¸©äº†å‡ ä¸ªå‘ï¼š

1. äºŒç»´ DP æ•°ç»„çš„å®šä¹‰ï¼Œ`dp = [[0] * (size + 1) for _ in range(n)]` ä¸­ `size + 1` è¡¨ç¤ºåˆ—ï¼Œ`n` è¡¨ç¤ºè¡Œã€‚

   ğŸ†šğŸ†šğŸ†šğŸ†šğŸ†š å¦‚æœè¿™æ ·æ¯”è¾ƒéš¾è®°å¿†ï¼Œä¸å¦‚ç›´æ¥ä½¿ç”¨ numpy å»å®šä¹‰ï¼Œéå¸¸æ–¹ä¾¿ï¼š`dp = np.zeros(shape=(n, size + 1))`.

2. å¯¹äº `dp `æ•°ç»„çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼š`dp[i][j]` çš„å«ä¹‰ä¸ºå‰ `i` ä¸ªç‰©å“ï¼Œå½“å‰èƒŒåŒ…å¯ç”¨å®¹é‡ä¸º `j`ï¼Œå½“å‰è£…ä¸‹æ¥çš„æ€»ä»·å€¼
3. å¯¹äºé€’æ¨å…¬å¼ï¼Œæ˜¯ä¸€ä¸ªç»å…¸çš„é€’æ¨ï¼Œä¸è¿‡å¤šè§£é‡Š
4. â—ğŸ”´ğŸ”´ğŸ”´ æœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œé‚£å°±æ˜¯ä¸¤é‡ for å¾ªç¯çš„éå†ç»†èŠ‚ã€‚
   1. ç¬¬ä¸€é‡ä» 1 å¼€å§‹æ­£å‘éå†
   2. ç¬¬äºŒé‡éå†æ˜¯å’ŒèƒŒåŒ…çš„æ€»å®¹é‡æœ‰å…³çš„ï¼Œæˆ‘ä»¬ä» 0 å¼€å§‹éå†åˆ°èƒŒåŒ…çš„å®¹é‡ä¸ºæ­¢ï¼›æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»èƒŒåŒ…çš„å®¹é‡éå†åˆ°å½“å‰è¦æ”¾çš„ç‰©å“çš„é‡é‡åœæ­¢ï¼Œå› ä¸ºå†å¾€ä¸‹å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚è¿™ä¸¤ç§éå†æ–¹å¼åœ¨æœ¬é¢˜ä¸­éƒ½æ˜¯ OK çš„ã€‚

ğŸ§¡ğŸ’›ğŸ’šğŸ’™ ä¼˜åŒ–

æˆ‘ä»¬é äºŒç»´ DP çš„æ–¹æ³•æ±‚è§£ï¼ŒåŠ æ·±ç†è§£ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥å¥—å…¬å¼å†™å‡ºä¸€ç»´ DP çš„æ±‚è§£ï¼Œå¥—ç”¨å…¬å¼çš„è¦ç‚¹åœ¨äºï¼š

1. 0-1 èƒŒåŒ…å€’ç€å¾ªç¯ï¼Œä¸è€ƒè™‘ç‰©å“é¡ºåºï¼Œç‰©å“å¾ªç¯æ”¾åœ¨å¤–ä¾§
2. æ±‚è§£çš„æ˜¯æœ€å¤§æœ€å°å€¼é—®é¢˜ï¼Œé€’æ¨å…¬å¼`dp[i] = max(dp[i], dp[i-num] + 1)`

```python
    def solution2(self, weights, values, size):
        if not size:
            return 0

        # æˆ‘ä»¬æ‹¿å®¹é‡å»å®šä¹‰ dp
        dp = [0] + [0] * size

        # æŒ‰ç…§èƒŒåŒ…é—®é¢˜çš„å¥—è·¯ï¼Œéå†ç‰©å“
        for idx, weight in enumerate(weights):
            for i in range(size, weight - 1, -1):
                dp[i] = max(dp[i], dp[i - weight] + values[idx])

        return dp[-1]
```

å¦‚æ­¤ï¼Œæˆ‘ä»¬å°±è¿›è¡Œäº†ç»Ÿä¸€ã€‚

### ä¾‹é¢˜ LC474ï¼š1å’Œ0

#### [474. ä¸€å’Œé›¶](https://leetcode-cn.com/problems/ones-and-zeroes/)

>  é—®é¢˜åˆ†æï¼šç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²æ•°ç»„ `strs` å’Œä¸¤ä¸ªæ•´æ•° `m` å’Œ `n` ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å› `strs` çš„æœ€å¤§å­é›†çš„å¤§å°ï¼Œè¯¥å­é›†ä¸­æœ€å¤šæœ‰ `m` ä¸ª `0` å’Œ `n` ä¸ª `1` ã€‚å¦‚æœ `x` çš„æ‰€æœ‰å…ƒç´ ä¹Ÿæ˜¯ `y` çš„å…ƒç´ ï¼Œé›†åˆ `x` æ˜¯é›†åˆ `y` çš„ å­é›† ã€‚
>
>  è¾“å…¥ï¼šstrs = ["10", "0001", "111001", "1", "0"], m = 5, n = 3
>
>  è¾“å‡ºï¼š4
>
>  è§£é‡Šï¼šæœ€å¤šæœ‰ 5 ä¸ª 0 å’Œ 3 ä¸ª 1 çš„æœ€å¤§å­é›†æ˜¯ {"10","0001","1","0"} ï¼Œå› æ­¤ç­”æ¡ˆæ˜¯ 4 ã€‚
>  å…¶ä»–æ»¡è¶³é¢˜æ„ä½†è¾ƒå°çš„å­é›†åŒ…æ‹¬ {"0001","1"} å’Œ {"10","1","0"} ã€‚{"111001"} ä¸æ»¡è¶³é¢˜æ„ï¼Œå› ä¸ºå®ƒå« 4 ä¸ª 1 ï¼Œå¤§äº n çš„å€¼ 3 ã€‚

åˆçœ‹è¿™é“é¢˜è¾ƒéš¾ç†è§£ï¼Œéœ€è¦ç¿»è¯‘ä¸€ä¸‹ï¼Œç»™å®š `m` å’Œ `n`ï¼Œè¡¨ç¤ºèƒŒåŒ…ä¸­æœ€å¤šæœ‰ 5 ä¸ª 0 å’Œ 3 ä¸ª 1 -- targetï¼Œè¦æ±‚æ˜¯å­é›†ï¼Œåˆ™è¡¨ç¤ºä¸èƒ½é‡å¤é€‰ -- 0-1 èƒŒåŒ…ã€‚

è¿™å°±æ˜¯ **æœ€å¤§æœ€å°å€¼çš„ 0-1 èƒŒåŒ…é—®é¢˜**ã€‚

æ±‚è§£ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼ŒæŒæ¡å‡ ä¸ªå…³é”®ç‚¹ï¼š

1. **0-1 èƒŒåŒ…å€’ç€å¾ªç¯**ã€‚ä¸ºä»€ä¹ˆè¦å€’ç€å¾ªç¯ï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„é€’æ¨å…¬å¼ä¸­ä½¿ç”¨åˆ°äº† $i-1$ è¿™ä¸ªä¸­é—´çŠ¶æ€ï¼Œå€’ç€å¾ªç¯èƒ½å¤Ÿä¿è¯åœ¨æ¨ $F[i,v]$ çš„æ—¶å€™èƒ½å¤Ÿå–ç”¨ $F[i-1, v]$  çš„å€¼ã€‚
2. èƒŒåŒ…é—®é¢˜å¤–å±‚å¾ªç¯ç‰©ä½“ã€å†…å±‚å¾ªç¯å®¹é‡ã€‚
3. æœ€å¤§æœ€å°é—®é¢˜çš„é€’æ¨å…¬å¼ã€‚
4. çŠ¶æ€è½¬ç§»æ•°ç»„åˆå§‹åŒ–çš„æ—¶å€™åˆå§‹åŒ–ä¸º 0

```python
class Solution:
    def findMaxForm(self, strs: List[str], m: int, n: int) -> int:
        if not strs:
            return 0
         dp = [[0] * (n + 1) for _ in range(m + 1)]

        # éå† nums
        for s in strs: 
            zero = s.count('0')
            one = s.count('1')
            # 0-1 èƒŒåŒ…ä»åå¾€å‰
            for i in range(m, zero - 1, -1):
                for j in range(n, one - 1, -1):
                    dp[i][j] = max(dp[i][j], dp[i - zero][j - one] + 1)

        return dp[m][n] 
```

æ€»ç»“æ¥è¯´ï¼Œè¿™é“é¢˜ç›®å¹¶ä¸æ˜¯æœ€å…¸å‹çš„ 0 - 1 èƒŒåŒ…é—®é¢˜ï¼Œæ™®é€šçš„ 0-1 èƒŒåŒ…é—®é¢˜åªæœ‰ä¸€ç§å®¹é‡ï¼Œä½†æ˜¯è¯¥èƒŒåŒ…é—®é¢˜å­˜åœ¨ 0 å’Œ 1 ä¸¤ç§å®¹é‡ï¼Œæ¯ä¸ªç‰©å“ï¼ˆå­—ç¬¦ä¸²ï¼‰å‡éœ€è¦åˆ†åˆ«å ç”¨ 0 å’Œ 1 çš„è‹¥å¹²å®¹é‡ï¼Œå¹¶ä¸”æ‰€æœ‰ç‰©å“çš„ä»·å€¼å‡ä¸º 1ã€‚æ˜¯ä¸€ä¸ªè¾ƒä¸ºå…¸å‹çš„äºŒç»´åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚

ä¸Šè¿°ä»£ç æ˜¯ç»è¿‡äº†çŠ¶æ€å‹ç¼©åçš„ç»“æœï¼Œå¦‚æœä¸è€ƒè™‘çŠ¶æ€å‹ç¼©çš„è¯ï¼Œå¯ä»¥å®šä¹‰ä¸‰ç»´ dpï¼Œstate: `dp[i][j][k]`ï¼Œi å¯ä»¥è¡¨ç¤ºé€‰æ‹©çš„ç‰©å“ä¸ºå‰ i ä¸ªï¼Œj å’Œ k åˆ†åˆ«è¡¨ç¤ºèƒŒåŒ… 0 å’ŒèƒŒåŒ… 1 çš„æ•°é‡é™åˆ¶ã€‚åœ¨é€’æ¨è¿‡ç¨‹ä¸­ï¼Œæœ€å¤–å¾ªç¯ i å¯¹åº”çš„æœ€æ–°çš„å€¼ï¼Œ`dp[i][j][k] = max(dp[i-1][j-zeros][k-ones]+1, dp[i-1][j][k])`ï¼Œå°†ç¬¬ä¸€ç»´å‹ç¼©åä¾¿å¾—åˆ°å’Œä»£ç ç›¸åŒçš„é€’æ¨å…¬å¼ã€‚

### ä¾‹é¢˜ LC 416ï¼šåˆ†å‰²ç­‰å’Œå­é›†

#### [416. åˆ†å‰²ç­‰å’Œå­é›†](https://leetcode-cn.com/problems/partition-equal-subset-sum/)

> ç»™ä½ ä¸€ä¸ª åªåŒ…å«æ­£æ•´æ•° çš„ éç©º æ•°ç»„ nums ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰ã€‚
>
> 
>
> ç¤ºä¾‹ 1ï¼š
>
> è¾“å…¥ï¼šnums = [1,5,11,5]
>
> è¾“å‡ºï¼štrue
>
> è§£é‡Šï¼šæ•°ç»„å¯ä»¥åˆ†å‰²æˆ [1, 5, 5] å’Œ [11] ã€‚

åˆ†æé¢˜ç›®å¯çŸ¥ï¼š

1. 0-1 èƒŒåŒ…é—®é¢˜ï¼Œå¾ªç¯å€’ç€æ¥
2. Trur/False é—®é¢˜ï¼Œé€’æ¨å…¬å¼ä¸ºï¼š`dp[i] = d[i] or dp[i -num]`

è¯¥é¢˜ç›®çš„è¦æ±‚å¯ä»¥ç†è§£ä¸ºï¼šä»èƒŒåŒ…ä¸­æ‰¾è‹¥å¹²ä¸ªç‰©å“ï¼Œå…¶ä»·å€¼å’Œæ­£å¥½ä¸ºèƒŒåŒ…å®¹é‡çš„ä¸€åŠã€‚

ä»£ç å¦‚ä¸‹ï¼š

```python
class Solution:
    def canPartition(self, nums: List[int]) -> bool:
        if not nums:
            return False

        if sum(nums) % 2 == 1:
            return False

        left_target = sum(nums) // 2
        dp = [True] + [False] * left_target
        for num in nums:
            for i in range(left_target, num - 1, -1):
                dp[i] = dp[i] or dp[i - num]

        return dp[left_target]
```

### ä¾‹é¢˜ LC 494ï¼šç›®æ ‡å’Œ

#### [494. ç›®æ ‡å’Œ](https://leetcode-cn.com/problems/target-sum/)

> ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ã€‚
>
> å‘æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°å‰æ·»åŠ  '+' æˆ– '-' ï¼Œç„¶åä¸²è”èµ·æ‰€æœ‰æ•´æ•°ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ª è¡¨è¾¾å¼ ï¼š
>
> ä¾‹å¦‚ï¼Œnums = [2, 1] ï¼Œå¯ä»¥åœ¨ 2 ä¹‹å‰æ·»åŠ  '+' ï¼Œåœ¨ 1 ä¹‹å‰æ·»åŠ  '-' ï¼Œç„¶åä¸²è”èµ·æ¥å¾—åˆ°è¡¨è¾¾å¼ "+2-1" ã€‚
> è¿”å›å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ çš„ã€è¿ç®—ç»“æœç­‰äº target çš„ä¸åŒ è¡¨è¾¾å¼ çš„æ•°ç›®ã€‚
>
> 
>
> ç¤ºä¾‹ 1ï¼š
>
> è¾“å…¥ï¼šnums = [1,1,1,1,1], target = 3
>
> è¾“å‡ºï¼š5
>
> è§£é‡Šï¼šä¸€å…±æœ‰ 5 ç§æ–¹æ³•è®©æœ€ç»ˆç›®æ ‡å’Œä¸º 3 ã€‚
> -1 + 1 + 1 + 1 + 1 = 3
> +1 - 1 + 1 + 1 + 1 = 3
> +1 + 1 - 1 + 1 + 1 = 3
> +1 + 1 + 1 - 1 + 1 = 3
> +1 + 1 + 1 + 1 - 1 = 3

åˆ†æé¢˜ç›®å¯çŸ¥ï¼š

1. 0-1 èƒŒåŒ…é—®é¢˜ï¼Œå¾ªç¯å€’ç€æ¥
2. èƒŒåŒ…ç»„åˆé—®é¢˜ï¼Œé€’æ¨å…¬å¼ï¼š`dp[i] += dp[i-num]`

è¯¥é¢˜ç›®ç»™å‡ºäº†ç›®æ ‡å’Œï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªæ¡ä»¶æ±‚è§£å‡ºèƒŒåŒ…çš„ç›®æ ‡ï¼Œè¿›è€Œå†™å‡ºä»£ç ã€‚éœ€è¦æ‰¾å‡ºçš„ ç›®æ ‡ ä¸º(æ•°ç»„çš„å’Œ + target) // 2ã€‚

è¯æ˜è¿‡ç¨‹ä¸ºï¼šå…¨éƒ¨çš„å¯åˆ†ä¸º +, -ï¼Œåˆ†å·¦å³ï¼Œå·¦å³çš„å’Œä¸º left + right = sum(nums)ï¼Œè¦çš„ target = left - rightï¼Œç›¸åŠ å¯å¾— 2 * left = sum(nums) + targetï¼Œ ç”±äº target è‚¯å®šæœ‰è§£ï¼Œleft * 2 åˆ™å¿…é¡»æ˜¯å¶æ•°ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```python
class Solution:
    def findTargetSumWays(self, nums: List[int], target: int) -> int:
        if target > sum(nums):
            return 0
        left_target = (sum(nums) + target) // 2
        if (sum(nums) + target) % 2 == 1:
            return 0

        # ç»„åˆé—®é¢˜è§£ dp[i] += dp[i - num]
        dp = [1] + [0] * left_target
        for num in nums:
            for i in range(left_target, num - 1, -1):
                dp[i] += dp[i - num]

        return dp[left_target]
```

### LC1049 æœ€åä¸€å—çŸ³å¤´çš„é‡é‡ III

https://leetcode-cn.com/problems/last-stone-weight-ii/

> æœ‰ä¸€å †çŸ³å¤´ï¼Œæ¯å—çŸ³å¤´çš„é‡é‡éƒ½æ˜¯æ­£æ•´æ•°ã€‚
>
> æ¯ä¸€å›åˆï¼Œä»ä¸­é€‰å‡ºä»»æ„ä¸¤å—çŸ³å¤´ï¼Œç„¶åå°†å®ƒä»¬ä¸€èµ·ç²‰ç¢ã€‚å‡è®¾çŸ³å¤´çš„é‡é‡åˆ†åˆ«ä¸º x å’Œ yï¼Œä¸” x <= yã€‚é‚£ä¹ˆç²‰ç¢çš„å¯èƒ½ç»“æœå¦‚ä¸‹ï¼š
>
> å¦‚æœ x == yï¼Œé‚£ä¹ˆä¸¤å—çŸ³å¤´éƒ½ä¼šè¢«å®Œå…¨ç²‰ç¢ï¼›
> å¦‚æœ x != yï¼Œé‚£ä¹ˆé‡é‡ä¸º x çš„çŸ³å¤´å°†ä¼šå®Œå…¨ç²‰ç¢ï¼Œè€Œé‡é‡ä¸º y çš„çŸ³å¤´æ–°é‡é‡ä¸º y-xã€‚
> æœ€åï¼Œæœ€å¤šåªä¼šå‰©ä¸‹ä¸€å—çŸ³å¤´ã€‚è¿”å›æ­¤çŸ³å¤´æœ€å°çš„å¯èƒ½é‡é‡ã€‚å¦‚æœæ²¡æœ‰çŸ³å¤´å‰©ä¸‹ï¼Œå°±è¿”å› 0ã€‚

åˆ†æï¼šè¿™æ˜¯ä¸€é“æ¯”è¾ƒéšæ™¦çš„ 0-1 èƒŒåŒ…é—®é¢˜ï¼Œå…¶ target å€¼æ˜¯çŸ³å¤´æ€»é‡é‡çš„ä¸€åŠã€‚

0-1 èƒŒåŒ…å€’ç€æ¥ï¼Œæœ€å¤§æœ€å°é€’æ¨å…¬å¼ç”¨ max!

ä»£ç å¦‚ä¸‹ï¼š

```python
class Solution:
    def lastStoneWeightII(self, stones: List[int]) -> int:
        left_target = sum(stones) // 2
        dp = [0] + [0] * left_target

        for stone in stones:
            for i in range(left_target, stone - 1, -1):
                dp[i] = max(dp[i], dp[i - stone] + stone)

        return sum(stones) - 2 * dp[left_target]
```

### æ€»ç»“

å¯¹æ¯”è€Œè¨€ï¼Œ0-1 ä¸€ç»´èƒŒåŒ…çš„å®ç°æ–¹å¼æ˜¯ï¼š

```python
def zero_one_pack(F, C, W):
    # å€’ç€æ¥
    for v <- V to C:
        F[v] <- max(F[v], F[v - C] + W)
```

å…¶ä¸­ C è¡¨ç¤ºæŸä¸ªç‰©ä½“çš„å®¹é‡ï¼ŒW è¡¨ç¤ºå…¶ä»·å€¼ã€‚

0-1 èƒŒåŒ…çš„ä¼ªä»£ç å¯ä»¥ä¸ºï¼š

```python
F[0..V] <- 0
for i <- 1 to N
	zero_one_pack(Fi, Ci, Wi)
```

- 0-1èƒŒåŒ…å€’ç€æ¥

## å®Œå…¨èƒŒåŒ…

ä¸åŒäº 0-1èƒŒåŒ…ï¼Œå®Œå…¨èƒŒåŒ…ä¸­çš„æ¯ç§ç‰©å“éƒ½æœ‰æ— é™ä»¶å¯ä»¥ç”¨ï¼Œæ±‚è§£ï¼šå°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿è¿™äº›ç‰©å“çš„è€—è´¹çš„è´¹ç”¨æ€» å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

### é€’æ¨å…¬å¼

å®Œå…¨èƒŒåŒ…çš„é€’æ¨å…¬å¼å’Œ 0-1 èƒŒåŒ…ååˆ†ç›¸ä¼¼ï¼Œä¸åŒçš„ç‚¹ä»…åœ¨äºï¼š

1. å®Œå…¨èƒŒåŒ…çš„å†…å±‚å¾ªç¯æ˜¯æ­£ç€æ¥çš„ã€‚

è¦è§£é‡Šè¿™ä¸ªåŸå› ï¼Œå°±éœ€è¦ä¸€ä¸ªæ¨å¯¼çš„è¿‡ç¨‹ï¼Œå…¶æ˜¯ç”± 0-1èƒŒåŒ…æ¨å¯¼è€Œæ¥çš„ï¼Œå…¶é€’æ¨å…¬å¼ $F[i, v] = max{F[i âˆ’ 1, v âˆ’ kCi] + kWi | 0 â‰¤ kCi â‰¤ v}$ï¼Œæœ¬è´¨ä¸Šå’Œ 0-1 èƒŒåŒ…ç›¸åŒã€‚

### ä¾‹é¢˜ LC 322ï¼šé›¶é’±å…‘æ¢

#### [322. é›¶é’±å…‘æ¢](https://leetcode-cn.com/problems/coin-change/)

>  ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚

ä»é¢˜ç›®ä¸­å¯ä»¥å¾—å‡ºï¼š

1. å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼šæ­£ç€å¾ªç¯
2. æœ€å¤§æœ€å°é—®é¢˜ï¼Œé€’æ¨å…¬å¼ä¸ºï¼š`dp[i] = max(dp[i], dp[i-1] + 1)`
3. ä¸éœ€è¦è€ƒè™‘é¡ºåºï¼Œæ­£å¸¸å¾ªç¯

é¢˜ç›®è¡¨è¿°è¾ƒä¸ºç®€å•ï¼Œç›´æ¥çœ‹ä»£ç å®ç°ï¼š

```python
class Solution:
    def coinChange(self, coins: List[int], amount: int) -> int:
        if not coins:
            return -1
        dp = [float('inf')] * (amount + 1)
        dp[0] = 0
        for coin in coins:
            for i in range(coin, amount + 1):
                dp[i] = min(dp[i], dp[i - coin] + 1)

        return -1 if dp[amount] == float('inf') else dp[amount]
```

å½“ç„¶ä¹Ÿå¯ä»¥æ”¹å˜é¡ºåºï¼Œè¿™æ ·ç¨å¾®å¿«ä¸€äº›ï¼š

```python
class Solution:
    def coinChange(self, coins: List[int], amount: int) -> int:
        if not coins:
            return -1
        dp = [float('inf')] * (amount + 1)
        dp[0] = 0
        for i in range(1, amount + 1):
            for coin in coins:
                if i >= coin:
                    dp[i] = min(dp[i], dp[i - coin] + 1)

        return -1 if dp[amount] == float('inf') else dp[amount]
```

é€šè¿‡ä»£ç å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªé—®é¢˜çš„å®ç°å’Œå®Œå…¨èƒŒåŒ…ä¹Ÿä¸å°½å®Œå…¨ç›¸åŒï¼Œå…¶ä¸»è¦ä¸åŒåœ¨äºï¼š

1. å¾ªç¯çš„ä½ç½®å˜äº†ï¼Œç°åœ¨å¤–å±‚å¾ªç¯äº†èƒŒåŒ…ï¼Œå†…å±‚å¾ªç¯äº†ç‰©å“ã€‚è¿™ç§æ–¹å¼åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜æ€§èƒ½ï¼Œå¦‚æœæŠŠå¾ªç¯é¡ºåºè°ƒæ¢å›æ¥ï¼Œä»£ç ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡çš„ã€‚ä½†æ˜¯ä¸Šè¿°çš„å¾ªç¯æ–¹å¼æ€§èƒ½è¾ƒå¥½ã€‚
2. åœ¨ä»£ç ä¸­è¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–æ“ä½œï¼Œå¦‚ `if i >= coin` çš„åˆ¤æ–­ï¼Œå°±æ˜¯è¯´èƒŒåŒ…çš„å¤§å°è¦å¤§äºç‰©å“æ‰å¯ä»¥è¿›è¡Œè£…è½½ï¼Œè¿™æ ·å¯ä»¥æé«˜æ€§èƒ½ã€‚è¿™ä¸€æ­¥çœç•¥è°ƒä»£ç ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡çš„ã€‚
3. åˆå§‹åŒ–é—®é¢˜ï¼šç”±äºæ˜¯æœ€å°åŒ–é—®é¢˜ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸ºäº† `float(inf)`

### ä¾‹é¢˜ LC 279ï¼šå®Œå…¨å¹³æ–¹æ•°

#### [279. å®Œå…¨å¹³æ–¹æ•°](https://leetcode-cn.com/problems/perfect-squares/)

> ç»™å®šæ­£æ•´æ•° nï¼Œæ‰¾åˆ°è‹¥å¹²ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼ˆæ¯”å¦‚ 1, 4, 9, 16, ...ï¼‰ä½¿å¾—å®ƒä»¬çš„å’Œç­‰äº nã€‚ä½ éœ€è¦è®©ç»„æˆå’Œçš„å®Œå…¨å¹³æ–¹æ•°çš„ä¸ªæ•°æœ€å°‘ã€‚
>
> ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›å’Œä¸º n çš„å®Œå…¨å¹³æ–¹æ•°çš„ æœ€å°‘æ•°é‡ ã€‚
>
> å®Œå…¨å¹³æ–¹æ•° æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå…¶å€¼ç­‰äºå¦ä¸€ä¸ªæ•´æ•°çš„å¹³æ–¹ï¼›æ¢å¥è¯è¯´ï¼Œå…¶å€¼ç­‰äºä¸€ä¸ªæ•´æ•°è‡ªä¹˜çš„ç§¯ã€‚ä¾‹å¦‚ï¼Œ1ã€4ã€9 å’Œ 16 éƒ½æ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œè€Œ 3 å’Œ 11 ä¸æ˜¯ã€‚
>
> 
>
> ç¤ºä¾‹ 1ï¼š
>
> è¾“å…¥ï¼šn = 12
>
> è¾“å‡ºï¼š3 
>
> è§£é‡Šï¼š12 = 4 + 4 + 4

ä»é¢˜ç›®ä¸­å¯ä»¥å¾—åˆ°ä¿¡æ¯ï¼š

1. å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼šæ­£ç€å¾ªç¯
2. æœ€å¤§æœ€å°é—®é¢˜ï¼Œé€’æ¨å…¬å¼ä¸ºï¼š`dp[i] = max(dp[i], dp[i-1] + 1)`
3. ä¸éœ€è¦è€ƒè™‘é¡ºåºï¼Œæ­£å¸¸å¾ªç¯

ä»£ç å¦‚ä¸‹ï¼š

```python
class Solution:
    def numSquares(self, n: int) -> int:
        dp = [float('inf')] * (n + 1)
        dp[0] = 0

        # æ„é€ ç‰©å“æ•°ç»„
        nums = [_**2 for _ in range(1, n+1) if _**2 <= n]

        for num in nums:
            for i in range(num, n + 1):
                dp[i] = min(dp[i], dp[i - num] + 1)

        return -1 if dp[-1] == float('inf') else dp[-1]
```

### ä¾‹é¢˜ LC 518ï¼šé›¶é’±å…‘æ¢2

#### [518. é›¶é’±å…‘æ¢ II](https://leetcode-cn.com/problems/coin-change-2/)

> ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸å’Œä¸€ä¸ªæ€»é‡‘é¢ã€‚å†™å‡ºå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢çš„ç¡¬å¸ç»„åˆæ•°ã€‚å‡è®¾æ¯ä¸€ç§é¢é¢çš„ç¡¬å¸æœ‰æ— é™ä¸ªã€‚

è¿™ä¸ªé¢˜ç›®å’Œä¸Šè¿°ä¾‹é¢˜éƒ½æ˜¯å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œä½†æ˜¯å´å­˜åœ¨äº›è®¸ä¸åŒï¼š

1. è¿™æ˜¯ä¸€ä¸ªå®Œå…¨èƒŒåŒ…ä¸”ä¸è€ƒè™‘é¡ºåºçš„ç»„åˆé—®é¢˜ï¼Œå¤–å±‚å¾ªç¯è¿˜æ˜¯å’Œ 0-1èƒŒåŒ…ä¿æŒä¸€è‡´
2. ä¸Šé¢é¢˜ç›®æ±‚è§£çš„æ˜¯å‡‘æˆç›®æ ‡æ•°é‡æ‰€éœ€è¦çš„æœ€å°ç¡¬å¸æ•°ï¼›æ”¹é¢˜ç›®æ±‚è§£çš„æ˜¯å‡‘æˆç›®æ ‡æ•°é‡çš„ç¡¬å¸ç»„åˆæ•°
3. æ€»ç»“2ï¼šä¸Šé¢é¢˜ç›®æ˜¯æœ€å¤§æœ€å°é—®é¢˜ï¼Œè¯¥é¢˜ç›®æ˜¯ç»„åˆé—®é¢˜
4. ç»„åˆé—®é¢˜çš„é€’æ¨å…¬å¼ä¸ºï¼š`dp[i] += dp[i -num]`

å…¶ä»£ç å¦‚ä¸‹ï¼š

```python
class Solution:
    def change(self, amount: int, coins: List[int]) -> int:
        if not coins:
            return 0
		# å°±æ˜¯ dp[0] = 1
        dp = [1] + [0] * amount

        for coin in coins:
            # è¿™æ˜¯ä¸€ä¸ªä¼˜åŒ–ï¼Œå¯ä»¥ä» 1 å¼€å§‹å¾ªç¯ï¼Œç„¶ååˆ¤æ–­ i >= coin
            for i in range(coin, amount + 1):
                dp[i] += dp[i - coin]

        return dp[amount]
```

### ä¾‹é¢˜ LC 377ï¼š ç»„åˆæ€»æ•° IV

#### [377. ç»„åˆæ€»å’Œ â…£](https://leetcode-cn.com/problems/combination-sum-iv/)

> ç»™ä½ ä¸€ä¸ªç”± ä¸åŒ æ•´æ•°ç»„æˆçš„æ•°ç»„ nums ï¼Œå’Œä¸€ä¸ªç›®æ ‡æ•´æ•° target ã€‚è¯·ä½ ä» nums ä¸­æ‰¾å‡ºå¹¶è¿”å›æ€»å’Œä¸º target çš„å…ƒç´ ç»„åˆçš„ä¸ªæ•°ã€‚
>
> é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆç¬¦åˆ 32 ä½æ•´æ•°èŒƒå›´ã€‚
>
> è¾“å…¥ï¼šnums = [1,2,3], target = 4
>
> è¾“å‡ºï¼š7
>
> è§£é‡Šï¼š
> æ‰€æœ‰å¯èƒ½çš„ç»„åˆä¸ºï¼š
> (1, 1, 1, 1)
> (1, 1, 2)
> (1, 2, 1)
> (1, 3)
> (2, 1, 1)
> (2, 2)
> (3, 1)
> è¯·æ³¨æ„ï¼Œé¡ºåºä¸åŒçš„åºåˆ—è¢«è§†ä½œä¸åŒçš„ç»„åˆã€‚

è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„è€ƒè™‘é¡ºåºçš„å®Œå…¨èƒŒåŒ…ç»„åˆé—®é¢˜ï¼Œçœ‹åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œé¦–å…ˆç¡®å®šæ¨¡æ¿ï¼š

1. å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼šæ­£ç€å¾ªç¯
2. ç»„åˆé—®é¢˜ï¼šé€’æ¨å…¬å¼ä¸ºï¼š`dp[i] += dp[i -num]`
3. è€ƒè™‘é¡ºåºï¼ŒæŠŠèƒŒåŒ…æ”¾åœ¨å¤–å±‚å¾ªç¯

å¾ˆè½»æ¾å†™å‡ºä»£ç ï¼š

```python
class Solution:
    def combinationSum4(self, nums: List[int], target: int) -> int:
        if not nums:
            return 0
        dp = [0] * (target + 1)
        dp[0] = 1
        # è€ƒè™‘é¡ºåºï¼Œtarget æ”¾åœ¨å¤–é¢
        for i in range(1, target + 1):
            for num in nums:
                if i >= num:
                    dp[i] += dp[i - num]

        return dp[target]
```

### ä¾‹é¢˜ LC 139ï¼šå•è¯æ‹†åˆ†

#### [139. å•è¯æ‹†åˆ†](https://leetcode-cn.com/problems/word-break/)

> ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² s å’Œä¸€ä¸ªåŒ…å«éç©ºå•è¯çš„åˆ—è¡¨ wordDictï¼Œåˆ¤å®š s æ˜¯å¦å¯ä»¥è¢«ç©ºæ ¼æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯ã€‚
>
> è¯´æ˜ï¼š
>
> æ‹†åˆ†æ—¶**å¯ä»¥é‡å¤ä½¿ç”¨**å­—å…¸ä¸­çš„å•è¯ã€‚
> ä½ å¯ä»¥å‡è®¾å­—å…¸ä¸­æ²¡æœ‰é‡å¤çš„å•è¯ã€‚
>
> ç¤ºä¾‹ 1ï¼š
>
> è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]
>
> è¾“å‡º: true
>
> è§£é‡Š: è¿”å› true å› ä¸º "leetcode" å¯ä»¥è¢«æ‹†åˆ†æˆ "leet code"ã€‚

ä»é¢˜ç›®ä¸­å¯ä»¥å¾—å‡ºä¿¡æ¯ï¼š

1. å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œï¼ˆæ‹†åˆ†æ—¶**å¯ä»¥é‡å¤ä½¿ç”¨**å­—å…¸ä¸­çš„å•è¯ï¼‰ï¼šæ­£ç€å¾ªç¯
2. true/false é—®é¢˜ï¼Œé€’æ¨å…¬å¼ä¸ºï¼š`dp[i] = dp[i] or dp[i - num]`
3. è€ƒè™‘é¡ºåºï¼ŒèƒŒåŒ…åœ¨å¤–å¾ªç¯

ä»£ç å¦‚ä¸‹ï¼š

```python
class Solution:
    def wordBreak(self, s: str, wordDict: List[str]) -> bool:
        if not wordDict:
            return False
		# dp[0] = True
        dp = [True] + [False] * len(s)

        for i in range(1, len(s) + 1):
            for word in wordDict:
                if i - len(word) >= 0 and s[i - len(word):i] == word:
                    dp[i] = dp[i] or dp[i - len(word)]

        return dp[-1]
```

### æ€»ç»“

å®Œå…¨èƒŒåŒ…é—®é¢˜çš„ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```python
def CompletePack(F, C, W)
	for v â† C to V
		F[v] â† max{F[v], f[v âˆ’ C] + W}
```

```python
F[0..V ] â†0
for i â† 1 to N
    for v â† Ci to V
		F[v] â† max(F[v], F[v âˆ’ Ci] + Wi)
```

- å®Œå…¨èƒŒåŒ…æ­£ç€æ¥
- å¦‚æœä¸é¡ºåºæœ‰å…³ï¼Œå†…å¾ªç¯ coinsï¼Œå¤–å¾ªç¯ targetï¼ˆèƒŒåŒ…å®¹é‡åœ¨å¤–ï¼‰

## å‚è€ƒæ–‡çŒ®

[ä¸€ç¯‡æ–‡ç« åƒé€èƒŒåŒ…é—®é¢˜ï¼ï¼ˆç»†è‡´å¼•å…¥+è§£é¢˜æ¨¡æ¿+ä¾‹é¢˜åˆ†æ+ä»£ç å‘ˆç°ï¼‰](https://leetcode-cn.com/problems/coin-change-2/solution/yi-pian-wen-zhang-chi-tou-bei-bao-wen-ti-2xkk/)
