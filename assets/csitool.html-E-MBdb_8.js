import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as e,o as n}from"./app-11Vuyqh7.js";const t={};function l(h,i){return n(),a("div",null,i[0]||(i[0]=[e(`<p>These instructions are currently expected to work on Linux operating systems that are based on an upstream Linux kernel version between 3.2 (e.g. Ubuntu 12.04) and 4.2 (e.g. Ubuntu 14.04.4). The IWL5300 provides 802.11n channel state information in a format that reports the channel matrices for 30 subcarrier groups, which is about one group for every 2 subcarriers at 20 MHz or one in 4 at 40 MHz. Each channel matrix entry is a complex number, with signed 8-bit resolution each for the real and imaginary parts. It specifies the gain and phase of the signal path between a single transmit-receive antenna pair.</p><h2 id="_1-1-预备工作" tabindex="-1"><a class="header-anchor" href="#_1-1-预备工作"><span>1.1 预备工作</span></a></h2><p><strong>硬件环境:</strong></p><ol><li>intel 5300网卡（笔记本为mini-pcie接口，半高网卡、台式机为pcie接口，全高网卡）</li><li>无线路由器，一般为市面上常见的商用路由器即可，不设置wifi密码</li></ol><p><strong>软件环境</strong></p><p>软件环境的配置较为困难，一有不慎可能会前功尽弃，不要气馁，多尝试几次也是自身提升的过程！ 软件要求：</p><ul><li>Ubuntu &gt;= 12.04LTS 操作系统镜像</li><li>csi-tool.tar文件 (PS：这两个文件我已经上传到百度云，<a href="http://pan.baidu.com/s/1dEZ9zSt" title="csi-tool.tar" target="_blank" rel="noopener noreferrer">csi-tool.tar</a>和<a href="http://pan.baidu.com/s/1qY6wZN2" title="Ubuntu-12.04-Desktop" target="_blank" rel="noopener noreferrer">Ubuntu-12.04-Desktop</a>)</li></ul><h2 id="_1-2-配置csi-tool" tabindex="-1"><a class="header-anchor" href="#_1-2-配置csi-tool"><span>1.2 配置CSI-Tool</span></a></h2><p><strong>注意：系统安装完成后，查看一下内核信息，是否为：<code>Linux Version 3.2.0.84-generic-pae</code>，然后进行下一步</strong></p><p>可以参考官方文档：<a href="http://dhalperi.github.io/linux-80211n-csitool/installation.html" title="Linux 802.11n CSI Tool" target="_blank" rel="noopener noreferrer">Linux 802.11n CSI Tool</a></p><p>为了提高下载速度，首先需要<strong>更换软件源</strong>。进入Ubuntu桌面系统，CTRL++ALT+T打开命令行，在命令行输入：</p><p><code>sudo vi /etc/apt/source.list</code></p><p>将里面所有的内容替换成搜狐的软件源，具体可以参考<a href="https://www.weigao.cc/blog/2017/01/02/aptsource.html" target="_blank" rel="noopener noreferrer">apt-source</a>上面说的。 接下来：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> linux-headers-</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -r</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> git-core</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#这一步是安装csitool所需要的一些依赖</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iw</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iface</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> wlan0</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> inet</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> manual</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /etc/network/interfaces</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> network-manager</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#依次执行这三步</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> blacklist</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iwldvm</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /etc/modprobe.d/csitool.conf</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> blacklist</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iwlwifi</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /etc/modprobe.d/csitool.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#这两步是为了电脑在开机的时候不启动无线，不然有可能导致电脑无法正常开机</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来找到我们之前下载好的csi-tool.tar文件，解压：</p><p><code>tar -xvf csi-tool.tar</code></p><p>得到zip文件，校验一下：</p><p><code>MD5 (csi-tool.zip) = 9390f2d1a38d7e0cbd2d8115ea6dc05b</code></p><p>然后继续解压得到的zip文件：</p><p><code>unzip csi-tool.zip</code></p><p>解压以后：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#首先用cd命令进入到linux-80211n-csitool文件目录下</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> linux-80211n-csitool</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#对于特殊版本的内核：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#CSITOOL_KERNEL_TAG=csitool-$(uname -r | cut -d . -f 1-2)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#接下来编译</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">make</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /lib/modules/</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -r</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">/build</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> M=</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">/drivers/net/wireless/iwlwifi</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> modules</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> make</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /lib/modules/</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -r</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">/build</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> M=</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">/drivers/net/wireless/iwlwifi</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> INSTALL_MOD_DIR=updates</span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">    modules_install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> depmod</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ..</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>完成之后，会看到提示 <em>Can&#39;t read private key</em> 的提示，可以进行下一步： 在 supplyment 文件夹外面执行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /lib/firmware/iwlwifi-5000-*.ucode</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> do</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> mv</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> $file</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> $file</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">.orig</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> done</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> linux-80211n-csitool-supplementary/firmware/iwlwifi-5000-2.ucode.sigcomm2010</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /lib/firmware/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iwlwifi-5000-2.ucode.sigcomm2010</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /lib/firmware/iwlwifi-5000-2.ucode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">make</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> linux-80211n-csitool-supplementary/netlink</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行完以后基本上就完成了，接下来是测试步骤：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> modprobe</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iwlwifi</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> mac80211</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#如果提示 &quot;FATAL: Module iwlwifi is in use.&quot; ，执行下一步</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> modprobe</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iwldvm</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iwlwifi</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> mac80211</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#接下来reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> modprobe</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> iwlwifi</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> connector_log=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;">0x1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> linux-80211n-csitool-supplementary/netlink/log_to_file</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> csi.dat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,26)]))}const k=s(t,[["render",l]]),d=JSON.parse('{"path":"/blogs/Research/csitool.html","title":"CSI Tool","lang":"zh-CN","frontmatter":{"title":"CSI Tool","date":"2017-09-10T00:00:00.000Z","tag":["paper","CSI"],"category":["Research"],"description":"These instructions are currently expected to work on Linux operating systems that are based on an upstream Linux kernel version between 3.2 (e.g. Ubuntu 12.04) and 4.2 (e.g. Ubu...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"CSI Tool\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2017-09-10T00:00:00.000Z\\",\\"dateModified\\":\\"2022-09-27T15:26:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Someone\\",\\"url\\":\\"https://www.weigao.cc\\"}]}"],["meta",{"property":"og:url","content":"https://vueblog.weigao.cc/blogs/Research/csitool.html"}],["meta",{"property":"og:site_name","content":"weigao"}],["meta",{"property":"og:title","content":"CSI Tool"}],["meta",{"property":"og:description","content":"These instructions are currently expected to work on Linux operating systems that are based on an upstream Linux kernel version between 3.2 (e.g. Ubuntu 12.04) and 4.2 (e.g. Ubu..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-09-27T15:26:02.000Z"}],["meta",{"property":"article:tag","content":"CSI"}],["meta",{"property":"article:tag","content":"paper"}],["meta",{"property":"article:published_time","content":"2017-09-10T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-09-27T15:26:02.000Z"}]]},"git":{"createdTime":1644237761000,"updatedTime":1664292362000,"contributors":[{"name":"chenweigao","username":"chenweigao","email":"297859260@qq.com","commits":5,"url":"https://github.com/chenweigao"}]},"readingTime":{"minutes":2.55,"words":766},"filePathRelative":"blogs/Research/csitool.md","excerpt":"<p>These instructions are currently expected to work on Linux operating systems that are based on an upstream Linux kernel version between 3.2 (e.g. Ubuntu 12.04) and 4.2 (e.g. Ubuntu 14.04.4).\\nThe IWL5300 provides 802.11n channel state information in a format that reports the channel matrices for 30 subcarrier groups, which is about one group for every 2 subcarriers at 20 MHz or one in 4 at 40 MHz. Each channel matrix entry is a complex number, with signed 8-bit resolution each for the real and imaginary parts. It specifies the gain and phase of the signal path between a single transmit-receive antenna pair.</p>","autoDesc":true}');export{k as comp,d as data};
