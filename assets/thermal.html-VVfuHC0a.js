import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,d as i,e as n,r as e,o as h}from"./app-11Vuyqh7.js";const p={};function k(r,s){const a=e("Mermaid");return h(),l("div",null,[s[0]||(s[0]=i('<h2 id="_1-abstract" tabindex="-1"><a class="header-anchor" href="#_1-abstract"><span>1. Abstract</span></a></h2><p>Linux Thermal æ˜¯ Linux ç³»ç»Ÿä¸‹æ¸©åº¦æ§åˆ¶ç›¸å…³çš„æ¨¡å—ï¼Œä¸»è¦ç”¨æ¥æ§åˆ¶ç³»ç»Ÿè¿è¡Œä¸­èŠ¯ç‰‡äº§ç”Ÿçš„çƒ­é‡ã€‚é…åˆ ic å†…éƒ¨æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œå¯¹ ic æ¸©åº¦è¿›è¡Œç®¡æ§ï¼Œä¿è¯ç³»ç»Ÿç¨³å®šæ€§<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>ã€‚</p><p>å…¶åŸºæœ¬çš„æ¶æ„å¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºä¸‹å›¾ï¼š</p>',3)),n(a,{id:"mermaid-9",code:"eJxLy8kvT85ILCpRCHHh4nSMjg7JSC3KTcxRcM4vSo2NBQop6OraKTghJKLy81IVXFLLMpOR5J0R8u75ZalFeflFCEkXZFPzcxCaAcCtJ4Y="}),s[1]||(s[1]=i(`<p>Thermal ä¸­æœ‰ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¸‹æ–‡ä¼šç»“åˆå®šä¹‰çš„ä»£ç å¯¹å…¶è¿›è¡Œåˆ†æã€‚</p><h2 id="_2-thermal-zone-device" tabindex="-1"><a class="header-anchor" href="#_2-thermal-zone-device"><span>2. Thermal Zone Device</span></a></h2><p>Thermal Zone ä»£è¡¨ä¸€ä¸ªæ¸©æ§åŒºé—´ï¼Œå°†å…¶çœ‹æˆä¸€ä¸ªè™šæ‹Ÿçš„æ¸©åº¦ sensor, ä½†æ˜¯éœ€è¦æœ‰ç‰©ç† sensor ä¸å…¶å…³è”æ‰å¯ä»¥å‘æŒ¥ä½œç”¨ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ª Thermal zone æœ€å¤šå¯ä»¥å…³è”ä¸€ä¸ª sensor, ä½†æ˜¯ä¸€ä¸ª sensor å¯ä»¥æ˜¯å¤šä¸ªç¡¬ä»¶ Sensor çš„æ··åˆã€‚</p><p>ğŸ¤”ğŸ¤”ğŸ¤” ä¸ºä»€ä¹ˆä¸€ä¸ª Thermal zone åªèƒ½å…³è”ä¸€ä¸ª sensor? ç³»ç»Ÿä¸­ä¼šæœ‰å¤šä¸ª Thermal zone å—ï¼Ÿ</p><p>Thermal Zone Device åœ¨ Thermal æ¡†æ¶ä¸­ç†è§£ä¸º<strong>è·å–æ¸©åº¦çš„è®¾å¤‡</strong>ã€‚</p><p>æˆ‘ä»¬åˆ—ä¸¾å¹¶åˆ†æå…¶ç»“æ„ç»„æˆï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span>// thermal.h</span></span>
<span class="line"><span>struct thermal_zone_device {</span></span>
<span class="line"><span>	int id;</span></span>
<span class="line"><span>	char type[THERMAL_NAME_LENGTH];</span></span>
<span class="line"><span>	struct device device;</span></span>
<span class="line"><span>	struct attribute_group trips_attribute_group;</span></span>
<span class="line"><span>	struct thermal_attr *trip_temp_attrs;</span></span>
<span class="line"><span>	struct thermal_attr *trip_type_attrs;</span></span>
<span class="line"><span>	struct thermal_attr *trip_hyst_attrs;</span></span>
<span class="line"><span>	void *devdata;</span></span>
<span class="line"><span>	int trips;</span></span>
<span class="line"><span>	unsigned long trips_disabled;	/* bitmap for disabled trips */</span></span>
<span class="line"><span>	int passive_delay;</span></span>
<span class="line"><span>	int polling_delay;</span></span>
<span class="line"><span>	int temperature;</span></span>
<span class="line"><span>	int last_temperature;</span></span>
<span class="line"><span>	int emul_temperature;</span></span>
<span class="line"><span>	int passive;</span></span>
<span class="line"><span>	int prev_low_trip;</span></span>
<span class="line"><span>	int prev_high_trip;</span></span>
<span class="line"><span>	unsigned int forced_passive;</span></span>
<span class="line"><span>	atomic_t need_update;</span></span>
<span class="line"><span>	struct thermal_zone_device_ops *ops;</span></span>
<span class="line"><span>	struct thermal_zone_params *tzp;</span></span>
<span class="line"><span>	struct thermal_governor *governor;</span></span>
<span class="line"><span>	void *governor_data;</span></span>
<span class="line"><span>	struct list_head thermal_instances;</span></span>
<span class="line"><span>	struct ida ida;</span></span>
<span class="line"><span>	struct mutex lock;</span></span>
<span class="line"><span>	struct list_head node;</span></span>
<span class="line"><span>	struct delayed_work poll_queue;</span></span>
<span class="line"><span>	enum thermal_notify_event notify_event;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†æ›´æ–¹ä¾¿åˆ†æï¼Œæˆ‘ä»¬ç»™å‡ºä¸€ä¸ªç®€å•çš„ç±»å›¾ï¼š</p>`,8)),n(a,{id:"mermaid-32",code:"eJyNUsFugzAMPbdf4XMl+ICq4rTjTvuBKEAUohEHJaHTuu3fZyeE0a2tdgBh+/k9P5tulCE8Gam9tHuA3njVReMQnl8oTFWIg/JWjuLiUIlenU2n4IOqANV1bZLEEo5wiJfpVj33Cjcxht6E+aLnkRCDk9judOKWplmIW4M9HMFgPCyZGTm3BFpFEZUtYwQOvUmSpWxdrzblTZiaCS3i+/Q3t7JWUNcPLeR9rOPTVtbxtTsrj84LlLZI4GxFbNcZCxW7KlS827aYqu/Lb3tW+TbL736oO+dGg7ocldg7+syYN2X0EBc8G7cyvOaQ2bltNNZEuuWMwWhUPYwONfA9CGRl7IZ0oJThMW/9SFX12dw7/L9bstPf8MX/FXyzmP03LKbxmA=="}),s[2]||(s[2]=i(`<h3 id="_2-1-thermal-zone-params-tzp" tabindex="-1"><a class="header-anchor" href="#_2-1-thermal-zone-params-tzp"><span>2.1. thermal_zone_params *tzp</span></a></h3><p>åœ¨ä¸Šè¿°ç»“æ„ä½“çš„ 24 è¡Œï¼Œç»“æ„ä½“ç»†èŠ‚å¦‚ä¸‹ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">/* Structure to define Thermal Zone parameters */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_params </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	char</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9FF;"> governor_name</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">THERMAL_NAME_LENGTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	bool</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> no_hwmon</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> num_tbps</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_bind_params </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tbp</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">	u32 sustainable_power</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">	s32 k_po</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">	s32 k_pu</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">	s32 k_i</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">	s32 k_d</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">	s32 integral_cutoff</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> slope</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">	</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> offset</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸŸ¡ğŸŸ¡ğŸŸ¡å‘æ•£ï¼šå¦‚å¯»æ‰¾å¯¹åº”çš„ governor: <code>governor = __find_governor(tz-&gt;tzp-&gt;governor_name);</code> å°±ç”¨åˆ°äº† <code>tzp-&gt;governor_name</code> è¿™ä¸ªå‚æ•°ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ <code>tzp</code> çš„ä½ç½®ï¼š</p>`,5)),n(a,{id:"mermaid-46",code:"eJxLy8kvT85ILCpR8AniUgACR42SjNSi3MSc+Kr8vNT4lNSyzORUBU1dXTsnVJmCxKLE3GIFrZKqAk0uAGaQGGQ="}),s[3]||(s[3]=i(`<p>æˆ‘ä»¬å»æ‰åŸç”Ÿä»£ç ä¸­çš„æ³¨é‡Šä¿¡æ¯ï¼Œç„¶åç”¨è¡¨æ ¼çš„å½¢å¼ä¸€ä¸€åˆ†æè¿™äº›å‚æ•°ï¼š</p><table><thead><tr><th style="text-align:left;">param</th><th>type</th><th>comments</th><th>means</th></tr></thead><tbody><tr><td style="text-align:left;">governor_name</td><td>char[]</td><td></td><td></td></tr><tr><td style="text-align:left;">no_hwmon</td><td>bool</td><td><em>a boolean to indicate if the thermal to hwmon sysfs interface is required. when no_hwmon == false, a hwmon sysfs interface will be created. when no_hwmon == true, nothing will be done</em></td><td></td></tr><tr><td style="text-align:left;">num_tbps</td><td>int</td><td><em>Number of tbp entries</em></td><td></td></tr><tr><td style="text-align:left;">tbp</td><td>struct</td><td><em>Structure that holds binding parameters for a zone</em></td><td>struct thermal_bind_params ç»“æ„ä½“å®šä¹‰åœ¨ <code>thermal.h</code></td></tr><tr><td style="text-align:left;">sustainable_power</td><td>u32</td><td><em>Sustainable power (heat) that this thermal zone can dissipate in mW</em></td><td>è¯¥çƒ­åŒºå¯æ¶ˆæ•£çš„æŒç»­åŠŸç‡</td></tr><tr><td style="text-align:left;">k_po</td><td>s32</td><td><em>Proportional parameter of the PID controller when</em></td><td>PID æ§åˆ¶å™¨çš„æ¯”ä¾‹å‚æ•°</td></tr><tr><td style="text-align:left;">k_pu</td><td>s32</td><td><em>Proportional parameter of the PID controller when undershooting</em></td><td></td></tr><tr><td style="text-align:left;">k_i</td><td>s32</td><td><em>Integral parameter of the PID controller</em></td><td></td></tr><tr><td style="text-align:left;">k_d</td><td>s32</td><td><em>Derivative parameter of the PID controller</em></td><td></td></tr><tr><td style="text-align:left;">integral_cutoff</td><td>s32</td><td><em>threshold below which the error is no longer accumulated</em></td><td>ä½äºæ­¤é˜ˆå€¼çš„é”™è¯¯å°†ä¸å†ç´¯è®¡</td></tr><tr><td style="text-align:left;">slope</td><td>int</td><td><em>slope of a linear temperature adjustment curve.</em></td><td>çº¿æ€§æ¸©åº¦è°ƒèŠ‚æ›²çº¿çš„æ–œç‡</td></tr><tr><td style="text-align:left;">offset</td><td>int</td><td><em>offset of a linear temperature adjustment curve.</em></td><td>çº¿æ€§æ¸©åº¦è°ƒèŠ‚æ›²çº¿çš„åç§»</td></tr></tbody></table><div class="hint-container tip"><p class="hint-container-title">s32, u32 in int-l64.h</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">typedef</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> __signed__ </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> __s32</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> unsigned</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> __u32</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><h4 id="_2-1-1-thermal-bind-params" tabindex="-1"><a class="header-anchor" href="#_2-1-1-thermal-bind-params"><span>2.1.1. thermal_bind_params</span></a></h4><p>thermal_bind_params (thermal.h)ç»“æ„ä½“å¦‚ä¸‹ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">/* Structure that holds binding parameters for a zone */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_bind_params </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">cdev</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> weight</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip_mask</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	unsigned</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> long</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">binding_limits</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">match</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">			struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">cdev</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ·±å…¥åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£åˆ°ï¼Œ<code>thermal_bind_params </code> éš¶å±ç»“æ„å¦‚ä¸‹ï¼š</p>`,7)),n(a,{id:"mermaid-251",code:"eJxLy8kvT85ILCpR8AniUgACR42SjNSi3MSc+Kr8vNT4lNSyzORUBU1dXTsnDQUUqYLEosTcYgWtkqoCTbBWJ6AiZ7j2pMy8FISaJKAaAK4TI9g="}),s[4]||(s[4]=i('<table><thead><tr><th style="text-align:left;">param</th><th>type</th><th>comments</th><th>means</th></tr></thead><tbody><tr><td style="text-align:left;">weight</td><td>int</td><td><em>This is a measure of &#39;how effectively these devices can cool &#39;this&#39; thermal zone. It shall be determined by platform characterization. This value is relative to the rest of the weights so a cooling device whose weight is double that of another cooling device is twice as effective. See Documentation/driver-api/thermal/sysfs-api.rst for more information.</em></td><td></td></tr><tr><td style="text-align:left;">trip_mask</td><td>int</td><td><em>This is a bit mask that gives the binding relation between this thermal zone and cdev, for a particular trip point.</em></td><td></td></tr><tr><td style="text-align:left;">binding_limits</td><td>unsigned long</td><td><em>This is an array of cooling state limits. Must have exactly 2 * thermal_zone.number_of_trip_points. It is an array consisting of tuples &lt;lower-state upper-state&gt; of state limits. Each trip will be associated with one state limit tuple when binding. A NULL pointer means &lt;THERMAL_NO_LIMITS THERMAL_NO_LIMITS&gt; on all trips.</em></td><td></td></tr><tr><td style="text-align:left;">match</td><td></td><td><code>int (*match) (struct thermal_zone_device *tz, struct thermal_cooling_device *cdev);</code></td><td></td></tr></tbody></table><h3 id="_2-2-thermal-zone-device-ops-ops" tabindex="-1"><a class="header-anchor" href="#_2-2-thermal-zone-device-ops-ops"><span>2.2. thermal_zone_device_ops *ops</span></a></h3><p>æŒ‡çš„æ˜¯ thermal å¯ä»¥æ“ä½œçš„ç±»å‹ï¼š</p><p>å…¶éš¶å±çš„ç»“æ„å¦‚ä¸‹ï¼š</p>',4)),n(a,{id:"mermaid-337",code:"eJxLy8kvT85ILCpR8AniUgACR42SjNSi3MSc+Kr8vNT4lNSyzORUBU1dXTsnbDLx+QXFClpAQpMLAM9lGfU="}),s[5]||(s[5]=i(`<p>å…¶ç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device_ops </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">		     struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">unbind</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">		       struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">set_trips</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_mode</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">			 enum</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_device_mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">set_mode</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">		enum</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_device_mode</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_trip_type</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">		enum</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_trip_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_trip_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">set_trip_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_trip_hyst</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">set_trip_hyst</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_crit_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">set_emul_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_trend</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">			  enum</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_trend </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">notify</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">		       enum</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_trip_type</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-1-int-get-temp" tabindex="-1"><a class="header-anchor" href="#_2-2-1-int-get-temp"><span>2.2.1. int (*get_temp)</span></a></h4><p>è·å–æ¸©åº¦ <code>int (*get_temp) (struct thermal_zone_device *, int *);</code></p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">override_ops </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> d</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">override_ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> d</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">override_ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">get_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">zone</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-2-int-get-trip-temp" tabindex="-1"><a class="header-anchor" href="#_2-2-2-int-get-trip-temp"><span>2.2.2. int (*get_trip_temp)</span></a></h4><p>åœ¨ <code>thermal_sysfs.c</code> ä¸­è°ƒç”¨ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">static</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> ssize_t</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">trip_point_temp_show</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;">dev</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> device_attribute </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                     char</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;">buf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> to_thermal_zone</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">dev</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> ret</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> temperature</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">get_trip_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                return</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">EPERM</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sscanf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">trip_point_</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">_temp</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                return</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">EINVAL</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        ret </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> tz</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">get_trip_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">temperature</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">ret</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> ret</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> sprintf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">buf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;">%d</span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> temperature</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-3-int-set-trip-temp" tabindex="-1"><a class="header-anchor" href="#_2-2-3-int-set-trip-temp"><span>2.2.3. int (*set_trip_temp)</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">static</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> ssize_t</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">trip_point_temp_store</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;">dev</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> device_attribute </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                      const</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> char</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;">buf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> size_t</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;"> count</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> to_thermal_zone</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">dev</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> ret</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> temperature</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> hyst </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        enum</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_trip_type type</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">set_trip_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                return</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">EPERM</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sscanf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">trip_point_</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">_temp</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                return</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">EINVAL</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">kstrtoint</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">buf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">temperature</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                return</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">EINVAL</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        ret </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> tz</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">set_trip_temp</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> temperature</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">ret</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> ret</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">get_trip_hyst</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">                ret </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> tz</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">get_trip_hyst</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">hyst</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">ret</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                        return</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> ret</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        ret </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> tz</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">get_trip_type</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">ret</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> ret</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">        thermal_notify_tz_trip_change</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> temperature</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> hyst</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">        thermal_zone_device_update</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> THERMAL_EVENT_UNSPECIFIED</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> count</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè°ƒç”¨ä¸­æœ‰å‡ ä¸ªçŸ¥è¯†ç‚¹å¯ä»¥æ³¨æ„çš„ï¼š</p><ol><li><p>å…³äº <code>sscanf()</code>: <code>sscanf(attr-&gt;attr.name, &quot;trip_point_%d_temp&quot;, &amp;trip) != 1</code>, è¿™ä¸ªè°ƒç”¨çš„æ„æ€æ˜¯è¯´ï¼Œ<code>attr-&gt;attr.name</code> ç±»ä¼¼äº <code>trip_point_123_temp</code>, ç„¶åæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ª <code>123</code> æ‹¿å‡ºæ¥å†™è¿› <code>trip</code> ä¸­å»ï¼Œå¹¶è¿”å›å†™å…¥å˜é‡çš„ä¸ªæ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬åªå†™å…¥äº† <code>trip</code>, æ‰€ä»¥å†™å…¥æˆåŠŸçš„è¯å°±è¿”å› <code>1</code>.</p></li><li><p><code>kstrtoint(buf, 10, &amp;temperature)</code> æ˜¯å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸º <code>int</code> æ•´æ•°ï¼Œæˆ‘ä»¬å°† <code>buf</code> ä¸­çš„å€¼ä»¥ 10 è¿›åˆ¶çš„å½¢å¼ä¼ é€’ç»™äº† <code>temperature</code>.</p></li><li><p>è¿”å›çš„é”™è¯¯ç ï¼š <code>#define EINVAL 22</code>; <code>#define EPERM 1;</code></p></li></ol><h3 id="_2-3-trip-point" tabindex="-1"><a class="header-anchor" href="#_2-3-trip-point"><span>2.3. Trip point</span></a></h3><blockquote><p>The binding of the cooling devices to the trip point is left for the user.</p></blockquote><p>è§¦å‘ç‚¹ç”± Thermal Zone ç»´æŠ¤ï¼Œæ¯ä¸ª Thermal Zone å¯ä»¥ç»´æŠ¤å¤šä¸ª Trip Point, å…¶åŒ…å«çš„ä¿¡æ¯æœ‰ï¼š</p><ul><li><p>temp: å½“å‰æ¸©åº¦</p></li><li><p>type: ç±»å‹ï¼Œæœ‰ä»¥ä¸‹æ–¹å¼ï¼špassiveã€activeã€hotã€critical</p></li><li><p>cooling device: ç»‘å®šä¿¡æ¯ã€‚</p><p>è¿™ä¸ªç»‘å®šä¿¡æ¯æŒ‡çš„æ˜¯ Trip Point å’Œ cooling device çš„ç»‘å®šå…³ç³»ï¼Œå³å½“ Trip Point è§¦å‘åç”±å“ªä¸ª cooling device å»å®æ–½å†·å´æªæ–½ã€‚æ¯ä¸ª Trip Point è¦ä¸ cooling device ç»‘å®šï¼Œæ‰æœ‰å…¶å®é™…æ„ä¹‰ã€‚</p><p>cooling device æ˜¯å®é™…å¯¹ç³»ç»Ÿå®æ–½å†·å´æªæ–½çš„é©±åŠ¨ï¼Œæ˜¯æ¸©æ§çš„æ‰§è¡Œè€…ã€‚cooling device ç»´æŠ¤ä¸€ä¸ª cooling ç­‰çº§ state, state è¶Šé«˜åˆ™è¡¨ç¤ºç³»ç»Ÿçš„å†·å´éœ€æ±‚è¶Šé«˜ï¼ˆæ³¨æ„åˆ° cooling device åªæ ¹æ® state è¿›è¡Œå†·å´æ“ä½œï¼‰ã€‚</p><p>ğŸ¤”ğŸ¤”ğŸ¤” state è¿™ä¸ªå–å€¼æ˜¯ç”±è°å†³å®šçš„ï¼Ÿstate çš„è®¡ç®—ç”± Thermal Governor å®Œæˆã€‚</p></li></ul><h3 id="_2-4-source-code" tabindex="-1"><a class="header-anchor" href="#_2-4-source-code"><span>2.4. Source Code</span></a></h3><p>dts çš„é…ç½®ï¼š</p><div class="language-dts line-numbers-mode" data-highlighter="shiki" data-ext="dts" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span>thermal-zones {</span></span>
<span class="line"><span>    cpu_thermal_zone {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        polling-delay-passive = &lt;1000&gt;; //è¶…è¿‡é˜€å€¼è½®è¯¢æ—¶é—´</span></span>
<span class="line"><span>        polling-delay = &lt;2000&gt;; //æœªè¶…é˜€å€¼è½®è¯¢æ—¶é—´</span></span>
<span class="line"><span>        thermal-sensors = &lt;&amp;ths_combine0 0&gt;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        trips {</span></span>
<span class="line"><span>            cpu_trip0:t0 {</span></span>
<span class="line"><span>                temperature = &lt;70&gt;;</span></span>
<span class="line"><span>                type = &quot;passive&quot;;</span></span>
<span class="line"><span>                hysteresis = &lt;0&gt;;</span></span>
<span class="line"><span>            };</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç ä¸ºæ‹·è´è¿‡æ¥çš„ï¼Œå…·ä½“çš„ç†è§£ï¼Œç›®å‰å¦‚ä¸‹ï¼š</p><ol><li>è½®è¯¢æ—¶é—´æœ‰ 2 ä¸ªï¼Œå¦‚æœè¶…è¿‡äº†æ¸©åº¦é˜ˆå€¼ï¼Œåˆ™ç¼©çŸ­è½®è¯¢çš„æ—¶é—´ã€‚</li><li>@todo</li></ol><h2 id="_3-thermal-governal" tabindex="-1"><a class="header-anchor" href="#_3-thermal-governal"><span>3. Thermal Governal</span></a></h2><p>Thermal Governal æ˜¯é™æ¸©ç­–ç•¥çš„ä¸€ä¸ªæŠ½è±¡ï¼Œä¸ cpufreq çš„ governal æ¦‚å¿µç±»ä¼¼ã€‚</p><p>å†…æ ¸å®ç°çš„ç­–ç•¥å®šä¹‰å¦‚ä¸‹ï¼š</p><p>(ä»…ä»…ä¸¾ä¾‹ç”¨ï¼Œä¸æ˜¯æœ€æ–°çš„ä»£ç å®ç°ï¼ŒåºŸå¼ƒ)</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_governor </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        char</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9FF;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">THERMAL_NAME_LENGTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">        /* ç­–ç•¥å‡½æ•° */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">throttle</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> list_head governor_list</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-thermal-cooling-device" tabindex="-1"><a class="header-anchor" href="#_4-thermal-cooling-device"><span>4. Thermal Cooling Device</span></a></h2><p>Thermal Cooling Device æ˜¯å¯ä»¥é™æ¸©è®¾å¤‡çš„æŠ½è±¡ï¼Œå¦‚é£æ‰‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜ä¼šåŒ…æ‹¬CPUã€GPU è¿™äº›ï¼Œå¦‚ä½•ç†è§£å‘¢ï¼Ÿ</p><p>æ•£çƒ­çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åŠ å¿«æ•£çƒ­ï¼Œä¸€ç§æ˜¯é™ä½äº§çƒ­é‡ï¼ŒCPUã€GPU å°±æ˜¯åè€…çš„ä½“ç°ã€‚</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    char</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9FF;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">THERMAL_NAME_LENGTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> device device</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> device_node </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">np</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    void</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">devdata</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">    /* cooling device æ“ä½œå‡½æ•° */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    const</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device_ops </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    bool</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> updated</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> /* true if the cooling device does not need update */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> mutex lock</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> /* protect thermal_instances list */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> list_head thermal_instances</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> list_head node</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device_ops </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_max_state</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> unsigned</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> long</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">get_cur_state</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> unsigned</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> long</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">    /* è®¾å®šç­‰çº§ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">set_cur_state</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_cooling_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> unsigned</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> long</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-thermal-core" tabindex="-1"><a class="header-anchor" href="#_5-thermal-core"><span>5. Thermal Core</span></a></h2><p>Thermal Core ä½œä¸ºä¸­æ¢æ³¨å†Œ Governor, æ³¨å†Œ Thermal ç±»ï¼Œå¹¶ä¸”åŸºäº Device Tree æ³¨å†Œ Thermal Zone;</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæä¾› Thermal Zone æ³¨å†Œå‡½æ•°ã€Cooling Device æ³¨å†Œå‡½æ•°ã€æä¾›å°† Cooling è®¾å¤‡ç»‘å®šåˆ° Zone çš„å‡½æ•°ï¼Œä¸€ä¸ª Thermal Zone å¯ä»¥æœ‰å¤šä¸ª Cooling è®¾å¤‡ï¼›</p><p>æä¾›äº†æ ¸å¿ƒå‡½æ•° thermal_zone_device_update ä½œä¸º Thermal ä¸­æ–­å¤„ç†å‡½æ•°å’Œè½®è¯¢å‡½æ•°ï¼Œè½®è¯¢çš„æ—¶å€™ä¼šæ ¹æ®ä¸åŒ Trip Delay è°ƒèŠ‚ã€‚</p><h3 id="_5-1-struct-thermal-governor" tabindex="-1"><a class="header-anchor" href="#_5-1-struct-thermal-governor"><span>5.1. struct thermal_governor</span></a></h3><p>å¯¹äº <code>thermal_governor</code> ç»“æ„ä½“ç»„æˆå¦‚ä¸‹ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> * struct thermal_governor - structure that holds thermal governor information</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">@name</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">:	name of the governor</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">@bind_to_tz:</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> callback called when binding to a thermal zone.  If it</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> *		returns 0, the governor is bound to the thermal zone,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> *		otherwise it fails.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">@unbind_from_tz:</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">	callback called when a governor is unbound from a</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> *			thermal zone.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">@throttle:</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">	callback called for every trip point even if temperature is</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> *		below the trip point temperature</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">@governor_list:</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">	node in thermal_governor_list (in thermal_core.c)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_governor </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	char</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9FF;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">THERMAL_NAME_LENGTH</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">bind_to_tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	void</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">unbind_from_tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	int</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">throttle</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> thermal_zone_device </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">tz</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> trip</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> list_head	governor_list</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>name</code>: thermal governor åç§°</p></li><li><p><code>bind_to_tz</code>: å›è°ƒå‡½æ•°ï¼Œcallback called when binding to a thermal zone. å¦‚æœè¿”å› <code>0</code>, åˆ™ governor ç»‘å®šåˆ° thermal zone æˆåŠŸï¼Œå¦åˆ™å¤±è´¥</p></li><li><p><code>unbind_from_tz</code>: è§£ç»‘å›è°ƒå‡½æ•°</p></li><li><p><code>throttle</code>: callback called for every trip point even if temperature is below the trip point temperature. æ„æ€å°±æ˜¯è¯´ï¼Œæ¯ä¸ªè§¦å‘ç‚¹çš„å›è°ƒï¼Œå³ä½¿æ˜¯æ¸©åº¦ä½äºè§¦å‘ç‚¹æ¸©åº¦ï¼Œä¹Ÿä¼šå›è°ƒè¿™ä¸ªå‡½æ•°; åœ¨æœ‰äº›è§£é‡Šä¸­ï¼Œ<code>throttle</code> è¢«è®¤ä¸ºæ˜¯ç­–ç•¥å‡½æ•°ï¼Œå…¶å‚æ•°ä¼ å…¥ <code>int (*thermal_governor::throttle)</code></p></li><li><p><code>governor_list</code>: governor åˆ—è¡¨</p></li></ul><p><code>list_head</code> ç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> list_head </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">	struct</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> list_head </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-reference" tabindex="-1"><a class="header-anchor" href="#_6-reference"><span>6. Reference</span></a></h2><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p><a href="https://www.it610.com/article/1288705954065489920.htm" target="_blank" rel="noopener noreferrer">Linuxç”µæºç®¡ç†ï¼ˆäº”ï¼‰thermal</a> <a href="#footnote-ref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>`,43))])}const g=t(p,[["render",k]]),c=JSON.parse('{"path":"/linux/kernel/thermal.html","title":"Thermal (1) - Thermal Overview","lang":"zh-CN","frontmatter":{"title":"Thermal (1) - Thermal Overview","date":"2022-04-14T00:00:00.000Z","description":"1. Abstract Linux Thermal æ˜¯ Linux ç³»ç»Ÿä¸‹æ¸©åº¦æ§åˆ¶ç›¸å…³çš„æ¨¡å—ï¼Œä¸»è¦ç”¨æ¥æ§åˆ¶ç³»ç»Ÿè¿è¡Œä¸­èŠ¯ç‰‡äº§ç”Ÿçš„çƒ­é‡ã€‚é…åˆ ic å†…éƒ¨æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œå¯¹ ic æ¸©åº¦è¿›è¡Œç®¡æ§ï¼Œä¿è¯ç³»ç»Ÿç¨³å®šæ€§[1]ã€‚ å…¶åŸºæœ¬çš„æ¶æ„å¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºä¸‹å›¾ï¼š Thermal ä¸­æœ‰ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¸‹æ–‡ä¼šç»“åˆå®šä¹‰çš„ä»£ç å¯¹å…¶è¿›è¡Œåˆ†æã€‚ 2. Thermal Zone Devic...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Thermal (1) - Thermal Overview\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-04-14T00:00:00.000Z\\",\\"dateModified\\":\\"2025-04-09T07:31:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Someone\\",\\"url\\":\\"https://www.weigao.cc\\"}]}"],["meta",{"property":"og:url","content":"https://vueblog.weigao.cc/linux/kernel/thermal.html"}],["meta",{"property":"og:site_name","content":"weigao"}],["meta",{"property":"og:title","content":"Thermal (1) - Thermal Overview"}],["meta",{"property":"og:description","content":"1. Abstract Linux Thermal æ˜¯ Linux ç³»ç»Ÿä¸‹æ¸©åº¦æ§åˆ¶ç›¸å…³çš„æ¨¡å—ï¼Œä¸»è¦ç”¨æ¥æ§åˆ¶ç³»ç»Ÿè¿è¡Œä¸­èŠ¯ç‰‡äº§ç”Ÿçš„çƒ­é‡ã€‚é…åˆ ic å†…éƒ¨æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œå¯¹ ic æ¸©åº¦è¿›è¡Œç®¡æ§ï¼Œä¿è¯ç³»ç»Ÿç¨³å®šæ€§[1]ã€‚ å…¶åŸºæœ¬çš„æ¶æ„å¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºä¸‹å›¾ï¼š Thermal ä¸­æœ‰ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¸‹æ–‡ä¼šç»“åˆå®šä¹‰çš„ä»£ç å¯¹å…¶è¿›è¡Œåˆ†æã€‚ 2. Thermal Zone Devic..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-09T07:31:38.000Z"}],["meta",{"property":"article:published_time","content":"2022-04-14T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-09T07:31:38.000Z"}]]},"git":{"createdTime":1649946760000,"updatedTime":1744183898000,"contributors":[{"name":"chenweigao","username":"chenweigao","email":"297859260@qq.com","commits":8,"url":"https://github.com/chenweigao"},{"name":"weigao chen","username":"","email":"weigao_1995@yeah.net","commits":4},{"name":"weigao","username":"weigao","email":"weigao.cwg","commits":1,"url":"https://github.com/weigao"}]},"readingTime":{"minutes":7.64,"words":2292},"filePathRelative":"linux/kernel/thermal.md","excerpt":"<h2>1. Abstract</h2>\\n<p>Linux Thermal æ˜¯ Linux ç³»ç»Ÿä¸‹æ¸©åº¦æ§åˆ¶ç›¸å…³çš„æ¨¡å—ï¼Œä¸»è¦ç”¨æ¥æ§åˆ¶ç³»ç»Ÿè¿è¡Œä¸­èŠ¯ç‰‡äº§ç”Ÿçš„çƒ­é‡ã€‚é…åˆ ic å†…éƒ¨æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œå¯¹ ic æ¸©åº¦è¿›è¡Œç®¡æ§ï¼Œä¿è¯ç³»ç»Ÿç¨³å®šæ€§<sup class=\\"footnote-ref\\"><a href=\\"#footnote1\\">[1]</a><a class=\\"footnote-anchor\\" id=\\"footnote-ref1\\"></a></sup>ã€‚</p>\\n<p>å…¶åŸºæœ¬çš„æ¶æ„å¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºä¸‹å›¾ï¼š</p>\\n<p>Thermal ä¸­æœ‰ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¸‹æ–‡ä¼šç»“åˆå®šä¹‰çš„ä»£ç å¯¹å…¶è¿›è¡Œåˆ†æã€‚</p>\\n<h2>2. Thermal Zone Device</h2>","autoDesc":true}');export{g as comp,c as data};
