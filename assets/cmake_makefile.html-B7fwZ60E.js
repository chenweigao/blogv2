import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as e}from"./app-11Vuyqh7.js";const l={};function h(k,i){return e(),a("div",null,i[0]||(i[0]=[n(`<h1 id="makefile" tabindex="-1"><a class="header-anchor" href="#makefile"><span>Makefile</span></a></h1><h2 id="abstract" tabindex="-1"><a class="header-anchor" href="#abstract"><span>Abstract</span></a></h2><p>æˆ‘ä»¬å¯¹ makefile çš„ç›®æ ‡æ˜¯ï¼Œèƒ½è¯»æ‡‚å¤§å‹é¡¹ç›®ä¸­çš„ makefile, èƒ½å†™ç®€å•çš„ makefile.</p><h2 id="åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ"><span>åŸºç¡€æ¦‚å¿µ</span></a></h2><p>ä»€ä¹ˆæ˜¯ makefile?<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup> ä»€ä¹ˆæ˜¯ make å‘½ä»¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£è¿™äº›åŸºç¡€æ¦‚å¿µã€‚make å‘½ä»¤åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª makefile, å»å‘Šè¯‰ make ç¨‹åºå¦‚ä½•ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚</p><h3 id="makefile-çš„è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#makefile-çš„è§„åˆ™"><span>makefile çš„è§„åˆ™</span></a></h3><p>å…ˆçœ‹ä¸€æ®µç®€å•çš„ä¾‹å­ï¼š</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">target</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> prerequisites ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    command</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>target â€¦</p><p>è¿™ä¸ªå¯ä»¥æ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ ‡ç­¾ã€‚<em>â€¦</em> è¡¨ç¤º target å¯ä»¥æœ‰å¤šä¸ª</p></li><li><p>prerequisites ...</p><p>ç”Ÿæˆè¯¥ target çš„ä¾èµ–é¡¹</p></li><li><p>commad</p><p>å‘½ä»¤ã€‚æ³¨æ„åˆ°å¯ä»¥æ˜¯ä»»æ„å‘½ä»¤ï¼Œæ­£å¸¸è€Œè¨€ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>gcc</code> æˆ–è€… <code>g++</code> è¿™äº›å‘½ä»¤ï¼Œä½†æ˜¯å¦‚æœä½ è¦åœ¨è¿™è¾¹å†™ä»€ä¹ˆ <code>cd</code>, <code>ls</code> å‘½ä»¤ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå³ä»»æ„çš„ shell å‘½ä»¤ï¼Œä½†æ˜¯æ³¨æ„åˆ°æˆ‘ä»¬çš„å‘½ä»¤æ˜¯è¦æœåŠ¡äº target çš„</p></li></ol><h3 id="hello-world" tabindex="-1"><a class="header-anchor" href="#hello-world"><span>Hello world</span></a></h3><p>å¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼ˆå…³äº Makefile çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒè¿™ä¸ª<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup>ï¼‰ï¼š</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">edit</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.o kbd.o command.o display.o </span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        insert.o search.o files.o utils.o</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -o edit main.o kbd.o command.o display.o \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        insert.o search.o files.o utils.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.c defs.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -c main.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">kbd.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> kbd.c defs.h command.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -c kbd.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">command.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> command.c defs.h command.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -c command.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">display.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> display.c defs.h buffer.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -c display.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">insert.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> insert.c defs.h buffer.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -c insert.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">search.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> search.c defs.h buffer.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -c search.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">files.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> files.c defs.h buffer.h command.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -c files.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">utils.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> utils.c defs.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -c utils.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">clean</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    rm edit main.o kbd.o command.o display.o \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        insert.o search.o files.o utils.o</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æš‚ä¸”æŠŠå…¶å«åš makefile çš„ hello world ç¨‹åºï¼Œæš‚ä¸”ä¸ç”¨å…³å¿ƒå…¶ä¸­çš„æ–‡ä»¶ç»†èŠ‚ã€‚ä¸Šè¿°ä»£ç éœ€è¦äº§ç”Ÿ <code>edit</code> è¿™ä¸ª target, ä½†æ˜¯è¿™ä¸ª target ä¾èµ–äº†è‹¥å¹²ä¸ª <code>.o</code>, å…¶ç”Ÿæˆçš„å‘½ä»¤å°±æ˜¯ç¬¬ 3 è¡Œçš„å‘½ä»¤ï¼Œæ³¨æ„åˆ°è¡Œæ•°å¤ªé•¿çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥è¿›è¡Œæ¢è¡Œã€‚</p><p>æ³¨æ„åˆ°å› ä¸º edit ä¾èµ–äº†å¾ˆå¤š <code>.o</code>, æ‰€ä»¥æˆ‘ä»¬è¦å¯¹è¿™äº›ä¾èµ–çš„é€ä¸€ç”Ÿæˆï¼Œä»¥ <code>main.o</code> ä¸ºä¾‹ï¼ˆä»£ç ç¬¬ 6 è¡Œï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºç”Ÿæˆ <code>main.o</code> çš„ç”Ÿæˆä¾èµ–äº <code>main.c</code> å’Œ <code>defs.h</code>, æ‰€ä»¥æˆ‘ä»¬æŠŠè¿™ä¸ªå†™åˆ°åé¢æ¥ï¼Œè¿™ä¸ªä¾‹å­ä¸­çš„æ–‡ä»¶ç»“æ„å¯ä»¥çœ‹åˆ°çš„è¯ï¼Œè‚¯å®šæ˜¯ <code>main.c</code> å’Œ <code>defs.h</code> åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬å®é™…ç”Ÿäº§ä¸­é‡åˆ°çš„ç»“æ„ä¸€èˆ¬éƒ½ä¸ä¼šè¿™ä¹ˆç®€å•ï¼Œåé¢ä¾‹å­æˆ‘ä»¬å°†åˆ†æå¤æ‚çš„å½¢å¼ã€‚</p><p><code>clean</code> å‘½ä»¤å°±æ˜¯è¯´æˆ‘ä»¬æŠŠç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œä¸€ä¸ªæ¶ˆé™¤ï¼Œä¸è¦ <code>xxx.o</code> è¿™ä¸ªç›®æ ‡æ–‡ä»¶äº†ï¼Œåšä¸€ä¸ªæ¸…ç†çš„å·¥ä½œã€‚é¢å¤–ä¸€æï¼Œæˆ‘ä»¬è¿™ä¸ª clean ä¸æ˜¯ä¸€ä¸ª target, å…¶å†’å·åä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œå¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€ä¸ªåŠ¨ä½œçš„åå­—ã€‚</p><h3 id="makefile-å˜é‡" tabindex="-1"><a class="header-anchor" href="#makefile-å˜é‡"><span>makefile å˜é‡</span></a></h3><p>æˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼Œä¸Šé¢çš„ä¾‹å­å¤ªéº»çƒ¦äº†ï¼Œæ¯”å¦‚è¯´ï¼š</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">edit</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.o kbd.o command.o display.o </span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        insert.o search.o files.o utils.o</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    cc -o edit main.o kbd.o command.o display.o \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        insert.o search.o files.o utils.o</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™å‡ è¡Œä»£ç é‡Œé¢ï¼Œè¿™å‡ ä¸ª <code>xxx.o</code> æ–‡ä»¶å°±è¢«ä¸€ç›´ä½¿ç”¨äº†ï¼Œåé¢å¦‚æœæˆ‘ä»¬è¦æ–°å¢ä¾èµ–é¡¹ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªåœ°æ–¹éƒ½éœ€è¦æ”¹ï¼Œä¸‡ä¸€æ¼äº†æ²¡æ”¹ï¼Œé‚£å²‚ä¸æ˜¯æ‚²å‰§äº†ï¼Ÿæ‰€ä»¥è¯´æˆ‘ä»¬æå‡ºäº†<strong>å˜é‡</strong>è¿™ä¸ªæ¦‚å¿µï¼Œå…¶å’Œç¼–ç¨‹è¯­è¨€ä¸­çš„å˜é‡æ¦‚å¿µç±»ä¼¼ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸º C è¯­è¨€ä¸­çš„å®ã€‚</p><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡ï¼š</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.o kbd.o command.o display.o </span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">     insert.o search.o files.o utils.o</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®æˆ˜-makefile" tabindex="-1"><a class="header-anchor" href="#å®æˆ˜-makefile"><span>å®æˆ˜ Makefile</span></a></h2><h3 id="æ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#æ¦‚è§ˆ"><span>æ¦‚è§ˆ</span></a></h3><p>é€šè¿‡æœ¬ç« èŠ‚å¾ˆå¤šä¾‹å­ï¼Œæˆ‘ä»¬åœ¨å®é™…çš„ç¯å¢ƒä¸­è¿›è¡Œç¼–è¯‘ï¼Œç„¶ååšç»†å¾®çš„ä¿®æ”¹ã€‚å¸Œæœ›é€šè¿‡è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŒæ¡ makefile çš„åŸºæœ¬ç”¨æ³•ï¼Œä¹Ÿä¼šä¿®æ”¹é¡¹ç›®ä¸­çš„ makefile, å¹¶æœ€ç»ˆä½¿ç¼–è¯‘é€šè¿‡ã€‚</p><h3 id="å•æ–‡ä»¶å¤¹ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å•æ–‡ä»¶å¤¹ä¾‹å­"><span>å•æ–‡ä»¶å¤¹ä¾‹å­</span></a></h3><h4 id="hello-world-1" tabindex="-1"><a class="header-anchor" href="#hello-world-1"><span>hello world</span></a></h4><p>æˆ‘ä»¬å…ˆå‡†å¤‡ä¸€ä¸ªå¾ˆç®€å•çš„ C ç¨‹åº <code>main.c</code>ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-weight:inherit;--shiki-dark:#5E81AC;--shiki-dark-font-weight:bold;">#</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">include</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#8FBCBB;">stdio.h</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">        printf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">hello makefile 01</span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæ‰§è¡Œæœ€ç®€å•çš„ <code>g++</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> g++</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ./a.out</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">hello</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> makefile</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 01</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å°†å…¶æ”¹é€ æˆ makfile çš„å½¢å¼ï¼Œå…¶æ–‡ä»¶æ ‘ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> tree</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">                                                                                                                                 </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> makefile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ makefile çš„å†…å®¹ä¸ºï¼š</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;"> $(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        cc -o test </span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">$(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        cc -c main.c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">.PHONY</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> clean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">clean</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        rm test </span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">$(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œé¢æœ‰å‡ ç‚¹æ˜¯éœ€è¦æ³¨æ„çš„ï¼š</p><ol><li><p>ç¬¬ 6 è¡Œæˆ‘ä»¬æŒ‡å®šäº† main.o ç”Ÿæˆæ‰€éœ€è¦çš„ä¾èµ–ï¼Œè¿™ä¸ªä¸æŒ‡å®šçš„è¯ä¼šæŠ¥å¤±è´¥çš„ã€‚</p></li><li><p>ç¬¬ 7 è¡Œæˆ‘ä»¬ä½¿ç”¨äº† <code>cc</code> ç”¨äºç¼–è¯‘ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>g++</code>:</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;"> $(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        g++ -o test </span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">$(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        g++ -c main.c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">.PHONY</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> clean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">clean</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        rm test </span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">$(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ›‘ğŸ›‘æ‹“å±•å®éªŒğŸ›‘ğŸ›‘ ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ 7 è¡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>g++ -c main.c -o main.o</code>, ä½†æ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šï¼Œä¹Ÿç¼–è¯‘å‡ºæ¥äº† <code>main.o</code>, è¯´æ˜è¿™ä¸ªå¯èƒ½æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸ºæ­¤æˆ‘ä»¬å°è¯•ä¸€ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> g++</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  main.o</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  makefile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯è‡ªåŠ¨æ¨å¯¼äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸æŒ‡å®š <code>-c</code> çš„è¯ï¼Œå°±ä¸ä¼šè‡ªåŠ¨æ¨å¯¼ï¼Œ è€Œæ˜¯ä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œçš„ <code>a.out</code>ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> g++</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">a.out</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  main.c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  makefile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>clean å‘½ä»¤ç”¨äºæ¸…é™¤ make ç”Ÿæˆçš„é‚£äº›æ–‡ä»¶ï¼Œç›´æ¥æ‰§è¡Œ <code>make clean</code> å³å¯</p></li><li><p><code>.PHONY</code> è¡¨ç¤º <code>clean</code> æ˜¯ä¸ªä¼ªç›®æ ‡æ–‡ä»¶ã€‚</p></li></ol><p>æˆ‘ä»¬æ‰§è¡Œ <code>make</code> å‘½ä»¤ï¼Œå…¶è¾“å‡ºå¯ä»¥å‚è€ƒï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> make</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">                                                                                                                                 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">cc</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">cc</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.o</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»è¿™ä¸ªé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œmake å‘½ä»¤ä¸€å…±æ‰§è¡Œäº† 2 æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯å…ˆç”Ÿæˆ <code>main.o</code>, ç„¶åå†ç”Ÿæˆ target <code>test</code>.</p><h4 id="è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶"><span>è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶</span></a></h4><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨çš„éƒ½ä¸æ˜¯æ ‡å‡†åº“çš„å¤´æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šè‡ªå·±å†™å¤´æ–‡ä»¶ï¼Œç„¶åå¼•ç”¨ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œmakefile è¯¥æ€ä¹ˆç¼–å†™å‘¢ï¼Ÿ</p><p>å…ˆç»™å‡ºä¸€ä¸ªç®€å•çš„å¤´æ–‡ä»¶ <code>zhanshen.h</code>:</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> add</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;"> x</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;"> y</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> y</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªå¤´æ–‡ä»¶ä¸­å®šä¹‰äº†æœ€ç®€å•çš„ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨ <code>main.c</code> ä¸­è°ƒç”¨ä¸€ä¸‹è¿™ä¸ªï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-weight:inherit;--shiki-dark:#5E81AC;--shiki-dark-font-weight:bold;">#</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">include</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#8FBCBB;">stdio.h</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-weight:inherit;--shiki-dark:#5E81AC;--shiki-dark-font-weight:bold;">#</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">include</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">zhanshen.h</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">        printf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">hello makefile 01</span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> res </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> add</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">        printf</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">zhanshen sum 1+2=</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;">%d</span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> res</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åä½¿ç”¨æœ€ç®€å•çš„æ–¹å¼éªŒè¯ä¸€ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> g++</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">a.out</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  main.c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  makefile</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  zhanshen.h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ./a.out</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">                                                                   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">hello</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> makefile</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 01</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">zhanshen</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> sum</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> 1+2=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;">3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå…¶å®æˆ‘ä»¬çš„ makefile ä¸éœ€è¦åšä»»ä½•çš„ä¿®æ”¹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºæ˜¯åœ¨åŒä¸€ä¸ªè·¯å¾„ä¸‹é¢çš„ï¼Œæ‰€ä»¥è‡ªå·±å°±æ‰¾åˆ°äº†ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">g++</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">g++</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  main.o</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  makefile</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  test</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  zhanshen.h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ./tes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">hello</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> makefile</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 01</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">zhanshen</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> sum</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> 1+2=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;">3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¤šæ–‡ä»¶å¤¹ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å¤šæ–‡ä»¶å¤¹ä¾‹å­"><span>å¤šæ–‡ä»¶å¤¹ä¾‹å­</span></a></h3><h4 id="ä¾‹å­01" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­01"><span>ä¾‹å­01</span></a></h4><p>ä½†æ˜¯åœ¨æ—¥å¸¸çš„ç”Ÿäº§æ´»åŠ¨ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å¤šæ–‡ä»¶å¤¹çš„ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦ç ”ç©¶ã€‚</p><p>æˆ‘ä»¬çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> include</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">   \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> zhanshen.h</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> makefile</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> directory,</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æŠŠä¸Šç« èŠ‚çš„ä¾‹å­ä¸­çš„ <code>zhanshen.h</code> ç§»åˆ°äº†æ–°å»ºçš„ <code>include</code> æ–‡ä»¶å¤¹ä¸­å»äº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ‰§è¡Œ <code>make</code> å‘½ä»¤è§‚å¯Ÿä¸€ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> make</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">g++</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.c:2:10:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> fatal</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> error:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> zhanshen.h:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> such</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> directory</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> #include &quot;zhanshen.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">          ^~~~~~~~~~~~</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">compilation</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> terminated.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">makefile:7:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> recipe</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> target</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">main.o</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> failed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">make:</span><span style="--shiki-light:#005CC5;--shiki-dark:#81A1C1;"> ***</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> [main.o] Error 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾ˆæ˜æ˜¾ï¼Œæ‰¾ä¸åˆ°äº†å¤´æ–‡ä»¶äº†ï¼Œæ­¤æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä¿®æ”¹ makefie:</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;"> $(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        g++ -o test </span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">$(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        g++ -c main.c -I include</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">.PHONY</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> clean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">clean</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        rm test </span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">$(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡ç‚¹åœ¨ç¬¬ 7 è¡Œï¼Œæˆ‘ä»¬å¢åŠ äº† <code>-I</code> é€‰é¡¹ï¼Œåé¢è·Ÿéšäº†æˆ‘ä»¬ <code>zhanshen.h</code> æ‰€åœ¨çš„ç›®å½•ï¼Œè¿™æ · makefile å°±èƒ½è‡ªå·±å» <code>include</code> æ–‡ä»¶å¤¹ä¸‹é¢æ‰¾åˆ° <code>zhanshen.h</code> äº†ã€‚</p><h4 id="ä¾‹å­02" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­02"><span>ä¾‹å­02</span></a></h4><p>åœ¨æ—¥å¸¸çš„ç”Ÿäº§ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šåœ¨å¤´æ–‡ä»¶ä¸­å»å®šä¹‰å‡½æ•°ï¼ˆæ¥å£ï¼‰çš„å…·ä½“å®ç°ï¼Œå¤´æ–‡ä»¶åªæ˜¯ç”¨ä½œä¸€ä¸ªç”³æ˜çš„ä½œç”¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ä»£ç ç»“æ„å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> include</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> zhanshen.c</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">   \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> zhanshen.h</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> makefile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–°å¢çš„ <code>zhanshen.c</code> å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-weight:inherit;--shiki-dark:#5E81AC;--shiki-dark-font-weight:bold;">#</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">include</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">zhanshen.h</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> add</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;"> x</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;"> y</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> y</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹åçš„ <code>zhanshen.h</code> å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-weight:inherit;--shiki-dark:#5E81AC;--shiki-dark-font-weight:bold;">#ifndef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> __SUM_H__</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-weight:inherit;--shiki-dark:#5E81AC;--shiki-dark-font-weight:bold;">#</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> __SUM_H__</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> add</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;"> x</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> int</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;"> y</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-weight:inherit;--shiki-dark:#5E81AC;--shiki-dark-font-weight:bold;">#endif</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶æˆ‘ä»¬æ‰§è¡Œ <code>make</code> å‘½ä»¤ä¼šæŠ¥é”™ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> make</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">g++</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> main.o</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.o:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> In</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> function</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main&#39;:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.c:(.text+0x1f): undefined reference to \`add(int, int)&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">collect2:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> error: ld returned </span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> exit status</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">makefile:4:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> recipe for target </span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">test</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> failed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">make:</span><span style="--shiki-light:#005CC5;--shiki-dark:#81A1C1;"> ***</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> [test] Error 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆè¿™ä¸ªé”™è¯¯æŠ˜ç£¨äº†æˆ‘å¥½å‡ å¤©ï¼Œéƒé—·ï¼Œå¤ªèœäº†ï¼Œéƒé—·ï¼‰</p><p>è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œå¯¹ makefile è¿›è¡Œæ”¹é€ ï¼š</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.o zhanshen.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;"> $(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        g++ -o test </span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">$(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">main.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> main.c include/zhanshen.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        g++ -c main.c -I include</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">zhanshen.o</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        g++ -c include/zhanshen.c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">.PHONY</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> clean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">clean</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        rm test </span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">$(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">objects</span><span style="--shiki-light:#032F62;--shiki-dark:#81A1C1;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="problems" tabindex="-1"><a class="header-anchor" href="#problems"><span>Problems</span></a></h2><p>è¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³çš„ï¼Œåœ¨è¿™åˆ—ä¸¾å‡ºæ¥ï¼š</p><ol><li>å…¨å±€è·¨æ–‡ä»¶å¤¹å¦‚ä½•å¼•ç”¨ï¼Ÿ</li><li>å˜é‡çš„åº”ç”¨</li><li>æ“ä½œç¬¦</li></ol><h2 id="reference" tabindex="-1"><a class="header-anchor" href="#reference"><span>Reference</span></a></h2><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p><a href="https://seisman.github.io/how-to-write-makefile/index.html" target="_blank" rel="noopener noreferrer">è·Ÿæˆ‘ä¸€èµ·å†™Makefile</a> <a href="#footnote-ref1" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote2" class="footnote-item"><p><a href="https://github.com/TheNetAdmin/Makefile-Templates.git" target="_blank" rel="noopener noreferrer">Makefile-Templates GitHub</a> <a href="#footnote-ref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>`,77)]))}const d=s(l,[["render",h]]),r=JSON.parse('{"path":"/linux/basic/cmake_makefile.html","title":"Makefile","lang":"zh-CN","frontmatter":{"description":"Makefile Abstract æˆ‘ä»¬å¯¹ makefile çš„ç›®æ ‡æ˜¯ï¼Œèƒ½è¯»æ‡‚å¤§å‹é¡¹ç›®ä¸­çš„ makefile, èƒ½å†™ç®€å•çš„ makefile. åŸºç¡€æ¦‚å¿µ ä»€ä¹ˆæ˜¯ makefile?[1] ä»€ä¹ˆæ˜¯ make å‘½ä»¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£è¿™äº›åŸºç¡€æ¦‚å¿µã€‚make å‘½ä»¤åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª makefile, å»å‘Šè¯‰ make ç¨‹åºå¦‚ä½•ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚ mak...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Makefile\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-02-28T13:43:28.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Someone\\",\\"url\\":\\"https://www.weigao.cc\\"}]}"],["meta",{"property":"og:url","content":"https://vueblog.weigao.cc/linux/basic/cmake_makefile.html"}],["meta",{"property":"og:site_name","content":"weigao"}],["meta",{"property":"og:title","content":"Makefile"}],["meta",{"property":"og:description","content":"Makefile Abstract æˆ‘ä»¬å¯¹ makefile çš„ç›®æ ‡æ˜¯ï¼Œèƒ½è¯»æ‡‚å¤§å‹é¡¹ç›®ä¸­çš„ makefile, èƒ½å†™ç®€å•çš„ makefile. åŸºç¡€æ¦‚å¿µ ä»€ä¹ˆæ˜¯ makefile?[1] ä»€ä¹ˆæ˜¯ make å‘½ä»¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£è¿™äº›åŸºç¡€æ¦‚å¿µã€‚make å‘½ä»¤åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª makefile, å»å‘Šè¯‰ make ç¨‹åºå¦‚ä½•ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚ mak..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-02-28T13:43:28.000Z"}],["meta",{"property":"article:modified_time","content":"2023-02-28T13:43:28.000Z"}]]},"git":{"createdTime":1652515419000,"updatedTime":1677591808000,"contributors":[{"name":"weigao chen","username":"","email":"weigao_1995@yeah.net","commits":4},{"name":"chenweigao","username":"chenweigao","email":"297859260@qq.com","commits":1,"url":"https://github.com/chenweigao"}]},"readingTime":{"minutes":6.69,"words":2007},"filePathRelative":"linux/basic/cmake_makefile.md","excerpt":"\\n<h2>Abstract</h2>\\n<p>æˆ‘ä»¬å¯¹ makefile çš„ç›®æ ‡æ˜¯ï¼Œèƒ½è¯»æ‡‚å¤§å‹é¡¹ç›®ä¸­çš„ makefile, èƒ½å†™ç®€å•çš„ makefile.</p>\\n<h2>åŸºç¡€æ¦‚å¿µ</h2>\\n<p>ä»€ä¹ˆæ˜¯ makefile?<sup class=\\"footnote-ref\\"><a href=\\"#footnote1\\">[1]</a><a class=\\"footnote-anchor\\" id=\\"footnote-ref1\\"></a></sup> ä»€ä¹ˆæ˜¯ make å‘½ä»¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£è¿™äº›åŸºç¡€æ¦‚å¿µã€‚make å‘½ä»¤åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª makefile, å»å‘Šè¯‰ make ç¨‹åºå¦‚ä½•ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚</p>","autoDesc":true}');export{d as comp,r as data};
