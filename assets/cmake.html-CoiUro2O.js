import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,d as a,o as n}from"./app-11Vuyqh7.js";const l={};function t(h,i){return n(),e("div",null,i[0]||(i[0]=[a(`<h1 id="cmake" tabindex="-1"><a class="header-anchor" href="#cmake"><span>CMake</span></a></h1><h2 id="abstract" tabindex="-1"><a class="header-anchor" href="#abstract"><span>Abstract</span></a></h2><p>æ C è¿˜æ˜¯ç¦»ä¸å¼€è¿™ä¸ªå•Šï¼Œå†æ€ä¹ˆè¿˜æ˜¯è¦ç ”ç©¶ä¸€ä¸‹çš„ï¼Œæœ¬æ–‡å‚è€ƒä»¥ä¸‹æ¯”è¾ƒå¥½çš„æ–‡æ¡£ï¼š</p><ol><li>CMake Examples<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>, GitHub ä¸Šçš„ CMake ä¾‹å­ï¼›</li><li>CMake Tutorial<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup>, å®˜æ–¹æ–‡æ¡£</li></ol><h2 id="concepts" tabindex="-1"><a class="header-anchor" href="#concepts"><span>Concepts</span></a></h2><table><thead><tr><th>Concepts</th><th>Means</th><th></th></tr></thead><tbody><tr><td>CMakeLists.txt</td><td>è¿™ä¸ªæ–‡ä»¶æ˜¯å­˜å‚¨æ‰€æœ‰ CMake å‘½ä»¤çš„æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸ªæ–‡ä»¶çš„åç§°ï¼š<code>CMakeLists.txt</code> ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ã€‚</td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h2 id="argument" tabindex="-1"><a class="header-anchor" href="#argument"><span>Argument</span></a></h2><h3 id="verbose" tabindex="-1"><a class="header-anchor" href="#verbose"><span>Verbose</span></a></h3><p>æˆ‘ä»¬å¯ä»¥è®¾ç½® make æ—¶å€™ debug ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> clean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> VERBOSE=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="destdir" tabindex="-1"><a class="header-anchor" href="#destdir"><span>DESTDIR</span></a></h3><p>è¿™ä¸ªå¯ä»¥ç”¨æ¥è®¾ç½® CMAKE_INSTALL_PREFIX çš„ä½ç½®ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">make install DESTDIR=/tmp/stage</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="env" tabindex="-1"><a class="header-anchor" href="#env"><span>ENV</span></a></h2><p>ä»‹ç»å‡ ä¸ªç¯å¢ƒå˜é‡<sup class="footnote-ref"><a href="#footnote3">[3]</a><a class="footnote-anchor" id="footnote-ref3"></a></sup>ã€‚</p><table><thead><tr><th>Variable</th><th>Means</th><th></th></tr></thead><tbody><tr><td>PROJECT_NAME</td><td>å‘½ä»¤ <code>project (hello_cmake)</code> æ‰§è¡Œåä¼šåˆ›å»ºä¸€ä¸ª å˜é‡ <code>\${PROJECT_NAME}</code>, å…¶å€¼ä¸º <code>hello_cmake</code></td><td></td></tr><tr><td>CMAKE_BINARY_DIR</td><td>æ‰§è¡Œ cmake å‘½ä»¤çš„ root, æˆ–è€… top level çš„æ–‡ä»¶å¤¹ï¼Œåç»­åˆ†æå…³è”è§ <code>Binary Directory</code>ã€‚<br>The root binary / build directory. This is the directory where you ran the cmake command.</td><td></td></tr><tr><td>CMAKE_SOURCE_DIR</td><td>The root source directory</td><td></td></tr><tr><td>CMAKE_CURRENT_SOURCE_DIR</td><td>The current source directory if using sub-projects and directories.</td><td></td></tr><tr><td>CMAKE_CURRENT_BINARY_DIR</td><td>The build directory you are currently in.</td><td></td></tr><tr><td>PROJECT_BINARY_DIR</td><td>The build directory for the current project.</td><td></td></tr><tr><td>CMAKE_INSTALL_PREFIX</td><td><code>make install</code> äº§ç”Ÿï¼Œé»˜è®¤å€¼æ˜¯ <code>/usr/local/</code></td><td></td></tr><tr><td>CMAKE_C_FLAGS</td><td>compile flags</td><td></td></tr><tr><td>CMAKE_CXX_FLAGS</td><td>compile flags</td><td></td></tr><tr><td>xxx_INCLUDE_DIRS</td><td>ä¸‰æ–¹åº“æ‰¾åˆ°çš„è¯å¯¹åº”çš„ä½ç½®<br>A variable pointing to the include directory for the library.</td><td></td></tr><tr><td>xxx_LIBRARY</td><td>A variable pointing to the library path.</td><td></td></tr><tr><td>XXX_FOUND</td><td>æŸä¸ªç¬¬ä¸‰æ–¹åº“æ˜¯å¦æ‰¾åˆ°</td><td></td></tr><tr><td>CMAKE_CXX_STANDARD</td><td>æŒ‡å®š C++ çš„ç‰ˆæœ¬</td><td></td></tr></tbody></table><p>ä»¥åè¿˜ä¼šå¢åŠ ã€‚</p><h3 id="binary-directory" tabindex="-1"><a class="header-anchor" href="#binary-directory"><span>Binary Directory</span></a></h3><blockquote><p>The root or top level folder that you run the cmake command from is known as your <strong>CMAKE_BINARY_DIR</strong> and is the root folder for all your binary files. CMake supports building and generating your binary files both in-place and also out-of-source.</p></blockquote><p>è¿™æ®µè¯è¯´äº†å¯ä»¥åŸåœ° cmake, ä¹Ÿå¯ä»¥åœ¨å¤–é¢ cmake.</p><p>åŸåœ° cmake å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åŸåœ° cmake çš„ç¼ºç‚¹åœ¨äºï¼šä½ çš„æºä»£ç å’Œ Makefiles å’Œç›®æ ‡ä»£ç éƒ½æ··åœ¨ä¸€èµ·äº†(interspersed)</p><p>Out-of-Source cmake å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> build</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> build/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ..</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¢ä¸ªåœ°æ–¹ cmake çš„å¥½å¤„å°±æ˜¯ï¼Œä½ æƒ³é‡æ–° cmake çš„è¯ï¼Œä½ å°±æŠŠç”Ÿæˆçš„é‚£ä¸ªæ–‡ä»¶å¤¹åˆ é™¤äº†ï¼Œå† cmake ä¸€æ¬¡ï¼Œå°± OK äº†ã€‚</p><h2 id="functions" tabindex="-1"><a class="header-anchor" href="#functions"><span>functions</span></a></h2><h3 id="target-include-directories" tabindex="-1"><a class="header-anchor" href="#target-include-directories"><span>target_include_directories</span></a></h3><p>å¦‚æœå­˜åœ¨å¤šä¸ª include æ–‡ä»¶å¤¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>target_include_directories()</code>ï¼Œ å…¶ä½œç”¨ç±»ä¼¼äº <code>-I</code>.</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">target_include_directories</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">target</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#D8DEE9FF;">    PRIVATE</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        \${PROJECT_SOURCE_DIR}</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">/include</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>PRIVATE</code> æ ‡è¯†äº† include çš„ä½œç”¨åŸŸã€‚</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">target_include_directories</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(hello_library</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#D8DEE9FF;">    PUBLIC</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">        \${PROJECT_SOURCE_DIR}</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">/include</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will cause the included directory used in the following places:</p><ul><li>When compiling the library</li><li>When compiling any additional target that links the library.</li></ul><p>å°±æ˜¯è¯´åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šæ‰¾ include ä¸‹é¢çš„ä¸œè¥¿ï¼Œæˆ–è€…æ˜¯å…¶ä»–é“¾æ¥åˆ°è¿™ä¸ª library çš„ä¹Ÿä¼šæ¥è¿™æ‰¾çš„ã€‚</p><h3 id="add-library" tabindex="-1"><a class="header-anchor" href="#add-library"><span>add_library</span></a></h3><blockquote><p>The add_library() function is used to create a library from some source files.</p></blockquote><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">add_library</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(hello_library STATIC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    src/Hello.cpp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç ä¼šåˆ›å»ºå‡ºä¸€ä¸ª <code>hello_library.a</code>.</p><p>é™¤æ­¤ä¹‹å¤–ä¹Ÿæ”¯æŒ shared lib:</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">add_library</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(hello_library SHARED</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    src/Hello.cpp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç ä¼šåˆ›å»ºå‡ºä¸€ä¸ª <code>libhello_library.so</code>.</p><h3 id="target-link-libraries" tabindex="-1"><a class="header-anchor" href="#target-link-libraries"><span>target_link_libraries</span></a></h3><p>æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯é“¾æ¥çš„ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">add_executable</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(hello_binary</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    src/main.cpp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">target_link_libraries</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">( hello_binary</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#D8DEE9FF;">    PRIVATE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        hello_library</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="install" tabindex="-1"><a class="header-anchor" href="#install"><span>install</span></a></h3><blockquote><p>CMake offers the ability to add a <code>make install</code> target to allow a user to install binaries, libraries and other files.</p></blockquote><p>cmake æ”¯æŒè·å–äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®‰è£…çš„ä½ç½®å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ <strong>CMAKE_INSTALL_PREFIX</strong> ä¸­ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">install</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> (TARGETS cmake_examples_inst_bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    DESTINATION bin)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€… lib æ–‡ä»¶(è¾“å‡ºåœ¨ \${CMAKE_INSTALL_PREFIX}/bin)ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">install</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> (TARGETS cmake_examples_inst</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    LIBRARY DESTINATION lib)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…è¯´ç›®å½•ï¼ˆè¾“å‡ºåœ¨ \${CMAKE_INSTALL_PREFIX}/includeï¼‰ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">install</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(DIRECTORY </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">\${PROJECT_SOURCE_DIR}</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">/include/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    DESTINATION include)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…è¯´æ–‡ä»¶ï¼ˆè¾“å‡ºåœ¨ \${CMAKE_INSTALL_PREFIX}/etcï¼‰ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">install</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> (FILES cmake-examples.conf</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    DESTINATION etc)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºè¿™ä¸ªï¼Œæˆ‘ä»¬æ¶‰åŠåˆ°äº†ä½¿ç”¨ <code>make install</code>, æ‰€ä»¥éœ€è¦å†è¯´æ˜ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯¹ä¸Šé¢å­˜åœ¨å››ä¸ª <code>install</code> çš„ CMake æ–‡ä»¶è¿›è¡Œ make,ã€€å…¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> build/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ..</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶å¯¹åº”çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">Install</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> project...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Install</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> configuration:</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Installing:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /usr/local/bin/cmake_examples_inst_bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Set</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> runtime</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> path</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">/usr/local/bin/cmake_examples_inst_bin</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Installing:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /usr/local/lib/libcmake_examples_inst.so</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Up-to-date:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /usr/local/include</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Installing:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /usr/local/include/installing</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Installing:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /usr/local/include/installing/Hello.h</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Installing:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> /usr/local/etc/cmake-examples.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åœ¨æ‰§è¡Œå®Œ <code>sudo make install </code> å‘½ä»¤åä¼šç”Ÿæˆä¸€ä¸ª <code>install_manifest.txt</code> æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">/usr/local/bin/cmake_examples_inst_bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">/usr/local/lib/libcmake_examples_inst.so</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">/usr/local/include/installing/Hello.h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â“â“â“ å¦‚æœè¦çœ‹åˆ°è¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> LD_LIBRARY_PATH=</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">$LD_LIBRARY_PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">:/usr/local/lib</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> cmake_examples_inst_bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">Hello</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Install!</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬è¦æ›´æ”¹ <strong>CMAKE_INSTALL_PREFIX</strong> è¿™ä¸ªç¯å¢ƒå˜é‡çš„é»˜è®¤å€¼çš„è¯ï¼Œå¯ä»¥è¿™ä¹ˆæ“ä½œï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">( CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">  message</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(STATUS </span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">&quot;Setting default CMAKE_INSTALL_PREFIX path to \${CMAKE_BINARY_DIR}/install&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">  set</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9FF;">CMAKE_INSTALL_PREFIX</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> &quot;\${CMAKE_BINARY_DIR}/install&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> STRING</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> &quot;The path to use for make install&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> FORCE)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">endif</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…è¿™æ ·ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">make install DESTDIR=/tmp/stage</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ‰§è¡Œå®Œåï¼Œéœ€è¦è¿›è¡Œå¸è½½ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">sudo xargs rm &lt; install_manifest.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ğŸ§¡ğŸ§¡ğŸ§¡ æˆ‘ä¹‹å‰ä½¿ç”¨äº† <code>make clean</code> ä¼¼ä¹ä¹Ÿè¾¾åˆ°äº†æ•ˆæœï¼Œä½†æ˜¯ä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œlibcmake_examples_inst.so è¿™ä¸ªæ–‡ä»¶æ²¡æœ‰è¢«å¹²æ‰ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦ä½¿ç”¨ä¸Šé¢çš„æ–¹å¼ï¼éœ€è¦æ³¨æ„ã€‚</p><h3 id="target-compile-definitions" tabindex="-1"><a class="header-anchor" href="#target-compile-definitions"><span>target_compile_definitions</span></a></h3><p>target_compile_definitions() è¿™ä¸ªå‡½æ•°å°±æ˜¯ç”¨æ¥è®¾ç½® compile flags çš„ï¼Œæˆ‘ä»¬å¼•ç”¨åŸæ–‡ï¼š</p><p>CMake supports setting compile flags in a number of different ways:</p><ul><li>using target_compile_definitions() function</li><li>using the CMAKE_C_FLAGS and CMAKE_CXX_FLAGS variables.</li></ul><p>ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">target_compile_definitions</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(cmake_examples_compile_flags</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#D8DEE9FF;">    PRIVATE</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> EX3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¼šé€ æˆåœ¨ç¼–è¯‘çš„æ—¶å€™åŠ å…¥å®šä¹‰ EX3.</p><h3 id="find-package" tabindex="-1"><a class="header-anchor" href="#find-package"><span>find_package</span></a></h3><p>å¦‚æœè¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">find_package</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(Boost 1.46.1 REQUIRED COMPONENTS filesystem </span><span style="--shiki-light:#005CC5;--shiki-dark:#D8DEE9FF;">system</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¦‚æœéœ€è¦éªŒè¯æ˜¯å¦æ‰¾åˆ°äº†è¿™ä¸ªåŒ…ï¼Œå¯ä»¥é€šè¿‡ç”Ÿæˆçš„å˜é‡ <code>XXX_FOUND</code> æ¥è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(Boost_FOUND)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    message</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">&quot;boost found&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    include_directories</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">\${Boost_INCLUDE_DIRS}</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    message</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> (FATAL_ERROR </span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">&quot;Cannot find Boost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">endif</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢å‡ºç°äº†ä¸€ä¸ª <code>\${Boost_INCLUDE_DIRS}</code>ï¼Œ åŸç†ç±»ä¼¼ï¼Œå°±æ˜¯æ‰¾åˆ°çš„è¯ï¼Œæˆ‘ä»¬ä¼šç”Ÿæˆä¸€ä¸ªè¿™æ ·çš„å˜é‡ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</p><h3 id="set" tabindex="-1"><a class="header-anchor" href="#set"><span>set</span></a></h3><p>æˆ‘ä»¬å¯ä»¥æŒ‡å®š c++ çš„ç‰ˆæœ¬ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(CMAKE_CXX_STANDARD 11)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å½“ç„¶æˆ‘ä»¬è¿˜æœ‰åŸºç¡€çš„æ–¹æ³•ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(COMPILER_SUPPORTS_CXX11)</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    set</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9FF;">CMAKE_CXX_FLAGS</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> &quot;\${CMAKE_CXX_FLAGS} -std=c++11&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">elseif</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(COMPILER_SUPPORTS_CXX0X)</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    set</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9FF;">CMAKE_CXX_FLAGS</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> &quot;\${CMAKE_CXX_FLAGS} -std=c++0x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">    message</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(STATUS </span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">&quot;The compiler \${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">endif</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="target-compile-features" tabindex="-1"><a class="header-anchor" href="#target-compile-features"><span>target_compile_features</span></a></h3><p>å…¶ç”¨æ³•å¦‚ä¸‹ï¼Œæˆ‘ä»¬è®¾ç½®äº† <code>cxx_auto_type</code> è¿™ä¸ª featureï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">target_compile_features</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(hello_cpp11 </span><span style="--shiki-light:#6F42C1;--shiki-dark:#D8DEE9FF;">PUBLIC</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> cxx_auto_type)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åœ¨æ‰§è¡Œ <code>cmake ..</code> çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“å°ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">&quot;List of compile features: \${CMAKE_CXX_COMPILE_FEATURES}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">List</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> compile</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> features:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> cxx_template_template_parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">cxx_alias_templates</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„æ‰€æœ‰ feature éƒ½æ˜¯ä¿å­˜åœ¨äº† <code>CMAKE_CXX_COMPILE_FEATURES</code> è¿™ä¸ªå˜é‡ä¸­ã€‚</p><h3 id="message" tabindex="-1"><a class="header-anchor" href="#message"><span>message</span></a></h3><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ‰“å°å‡ºä¸€äº›å˜é‡æ¥ç”¨äºè°ƒè¯•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>mesage()</code> æ¥å®ç°ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">cmake_minimum_required</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D8DEE9FF;">VERSION</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> 3.5)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"># Set the project name</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> (hello_cmake)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"># print project name variable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">&quot;project name is \${PROJECT_NAME}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"># Add an executable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">add_executable</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(hello_cmake main.cpp)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">project</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> hello_cmake</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="compiler-option" tabindex="-1"><a class="header-anchor" href="#compiler-option"><span>Compiler Option</span></a></h2><h3 id="clang" tabindex="-1"><a class="header-anchor" href="#clang"><span>clang</span></a></h3><p>CMake exposes options to control the programs used to compile and link your code. These programs include:</p><ul><li>CMAKE_C_COMPILER - The program used to compile c code.</li><li>CMAKE_CXX_COMPILER - The program used to compile c++ code.</li><li>CMAKE_LINKER - The program used to link your binary.</li></ul><p>ï¼ˆå¦‚æœè¦è¿›è¡ŒéªŒè¯ï¼Œé¦–å…ˆå®‰è£… clang: <code>sudo apt-get install clang-3.6</code>ï¼‰</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">cmake .. -DCMAKE_C_COMPILER=clang-3.6 -DCMAKE_CXX_COMPILER=clang++-3.6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ninja" tabindex="-1"><a class="header-anchor" href="#ninja"><span>ninja</span></a></h3><p>æˆ‘ä»¬å¯ä»¥æŒ‡å®šæ„å»ºå·¥å…·è¿›è¡Œæ„å»ºï¼Œå¦‚ ninja:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ..</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -G</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> Ninja</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">CMakeCache.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  CMakeFiles</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  build.ninja</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  cmake_install.cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  hello_cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">  rules.ninja</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sub-projects" tabindex="-1"><a class="header-anchor" href="#sub-projects"><span>Sub Projects</span></a></h2><h3 id="add-subdirectory" tabindex="-1"><a class="header-anchor" href="#add-subdirectory"><span>add_subdirectory</span></a></h3><p>å…¶ç”¨æ³•å¦‚ä¸‹ï¼š</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">add_subdirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(sublibrary1)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">add_subdirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(sublibrary2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">add_subdirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">(subbinary)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†åŠ æ·±ç†è§£ï¼Œæˆ‘ä»¬ç»™å‡ºè¿™ä¸ªå«æœ‰å­ç›®å½•çš„æ–‡ä»¶ç»“æ„ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|-- CMakeLists.txt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|-- README.adoc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|-- subbinary</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|   |-- CMakeLists.txt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|   \`-- main.cpp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|-- sublibrary1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|   |-- CMakeLists.txt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|   |-- include</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|   |   \`-- sublib1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|   |       \`-- sublib1.h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|   \`-- src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">|       \`-- sublib1.cpp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">\`-- sublibrary2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    |-- CMakeLists.txt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">    \`-- include</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">        \`-- sublib2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">            \`-- sublib2.h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå’Œ Cmake æ–‡ä»¶åŒåœ¨ä¸€ä¸ªè·¯å¾„çš„æœ‰ subbinaryï¼Œ subbinary1 å’Œ subbinary2 ä¸‰ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬ add_subdirectory ä½¿ç”¨äº†ä¸‰ä¸ªã€‚</p><p>å…¶æ›´åŠ ç¨³å¦¥çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">EXISTS \${PRJ_TOP_DIR}</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">src</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">  add_subdirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">src</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">endif</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reference" tabindex="-1"><a class="header-anchor" href="#reference"><span>Reference</span></a></h2><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p><a href="https://github.com/ttroy50/cmake-examples" target="_blank" rel="noopener noreferrer">https://github.com/ttroy50/cmake-examples</a> <a href="#footnote-ref1" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote2" class="footnote-item"><p><a href="https://cmake.org/cmake/help/latest/guide/tutorial/index.html" target="_blank" rel="noopener noreferrer">https://cmake.org/cmake/help/latest/guide/tutorial/index.html</a> <a href="#footnote-ref2" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote3" class="footnote-item"><p><a href="https://gitlab.kitware.com/cmake/community/-/wikis/doc/cmake/Useful-Variables" target="_blank" rel="noopener noreferrer">Useful Variables</a> <a href="#footnote-ref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>`,122)]))}const k=s(l,[["render",t]]),p=JSON.parse('{"path":"/linux/basic/cmake.html","title":"CMake","lang":"zh-CN","frontmatter":{"description":"CMake Abstract æ C è¿˜æ˜¯ç¦»ä¸å¼€è¿™ä¸ªå•Šï¼Œå†æ€ä¹ˆè¿˜æ˜¯è¦ç ”ç©¶ä¸€ä¸‹çš„ï¼Œæœ¬æ–‡å‚è€ƒä»¥ä¸‹æ¯”è¾ƒå¥½çš„æ–‡æ¡£ï¼š CMake Examples[1], GitHub ä¸Šçš„ CMake ä¾‹å­ï¼› CMake Tutorial[2], å®˜æ–¹æ–‡æ¡£ Concepts Argument Verbose æˆ‘ä»¬å¯ä»¥è®¾ç½® make æ—¶å€™ debug ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š DEST...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"CMake\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-03-14T15:27:30.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Someone\\",\\"url\\":\\"https://www.weigao.cc\\"}]}"],["meta",{"property":"og:url","content":"https://vueblog.weigao.cc/linux/basic/cmake.html"}],["meta",{"property":"og:site_name","content":"weigao"}],["meta",{"property":"og:title","content":"CMake"}],["meta",{"property":"og:description","content":"CMake Abstract æ C è¿˜æ˜¯ç¦»ä¸å¼€è¿™ä¸ªå•Šï¼Œå†æ€ä¹ˆè¿˜æ˜¯è¦ç ”ç©¶ä¸€ä¸‹çš„ï¼Œæœ¬æ–‡å‚è€ƒä»¥ä¸‹æ¯”è¾ƒå¥½çš„æ–‡æ¡£ï¼š CMake Examples[1], GitHub ä¸Šçš„ CMake ä¾‹å­ï¼› CMake Tutorial[2], å®˜æ–¹æ–‡æ¡£ Concepts Argument Verbose æˆ‘ä»¬å¯ä»¥è®¾ç½® make æ—¶å€™ debug ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š DEST..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-03-14T15:27:30.000Z"}],["meta",{"property":"article:modified_time","content":"2023-03-14T15:27:30.000Z"}]]},"git":{"createdTime":1651830060000,"updatedTime":1678807650000,"contributors":[{"name":"weigao chen","username":"","email":"weigao_1995@yeah.net","commits":2},{"name":"chenweigao","username":"chenweigao","email":"297859260@qq.com","commits":2,"url":"https://github.com/chenweigao"}]},"readingTime":{"minutes":5.43,"words":1630},"filePathRelative":"linux/basic/cmake.md","excerpt":"\\n<h2>Abstract</h2>\\n<p>æ C è¿˜æ˜¯ç¦»ä¸å¼€è¿™ä¸ªå•Šï¼Œå†æ€ä¹ˆè¿˜æ˜¯è¦ç ”ç©¶ä¸€ä¸‹çš„ï¼Œæœ¬æ–‡å‚è€ƒä»¥ä¸‹æ¯”è¾ƒå¥½çš„æ–‡æ¡£ï¼š</p>\\n<ol>\\n<li>CMake Examples<sup class=\\"footnote-ref\\"><a href=\\"#footnote1\\">[1]</a><a class=\\"footnote-anchor\\" id=\\"footnote-ref1\\"></a></sup>, GitHub ä¸Šçš„ CMake ä¾‹å­ï¼›</li>\\n<li>CMake Tutorial<sup class=\\"footnote-ref\\"><a href=\\"#footnote2\\">[2]</a><a class=\\"footnote-anchor\\" id=\\"footnote-ref2\\"></a></sup>, å®˜æ–¹æ–‡æ¡£</li>\\n</ol>","autoDesc":true}');export{k as comp,p as data};
