import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as e,o as n}from"./app-11Vuyqh7.js";const h={};function t(l,i){return n(),a("div",null,i[0]||(i[0]=[e(`<p>Common RDB(Relational Database): PostgreSQL, MySQL, Orcal, MS SQL Server and SQLite.</p><p><code>database</code> –<code>collection</code> – <code>document</code>– <code>field</code> – <code>index</code>.</p><p><a href="http://www.runoob.com/mongodb/mongodb-linux-install.html" target="_blank" rel="noopener noreferrer">Install in LInux</a></p><div class="hint-container tip"><p class="hint-container-title">mongoDB _id</p><p>_id 类型为 ObjectId, 是一个 <strong>12 字节</strong> 的 BSON 类型字符串，按照字节顺序，依次代表：</p><p>4字节：时间戳</p><p>3字节：机器 ID</p><p>2字节：进程 ID</p><p>3字节：计数器</p></div><h2 id="crud" tabindex="-1"><a class="header-anchor" href="#crud"><span>CRUD</span></a></h2><p>CRUD operations create, read, update, and create documents.</p><h3 id="cteate" tabindex="-1"><a class="header-anchor" href="#cteate"><span>Cteate</span></a></h3><ul><li><code>db.collection.insertOne()</code> New in version 3.2</li><li><code>db.collection.insertMany()</code> New in version 3.2</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">db.collection.insertOne(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">	{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">		&quot;name&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">aaa</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">		&quot;age: 26</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">	}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">db.collection.insertMany(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">	[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">		{ ... },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">		{ ... }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">	]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="read" tabindex="-1"><a class="header-anchor" href="#read"><span>Read</span></a></h3><p>Query a collection for document</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">db.collections.find(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">	{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> age:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> {</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> $gt</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 18</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> }</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">).limit(5)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="update" tabindex="-1"><a class="header-anchor" href="#update"><span>Update</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">db.inventory.updateOne(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> item:</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">paper</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">     $set</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">size.uom</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">cm</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> status:</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">P</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;">     $currentdate</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> lastModified:</span><span style="--shiki-light:#005CC5;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"># created filed: </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"># &quot;lastModified&quot; : ISODate(&quot;2018-10-26T08:59:26.038+0000&quot;)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>$set</code> to update the value</li><li><code>$currentDate</code> operator to update the value of the <code>lastModified</code> field to the current date, If lastModified field does not exist, <code>$currentDate </code> will create the field.</li></ul><p>Update many: to update document on inventory where <strong>qty</strong> is less than <strong>50</strong>:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">db.inventory.updateMany(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> &quot;qty&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#88C0D0;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> {</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9;"> $lt</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 50</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> }</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">	   #same as updateOne()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Replace:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">db.inventory.replaceOne(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">	# or updateOne() updateMany()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> item:</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">paperpaper</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> item:</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">paper</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> instock:</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> warehouse:</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">A</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> qty:</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 60</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> },</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> warehouse:</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">B</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> qty:</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 40</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> }</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ]</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">   {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> upsert:</span><span style="--shiki-light:#005CC5;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If there are matching documents, then the <code>upsert</code> operation modifies or replaces the matching document or documents.</p><h3 id="delate" tabindex="-1"><a class="header-anchor" href="#delate"><span>Delate</span></a></h3><p>MongoDb provides the followinng methods to delete documents of a collection:</p><ul><li><code>db.collection.deleteOne()</code></li><li><code>db.collection.deleteMany()</code></li><li><code>db.collection.remove()</code></li></ul><p>Process in terminal:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">./mongo.exe</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> show dbs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> use </span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">db name</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">]</span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;"> #create db</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> db </span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#see db</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> db.createCollection(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">name,</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> options</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">#create collections</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> show collections</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> db.colname.insert({&quot;xx&quot;, &quot;xx&quot;})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> db.collection_name.find</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> db.collection_name.find</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">.pretty</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> #show in formatted</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>batch import <code>.json</code> file:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">mongoimport</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> --db</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> users</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> --collection</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> contacts</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> --file</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> xx.json</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="restore" tabindex="-1"><a class="header-anchor" href="#restore"><span>Restore</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">mongorestore</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -h</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">hostnam</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">e&gt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">:por</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#A3BE8C;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> dbname</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">pat</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><a href="http://www.runoob.com/mongodb/mongodb-mongodump-mongorestore.html" target="_blank" rel="noopener noreferrer">mongodump and mongorestore</a></p><h2 id="flask-pymongo" tabindex="-1"><a class="header-anchor" href="#flask-pymongo"><span>Flask-PyMongo</span></a></h2><p>Install: <code>pip install flask_pymongo</code></p><p>in <code>nginxig.py</code>:</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#8FBCBB;"> Config</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D8DEE9FF;">    MONGO_URI</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">mongodb://localhost:27017/myDatabase</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>in <code>app/___init__.py</code>:</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> flask_pymongo </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> PyMongo</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> config </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">mongo </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#88C0D0;"> PyMongo</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">mono</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#88C0D0;">init_app</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">app</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>in <code>views.py</code>:</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> mongo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#ECEFF4;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D08770;">main</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D08770;">route</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#D8DEE9;"> methods</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">POST</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> index</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">	data </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> mongo</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">mycol</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#88C0D0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#616E88;">	# mycol is the name of collections</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="python-sql" tabindex="-1"><a class="header-anchor" href="#python-sql"><span>Python SQL</span></a></h2><p>Take <code>SQLite3</code> for example:</p><p><code>cur.execute(&quot;CREATE TABLE demo(num int, str varchar(20));&quot;)</code>，DB-API规范，创建<code>cur</code>游标对象用于执行SQL命令。<a href="https://github.com/chenweigao/python_web/blob/master/orm/db_test.py" target="_blank" rel="noopener noreferrer">Source Code</a></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> sqlite3</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#88C0D0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">test.db</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">cur </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> conn</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#88C0D0;">cursor</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">cur</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#88C0D0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">INSERT INTO demo VALUES (</span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">, &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#EBCB8B;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">&#39;)</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">aaa</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sqlite3" tabindex="-1"><a class="header-anchor" href="#sqlite3"><span>SQLite3</span></a></h2><p><a href="http://www.runoob.com/sqlite/sqlite-create-table.html" target="_blank" rel="noopener noreferrer">Create table</a></p><p>format the table:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sqlite</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">.header</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> on</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sqlite</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">.mode</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> column</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sqlite</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">SELECT</span><span style="--shiki-light:#005CC5;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> COMPANY</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>update:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">sqlite</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">UPDATE</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> COMPANY</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> SET</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ADDRESS</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;">Texas</span><span style="--shiki-light:#032F62;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 6</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> update</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> users</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> confirmed</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> where</span><span style="--shiki-light:#032F62;--shiki-dark:#A3BE8C;"> id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#B48EAD;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>register:</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#24292e;--shiki-dark:#d8dee9ff;--shiki-light-bg:#fff;--shiki-dark-bg:#2e3440ff;"><pre class="shiki shiki-themes github-light nord vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> flask_sqlalchemy </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;"> SQLAlchemy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D8DEE9FF;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#88C0D0;"> SQLAlchemy</span><span style="--shiki-light:#24292E;--shiki-dark:#ECEFF4;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,51)]))}const d=s(h,[["render",t]]),r=JSON.parse('{"path":"/blogs/Database/mongodb.html","title":"MongoDB Database","lang":"zh-CN","frontmatter":{"title":"MongoDB Database","date":"2018-08-08T00:00:00.000Z","tag":["database"],"category":["Database"],"description":"Common RDB(Relational Database): PostgreSQL, MySQL, Orcal, MS SQL Server and SQLite. database –collection – document– field – index. Install in LInux mongoDB _id _id 类型为 ObjectI...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MongoDB Database\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2018-08-08T00:00:00.000Z\\",\\"dateModified\\":\\"2022-09-27T15:26:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Someone\\",\\"url\\":\\"https://www.weigao.cc\\"}]}"],["meta",{"property":"og:url","content":"https://vueblog.weigao.cc/blogs/Database/mongodb.html"}],["meta",{"property":"og:site_name","content":"weigao"}],["meta",{"property":"og:title","content":"MongoDB Database"}],["meta",{"property":"og:description","content":"Common RDB(Relational Database): PostgreSQL, MySQL, Orcal, MS SQL Server and SQLite. database –collection – document– field – index. Install in LInux mongoDB _id _id 类型为 ObjectI..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-09-27T15:26:02.000Z"}],["meta",{"property":"article:tag","content":"database"}],["meta",{"property":"article:published_time","content":"2018-08-08T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-09-27T15:26:02.000Z"}]]},"git":{"createdTime":1644237761000,"updatedTime":1664292362000,"contributors":[{"name":"chenweigao","username":"chenweigao","email":"297859260@qq.com","commits":5,"url":"https://github.com/chenweigao"}]},"readingTime":{"minutes":1.57,"words":472},"filePathRelative":"blogs/Database/mongodb.md","excerpt":"<p>Common RDB(Relational Database): PostgreSQL, MySQL, Orcal, MS SQL Server and SQLite.</p>\\n<p><code>database</code> –<code>collection</code> – <code>document</code>– <code>field</code> – <code>index</code>.</p>\\n<p><a href=\\"http://www.runoob.com/mongodb/mongodb-linux-install.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Install in LInux</a></p>","autoDesc":true}');export{d as comp,r as data};
